(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function s(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=s(r);fetch(r.href,o)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function nl(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const Re={},Bn=[],Xt=()=>{},Jp=()=>!1,Go=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),rl=e=>e.startsWith("onUpdate:"),Je=Object.assign,ol=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},Yp=Object.prototype.hasOwnProperty,Oe=(e,t)=>Yp.call(e,t),ue=Array.isArray,Mn=e=>Jo(e)==="[object Map]",ud=e=>Jo(e)==="[object Set]",he=e=>typeof e=="function",Ne=e=>typeof e=="string",ks=e=>typeof e=="symbol",Me=e=>e!==null&&typeof e=="object",dd=e=>(Me(e)||he(e))&&he(e.then)&&he(e.catch),fd=Object.prototype.toString,Jo=e=>fd.call(e),Xp=e=>Jo(e).slice(8,-1),hd=e=>Jo(e)==="[object Object]",il=e=>Ne(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,yr=nl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Yo=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},Qp=/-(\w)/g,gt=Yo(e=>e.replace(Qp,(t,s)=>s?s.toUpperCase():"")),Zp=/\B([A-Z])/g,Ws=Yo(e=>e.replace(Zp,"-$1").toLowerCase()),Xo=Yo(e=>e.charAt(0).toUpperCase()+e.slice(1)),vr=Yo(e=>e?`on${Xo(e)}`:""),Ns=(e,t)=>!Object.is(e,t),xo=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},pd=(e,t,s,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:s})},da=e=>{const t=parseFloat(e);return isNaN(t)?e:t},em=e=>{const t=Ne(e)?Number(e):NaN;return isNaN(t)?e:t};let sc;const Qo=()=>sc||(sc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ut(e){if(ue(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],r=Ne(n)?rm(n):Ut(n);if(r)for(const o in r)t[o]=r[o]}return t}else if(Ne(e)||Me(e))return e}const tm=/;(?![^(]*\))/g,sm=/:([^]+)/,nm=/\/\*[^]*?\*\//g;function rm(e){const t={};return e.replace(nm,"").split(tm).forEach(s=>{if(s){const n=s.split(sm);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function ge(e){let t="";if(Ne(e))t=e;else if(ue(e))for(let s=0;s<e.length;s++){const n=ge(e[s]);n&&(t+=n+" ")}else if(Me(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}function ts(e){if(!e)return null;let{class:t,style:s}=e;return t&&!Ne(t)&&(e.class=ge(t)),s&&(e.style=Ut(s)),e}const om="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",im=nl(om);function md(e){return!!e||e===""}const gd=e=>!!(e&&e.__v_isRef===!0),V=e=>Ne(e)?e:e==null?"":ue(e)||Me(e)&&(e.toString===fd||!he(e.toString))?gd(e)?V(e.value):JSON.stringify(e,yd,2):String(e),yd=(e,t)=>gd(t)?yd(e,t.value):Mn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,r],o)=>(s[$i(n,o)+" =>"]=r,s),{})}:ud(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>$i(s))}:ks(t)?$i(t):Me(t)&&!ue(t)&&!hd(t)?String(t):t,$i=(e,t="")=>{var s;return ks(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ut;class vd{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ut,!t&&ut&&(this.index=(ut.scopes||(ut.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=ut;try{return ut=this,t()}finally{ut=s}}}on(){ut=this}off(){ut=this.parent}stop(t){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function _d(e){return new vd(e)}function al(){return ut}function bd(e,t=!1){ut&&ut.cleanups.push(e)}let je;const Di=new WeakSet;class wd{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ut&&ut.active&&ut.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Di.has(this)&&(Di.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||kd(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,nc(this),Cd(this);const t=je,s=Lt;je=this,Lt=!0;try{return this.fn()}finally{Sd(this),je=t,Lt=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)ul(t);this.deps=this.depsTail=void 0,nc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Di.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){fa(this)&&this.run()}get dirty(){return fa(this)}}let xd=0,_r,br;function kd(e,t=!1){if(e.flags|=8,t){e.next=br,br=e;return}e.next=_r,_r=e}function ll(){xd++}function cl(){if(--xd>0)return;if(br){let t=br;for(br=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;_r;){let t=_r;for(_r=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=s}}if(e)throw e}function Cd(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Sd(e){let t,s=e.depsTail,n=s;for(;n;){const r=n.prevDep;n.version===-1?(n===s&&(s=r),ul(n),am(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=r}e.deps=t,e.depsTail=s}function fa(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Ed(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Ed(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Pr))return;e.globalVersion=Pr;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!fa(e)){e.flags&=-3;return}const s=je,n=Lt;je=e,Lt=!0;try{Cd(e);const r=e.fn(e._value);(t.version===0||Ns(r,e._value))&&(e._value=r,t.version++)}catch(r){throw t.version++,r}finally{je=s,Lt=n,Sd(e),e.flags&=-3}}function ul(e,t=!1){const{dep:s,prevSub:n,nextSub:r}=e;if(n&&(n.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=n,e.nextSub=void 0),s.subs===e&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let o=s.computed.deps;o;o=o.nextDep)ul(o,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function am(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let Lt=!0;const Ad=[];function Gs(){Ad.push(Lt),Lt=!1}function Js(){const e=Ad.pop();Lt=e===void 0?!0:e}function nc(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=je;je=void 0;try{t()}finally{je=s}}}let Pr=0;class lm{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Zo{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!je||!Lt||je===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==je)s=this.activeLink=new lm(je,this),je.deps?(s.prevDep=je.depsTail,je.depsTail.nextDep=s,je.depsTail=s):je.deps=je.depsTail=s,Td(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=je.depsTail,s.nextDep=void 0,je.depsTail.nextDep=s,je.depsTail=s,je.deps===s&&(je.deps=n)}return s}trigger(t){this.version++,Pr++,this.notify(t)}notify(t){ll();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{cl()}}}function Td(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)Td(n)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const Ro=new WeakMap,fn=Symbol(""),ha=Symbol(""),Or=Symbol("");function rt(e,t,s){if(Lt&&je){let n=Ro.get(e);n||Ro.set(e,n=new Map);let r=n.get(s);r||(n.set(s,r=new Zo),r.map=n,r.key=s),r.track()}}function gs(e,t,s,n,r,o){const i=Ro.get(e);if(!i){Pr++;return}const a=l=>{l&&l.trigger()};if(ll(),t==="clear")i.forEach(a);else{const l=ue(e),u=l&&il(s);if(l&&s==="length"){const c=Number(n);i.forEach((d,f)=>{(f==="length"||f===Or||!ks(f)&&f>=c)&&a(d)})}else switch((s!==void 0||i.has(void 0))&&a(i.get(s)),u&&a(i.get(Or)),t){case"add":l?u&&a(i.get("length")):(a(i.get(fn)),Mn(e)&&a(i.get(ha)));break;case"delete":l||(a(i.get(fn)),Mn(e)&&a(i.get(ha)));break;case"set":Mn(e)&&a(i.get(fn));break}}cl()}function cm(e,t){const s=Ro.get(e);return s&&s.get(t)}function vn(e){const t=Ce(e);return t===e?t:(rt(t,"iterate",Or),Pt(e)?t:t.map(ot))}function ei(e){return rt(e=Ce(e),"iterate",Or),e}const um={__proto__:null,[Symbol.iterator](){return Li(this,Symbol.iterator,ot)},concat(...e){return vn(this).concat(...e.map(t=>ue(t)?vn(t):t))},entries(){return Li(this,"entries",e=>(e[1]=ot(e[1]),e))},every(e,t){return us(this,"every",e,t,void 0,arguments)},filter(e,t){return us(this,"filter",e,t,s=>s.map(ot),arguments)},find(e,t){return us(this,"find",e,t,ot,arguments)},findIndex(e,t){return us(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return us(this,"findLast",e,t,ot,arguments)},findLastIndex(e,t){return us(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return us(this,"forEach",e,t,void 0,arguments)},includes(...e){return ji(this,"includes",e)},indexOf(...e){return ji(this,"indexOf",e)},join(e){return vn(this).join(e)},lastIndexOf(...e){return ji(this,"lastIndexOf",e)},map(e,t){return us(this,"map",e,t,void 0,arguments)},pop(){return ir(this,"pop")},push(...e){return ir(this,"push",e)},reduce(e,...t){return rc(this,"reduce",e,t)},reduceRight(e,...t){return rc(this,"reduceRight",e,t)},shift(){return ir(this,"shift")},some(e,t){return us(this,"some",e,t,void 0,arguments)},splice(...e){return ir(this,"splice",e)},toReversed(){return vn(this).toReversed()},toSorted(e){return vn(this).toSorted(e)},toSpliced(...e){return vn(this).toSpliced(...e)},unshift(...e){return ir(this,"unshift",e)},values(){return Li(this,"values",ot)}};function Li(e,t,s){const n=ei(e),r=n[t]();return n!==e&&!Pt(e)&&(r._next=r.next,r.next=()=>{const o=r._next();return o.value&&(o.value=s(o.value)),o}),r}const dm=Array.prototype;function us(e,t,s,n,r,o){const i=ei(e),a=i!==e&&!Pt(e),l=i[t];if(l!==dm[t]){const d=l.apply(e,o);return a?ot(d):d}let u=s;i!==e&&(a?u=function(d,f){return s.call(this,ot(d),f,e)}:s.length>2&&(u=function(d,f){return s.call(this,d,f,e)}));const c=l.call(i,u,n);return a&&r?r(c):c}function rc(e,t,s,n){const r=ei(e);let o=s;return r!==e&&(Pt(e)?s.length>3&&(o=function(i,a,l){return s.call(this,i,a,l,e)}):o=function(i,a,l){return s.call(this,i,ot(a),l,e)}),r[t](o,...n)}function ji(e,t,s){const n=Ce(e);rt(n,"iterate",Or);const r=n[t](...s);return(r===-1||r===!1)&&fl(s[0])?(s[0]=Ce(s[0]),n[t](...s)):r}function ir(e,t,s=[]){Gs(),ll();const n=Ce(e)[t].apply(e,s);return cl(),Js(),n}const fm=nl("__proto__,__v_isRef,__isVue"),Pd=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(ks));function hm(e){ks(e)||(e=String(e));const t=Ce(this);return rt(t,"has",e),t.hasOwnProperty(e)}class Od{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,n){if(s==="__v_skip")return t.__v_skip;const r=this._isReadonly,o=this._isShallow;if(s==="__v_isReactive")return!r;if(s==="__v_isReadonly")return r;if(s==="__v_isShallow")return o;if(s==="__v_raw")return n===(r?o?jd:Ld:o?Dd:$d).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const i=ue(t);if(!r){let l;if(i&&(l=um[s]))return l;if(s==="hasOwnProperty")return hm}const a=Reflect.get(t,s,ze(t)?t:n);return(ks(s)?Pd.has(s):fm(s))||(r||rt(t,"get",s),o)?a:ze(a)?i&&il(s)?a:a.value:Me(a)?r?dl(a):is(a):a}}class Id extends Od{constructor(t=!1){super(!1,t)}set(t,s,n,r){let o=t[s];if(!this._isShallow){const l=hn(o);if(!Pt(n)&&!hn(n)&&(o=Ce(o),n=Ce(n)),!ue(t)&&ze(o)&&!ze(n))return l?!1:(o.value=n,!0)}const i=ue(t)&&il(s)?Number(s)<t.length:Oe(t,s),a=Reflect.set(t,s,n,ze(t)?t:r);return t===Ce(r)&&(i?Ns(n,o)&&gs(t,"set",s,n):gs(t,"add",s,n)),a}deleteProperty(t,s){const n=Oe(t,s);t[s];const r=Reflect.deleteProperty(t,s);return r&&n&&gs(t,"delete",s,void 0),r}has(t,s){const n=Reflect.has(t,s);return(!ks(s)||!Pd.has(s))&&rt(t,"has",s),n}ownKeys(t){return rt(t,"iterate",ue(t)?"length":fn),Reflect.ownKeys(t)}}class Rd extends Od{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const pm=new Id,mm=new Rd,gm=new Id(!0),ym=new Rd(!0),pa=e=>e,so=e=>Reflect.getPrototypeOf(e);function vm(e,t,s){return function(...n){const r=this.__v_raw,o=Ce(r),i=Mn(o),a=e==="entries"||e===Symbol.iterator&&i,l=e==="keys"&&i,u=r[e](...n),c=s?pa:t?ma:ot;return!t&&rt(o,"iterate",l?ha:fn),{next(){const{value:d,done:f}=u.next();return f?{value:d,done:f}:{value:a?[c(d[0]),c(d[1])]:c(d),done:f}},[Symbol.iterator](){return this}}}}function no(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function _m(e,t){const s={get(r){const o=this.__v_raw,i=Ce(o),a=Ce(r);e||(Ns(r,a)&&rt(i,"get",r),rt(i,"get",a));const{has:l}=so(i),u=t?pa:e?ma:ot;if(l.call(i,r))return u(o.get(r));if(l.call(i,a))return u(o.get(a));o!==i&&o.get(r)},get size(){const r=this.__v_raw;return!e&&rt(Ce(r),"iterate",fn),Reflect.get(r,"size",r)},has(r){const o=this.__v_raw,i=Ce(o),a=Ce(r);return e||(Ns(r,a)&&rt(i,"has",r),rt(i,"has",a)),r===a?o.has(r):o.has(r)||o.has(a)},forEach(r,o){const i=this,a=i.__v_raw,l=Ce(a),u=t?pa:e?ma:ot;return!e&&rt(l,"iterate",fn),a.forEach((c,d)=>r.call(o,u(c),u(d),i))}};return Je(s,e?{add:no("add"),set:no("set"),delete:no("delete"),clear:no("clear")}:{add(r){!t&&!Pt(r)&&!hn(r)&&(r=Ce(r));const o=Ce(this);return so(o).has.call(o,r)||(o.add(r),gs(o,"add",r,r)),this},set(r,o){!t&&!Pt(o)&&!hn(o)&&(o=Ce(o));const i=Ce(this),{has:a,get:l}=so(i);let u=a.call(i,r);u||(r=Ce(r),u=a.call(i,r));const c=l.call(i,r);return i.set(r,o),u?Ns(o,c)&&gs(i,"set",r,o):gs(i,"add",r,o),this},delete(r){const o=Ce(this),{has:i,get:a}=so(o);let l=i.call(o,r);l||(r=Ce(r),l=i.call(o,r)),a&&a.call(o,r);const u=o.delete(r);return l&&gs(o,"delete",r,void 0),u},clear(){const r=Ce(this),o=r.size!==0,i=r.clear();return o&&gs(r,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(r=>{s[r]=vm(r,e,t)}),s}function ti(e,t){const s=_m(e,t);return(n,r,o)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?n:Reflect.get(Oe(s,r)&&r in n?s:n,r,o)}const bm={get:ti(!1,!1)},wm={get:ti(!1,!0)},xm={get:ti(!0,!1)},km={get:ti(!0,!0)},$d=new WeakMap,Dd=new WeakMap,Ld=new WeakMap,jd=new WeakMap;function Cm(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Sm(e){return e.__v_skip||!Object.isExtensible(e)?0:Cm(Xp(e))}function is(e){return hn(e)?e:si(e,!1,pm,bm,$d)}function Bd(e){return si(e,!1,gm,wm,Dd)}function dl(e){return si(e,!0,mm,xm,Ld)}function _n(e){return si(e,!0,ym,km,jd)}function si(e,t,s,n,r){if(!Me(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=r.get(e);if(o)return o;const i=Sm(e);if(i===0)return e;const a=new Proxy(e,i===2?n:s);return r.set(e,a),a}function Nn(e){return hn(e)?Nn(e.__v_raw):!!(e&&e.__v_isReactive)}function hn(e){return!!(e&&e.__v_isReadonly)}function Pt(e){return!!(e&&e.__v_isShallow)}function fl(e){return e?!!e.__v_raw:!1}function Ce(e){const t=e&&e.__v_raw;return t?Ce(t):e}function Md(e){return!Oe(e,"__v_skip")&&Object.isExtensible(e)&&pd(e,"__v_skip",!0),e}const ot=e=>Me(e)?is(e):e,ma=e=>Me(e)?dl(e):e;function ze(e){return e?e.__v_isRef===!0:!1}function ee(e){return Nd(e,!1)}function ni(e){return Nd(e,!0)}function Nd(e,t){return ze(e)?e:new Em(e,t)}class Em{constructor(t,s){this.dep=new Zo,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:Ce(t),this._value=s?t:ot(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,n=this.__v_isShallow||Pt(t)||hn(t);t=n?t:Ce(t),Ns(t,s)&&(this._rawValue=t,this._value=n?t:ot(t),this.dep.trigger())}}function x(e){return ze(e)?e.value:e}function Fs(e){return he(e)?e():x(e)}const Am={get:(e,t,s)=>t==="__v_raw"?e:x(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const r=e[t];return ze(r)&&!ze(s)?(r.value=s,!0):Reflect.set(e,t,s,n)}};function Fd(e){return Nn(e)?e:new Proxy(e,Am)}class Tm{constructor(t){this.__v_isRef=!0,this._value=void 0;const s=this.dep=new Zo,{get:n,set:r}=t(s.track.bind(s),s.trigger.bind(s));this._get=n,this._set=r}get value(){return this._value=this._get()}set value(t){this._set(t)}}function Pm(e){return new Tm(e)}function Ys(e){const t=ue(e)?new Array(e.length):{};for(const s in e)t[s]=Ud(e,s);return t}class Om{constructor(t,s,n){this._object=t,this._key=s,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return cm(Ce(this._object),this._key)}}class Im{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Rm(e,t,s){return ze(e)?e:he(e)?new Im(e):Me(e)&&arguments.length>1?Ud(e,t,s):ee(e)}function Ud(e,t,s){const n=e[t];return ze(n)?n:new Om(e,t,s)}class $m{constructor(t,s,n){this.fn=t,this.setter=s,this._value=void 0,this.dep=new Zo(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Pr-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&je!==this)return kd(this,!0),!0}get value(){const t=this.dep.track();return Ed(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Dm(e,t,s=!1){let n,r;return he(e)?n=e:(n=e.get,r=e.set),new $m(n,r,s)}const ro={},$o=new WeakMap;let ln;function Lm(e,t=!1,s=ln){if(s){let n=$o.get(s);n||$o.set(s,n=[]),n.push(e)}}function jm(e,t,s=Re){const{immediate:n,deep:r,once:o,scheduler:i,augmentJob:a,call:l}=s,u=S=>r?S:Pt(S)||r===!1||r===0?ys(S,1):ys(S);let c,d,f,h,m=!1,g=!1;if(ze(e)?(d=()=>e.value,m=Pt(e)):Nn(e)?(d=()=>u(e),m=!0):ue(e)?(g=!0,m=e.some(S=>Nn(S)||Pt(S)),d=()=>e.map(S=>{if(ze(S))return S.value;if(Nn(S))return u(S);if(he(S))return l?l(S,2):S()})):he(e)?t?d=l?()=>l(e,2):e:d=()=>{if(f){Gs();try{f()}finally{Js()}}const S=ln;ln=c;try{return l?l(e,3,[h]):e(h)}finally{ln=S}}:d=Xt,t&&r){const S=d,D=r===!0?1/0:r;d=()=>ys(S(),D)}const b=al(),C=()=>{c.stop(),b&&b.active&&ol(b.effects,c)};if(o&&t){const S=t;t=(...D)=>{S(...D),C()}}let E=g?new Array(e.length).fill(ro):ro;const P=S=>{if(!(!(c.flags&1)||!c.dirty&&!S))if(t){const D=c.run();if(r||m||(g?D.some((W,I)=>Ns(W,E[I])):Ns(D,E))){f&&f();const W=ln;ln=c;try{const I=[D,E===ro?void 0:g&&E[0]===ro?[]:E,h];l?l(t,3,I):t(...I),E=D}finally{ln=W}}}else c.run()};return a&&a(P),c=new wd(d),c.scheduler=i?()=>i(P,!1):P,h=S=>Lm(S,!1,c),f=c.onStop=()=>{const S=$o.get(c);if(S){if(l)l(S,4);else for(const D of S)D();$o.delete(c)}},t?n?P(!0):E=c.run():i?i(P.bind(null,!0),!0):c.run(),C.pause=c.pause.bind(c),C.resume=c.resume.bind(c),C.stop=C,C}function ys(e,t=1/0,s){if(t<=0||!Me(e)||e.__v_skip||(s=s||new Set,s.has(e)))return e;if(s.add(e),t--,ze(e))ys(e.value,t,s);else if(ue(e))for(let n=0;n<e.length;n++)ys(e[n],t,s);else if(ud(e)||Mn(e))e.forEach(n=>{ys(n,t,s)});else if(hd(e)){for(const n in e)ys(e[n],t,s);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&ys(e[n],t,s)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function zr(e,t,s,n){try{return n?e(...n):e()}catch(r){ri(r,t,s)}}function Bt(e,t,s,n){if(he(e)){const r=zr(e,t,s,n);return r&&dd(r)&&r.catch(o=>{ri(o,t,s)}),r}if(ue(e)){const r=[];for(let o=0;o<e.length;o++)r.push(Bt(e[o],t,s,n));return r}}function ri(e,t,s,n=!0){const r=t?t.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:i}=t&&t.appContext.config||Re;if(t){let a=t.parent;const l=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${s}`;for(;a;){const c=a.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](e,l,u)===!1)return}a=a.parent}if(o){Gs(),zr(o,null,10,[e,l,u]),Js();return}}Bm(e,s,r,n,i)}function Bm(e,t,s,n=!0,r=!1){if(r)throw e;console.error(e)}const dt=[];let Jt=-1;const Fn=[];let Ds=null,In=0;const Vd=Promise.resolve();let Do=null;function nt(e){const t=Do||Vd;return e?t.then(this?e.bind(this):e):t}function Mm(e){let t=Jt+1,s=dt.length;for(;t<s;){const n=t+s>>>1,r=dt[n],o=Ir(r);o<e||o===e&&r.flags&2?t=n+1:s=n}return t}function hl(e){if(!(e.flags&1)){const t=Ir(e),s=dt[dt.length-1];!s||!(e.flags&2)&&t>=Ir(s)?dt.push(e):dt.splice(Mm(t),0,e),e.flags|=1,qd()}}function qd(){Do||(Do=Vd.then(Hd))}function Nm(e){ue(e)?Fn.push(...e):Ds&&e.id===-1?Ds.splice(In+1,0,e):e.flags&1||(Fn.push(e),e.flags|=1),qd()}function oc(e,t,s=Jt+1){for(;s<dt.length;s++){const n=dt[s];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;dt.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function zd(e){if(Fn.length){const t=[...new Set(Fn)].sort((s,n)=>Ir(s)-Ir(n));if(Fn.length=0,Ds){Ds.push(...t);return}for(Ds=t,In=0;In<Ds.length;In++){const s=Ds[In];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}Ds=null,In=0}}const Ir=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Hd(e){try{for(Jt=0;Jt<dt.length;Jt++){const t=dt[Jt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),zr(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Jt<dt.length;Jt++){const t=dt[Jt];t&&(t.flags&=-2)}Jt=-1,dt.length=0,zd(),Do=null,(dt.length||Fn.length)&&Hd()}}let et=null,Kd=null;function Lo(e){const t=et;return et=e,Kd=e&&e.type.__scopeId||null,t}function k(e,t=et,s){if(!t||e._n)return e;const n=(...r)=>{n._d&&vc(-1);const o=Lo(t);let i;try{i=e(...r)}finally{Lo(o),n._d&&vc(1)}return i};return n._n=!0,n._c=!0,n._d=!0,n}function oi(e,t){if(et===null)return e;const s=ui(et),n=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[o,i,a,l=Re]=t[r];o&&(he(o)&&(o={mounted:o,updated:o}),o.deep&&ys(i),n.push({dir:o,instance:s,value:i,oldValue:void 0,arg:a,modifiers:l}))}return e}function sn(e,t,s,n){const r=e.dirs,o=t&&t.dirs;for(let i=0;i<r.length;i++){const a=r[i];o&&(a.oldValue=o[i].value);let l=a.dir[n];l&&(Gs(),Bt(l,s,8,[e.el,a,e,t]),Js())}}const Wd=Symbol("_vte"),Fm=e=>e.__isTeleport,wr=e=>e&&(e.disabled||e.disabled===""),ic=e=>e&&(e.defer||e.defer===""),ac=e=>typeof SVGElement<"u"&&e instanceof SVGElement,lc=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,ga=(e,t)=>{const s=e&&e.to;return Ne(s)?t?t(s):null:s},Gd={name:"Teleport",__isTeleport:!0,process(e,t,s,n,r,o,i,a,l,u){const{mc:c,pc:d,pbc:f,o:{insert:h,querySelector:m,createText:g,createComment:b}}=u,C=wr(t.props);let{shapeFlag:E,children:P,dynamicChildren:S}=t;if(e==null){const D=t.el=g(""),W=t.anchor=g("");h(D,s,n),h(W,s,n);const I=(A,F)=>{E&16&&(r&&r.isCE&&(r.ce._teleportTarget=A),c(P,A,F,r,o,i,a,l))},O=()=>{const A=t.target=ga(t.props,m),F=Jd(A,t,g,h);A&&(i!=="svg"&&ac(A)?i="svg":i!=="mathml"&&lc(A)&&(i="mathml"),C||(I(A,F),ko(t,!1)))};C&&(I(s,W),ko(t,!0)),ic(t.props)?ct(()=>{O(),t.el.__isMounted=!0},o):O()}else{if(ic(t.props)&&!e.el.__isMounted){ct(()=>{Gd.process(e,t,s,n,r,o,i,a,l,u),delete e.el.__isMounted},o);return}t.el=e.el,t.targetStart=e.targetStart;const D=t.anchor=e.anchor,W=t.target=e.target,I=t.targetAnchor=e.targetAnchor,O=wr(e.props),A=O?s:W,F=O?D:I;if(i==="svg"||ac(W)?i="svg":(i==="mathml"||lc(W))&&(i="mathml"),S?(f(e.dynamicChildren,S,A,r,o,i,a),yl(e,t,!0)):l||d(e,t,A,F,r,o,i,a,!1),C)O?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):oo(t,s,D,u,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const q=t.target=ga(t.props,m);q&&oo(t,q,null,u,0)}else O&&oo(t,W,I,u,1);ko(t,C)}},remove(e,t,s,{um:n,o:{remove:r}},o){const{shapeFlag:i,children:a,anchor:l,targetStart:u,targetAnchor:c,target:d,props:f}=e;if(d&&(r(u),r(c)),o&&r(l),i&16){const h=o||!wr(f);for(let m=0;m<a.length;m++){const g=a[m];n(g,t,s,h,!!g.dynamicChildren)}}},move:oo,hydrate:Um};function oo(e,t,s,{o:{insert:n},m:r},o=2){o===0&&n(e.targetAnchor,t,s);const{el:i,anchor:a,shapeFlag:l,children:u,props:c}=e,d=o===2;if(d&&n(i,t,s),(!d||wr(c))&&l&16)for(let f=0;f<u.length;f++)r(u[f],t,s,2);d&&n(a,t,s)}function Um(e,t,s,n,r,o,{o:{nextSibling:i,parentNode:a,querySelector:l,insert:u,createText:c}},d){const f=t.target=ga(t.props,l);if(f){const h=wr(t.props),m=f._lpa||f.firstChild;if(t.shapeFlag&16)if(h)t.anchor=d(i(e),t,a(e),s,n,r,o),t.targetStart=m,t.targetAnchor=m&&i(m);else{t.anchor=i(e);let g=m;for(;g;){if(g&&g.nodeType===8){if(g.data==="teleport start anchor")t.targetStart=g;else if(g.data==="teleport anchor"){t.targetAnchor=g,f._lpa=t.targetAnchor&&i(t.targetAnchor);break}}g=i(g)}t.targetAnchor||Jd(f,t,c,u),d(m&&i(m),t,f,s,n,r,o)}ko(t,h)}return t.anchor&&i(t.anchor)}const Vm=Gd;function ko(e,t){const s=e.ctx;if(s&&s.ut){let n,r;for(t?(n=e.el,r=e.anchor):(n=e.targetStart,r=e.targetAnchor);n&&n!==r;)n.nodeType===1&&n.setAttribute("data-v-owner",s.uid),n=n.nextSibling;s.ut()}}function Jd(e,t,s,n){const r=t.targetStart=s(""),o=t.targetAnchor=s("");return r[Wd]=o,e&&(n(r,e),n(o,e)),o}const bn=Symbol("_leaveCb"),io=Symbol("_enterCb");function qm(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Xs(()=>{e.isMounted=!0}),pl(()=>{e.isUnmounting=!0}),e}const At=[Function,Array],zm={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:At,onEnter:At,onAfterEnter:At,onEnterCancelled:At,onBeforeLeave:At,onLeave:At,onAfterLeave:At,onLeaveCancelled:At,onBeforeAppear:At,onAppear:At,onAfterAppear:At,onAppearCancelled:At};function Hm(e,t){const{leavingVNodes:s}=e;let n=s.get(t.type);return n||(n=Object.create(null),s.set(t.type,n)),n}function ya(e,t,s,n,r){const{appear:o,mode:i,persisted:a=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:c,onEnterCancelled:d,onBeforeLeave:f,onLeave:h,onAfterLeave:m,onLeaveCancelled:g,onBeforeAppear:b,onAppear:C,onAfterAppear:E,onAppearCancelled:P}=t,S=String(e.key),D=Hm(s,e),W=(A,F)=>{A&&Bt(A,n,9,F)},I=(A,F)=>{const q=F[1];W(A,F),ue(A)?A.every(j=>j.length<=1)&&q():A.length<=1&&q()},O={mode:i,persisted:a,beforeEnter(A){let F=l;if(!s.isMounted)if(o)F=b||l;else return;A[bn]&&A[bn](!0);const q=D[S];q&&Rn(e,q)&&q.el[bn]&&q.el[bn](),W(F,[A])},enter(A){let F=u,q=c,j=d;if(!s.isMounted)if(o)F=C||u,q=E||c,j=P||d;else return;let ie=!1;const de=A[io]=ye=>{ie||(ie=!0,ye?W(j,[A]):W(q,[A]),O.delayedLeave&&O.delayedLeave(),A[io]=void 0)};F?I(F,[A,de]):de()},leave(A,F){const q=String(e.key);if(A[io]&&A[io](!0),s.isUnmounting)return F();W(f,[A]);let j=!1;const ie=A[bn]=de=>{j||(j=!0,F(),de?W(g,[A]):W(m,[A]),A[bn]=void 0,D[q]===e&&delete D[q])};D[q]=e,h?I(h,[A,ie]):ie()},clone(A){return ya(A,t,s,n)}};return O}function Rr(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Rr(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Yd(e,t=!1,s){let n=[],r=0;for(let o=0;o<e.length;o++){let i=e[o];const a=s==null?i.key:String(s)+String(i.key!=null?i.key:o);i.type===_e?(i.patchFlag&128&&r++,n=n.concat(Yd(i.children,t,a))):(t||i.type!==ns)&&n.push(a!=null?Vs(i,{key:a}):i)}if(r>1)for(let o=0;o<n.length;o++)n[o].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function ce(e,t){return he(e)?Je({name:e.name},t,{setup:e}):e}function cc(){const e=as();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function Xd(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function jo(e,t,s,n,r=!1){if(ue(e)){e.forEach((m,g)=>jo(m,t&&(ue(t)?t[g]:t),s,n,r));return}if(Un(n)&&!r){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&jo(e,t,s,n.component.subTree);return}const o=n.shapeFlag&4?ui(n.component):n.el,i=r?null:o,{i:a,r:l}=e,u=t&&t.r,c=a.refs===Re?a.refs={}:a.refs,d=a.setupState,f=Ce(d),h=d===Re?()=>!1:m=>Oe(f,m);if(u!=null&&u!==l&&(Ne(u)?(c[u]=null,h(u)&&(d[u]=null)):ze(u)&&(u.value=null)),he(l))zr(l,a,12,[i,c]);else{const m=Ne(l),g=ze(l);if(m||g){const b=()=>{if(e.f){const C=m?h(l)?d[l]:c[l]:l.value;r?ue(C)&&ol(C,o):ue(C)?C.includes(o)||C.push(o):m?(c[l]=[o],h(l)&&(d[l]=c[l])):(l.value=[o],e.k&&(c[e.k]=l.value))}else m?(c[l]=i,h(l)&&(d[l]=i)):g&&(l.value=i,e.k&&(c[e.k]=i))};i?(b.id=-1,ct(b,s)):b()}}}Qo().requestIdleCallback;Qo().cancelIdleCallback;const Un=e=>!!e.type.__asyncLoader,Qd=e=>e.type.__isKeepAlive;function Km(e,t){Zd(e,"a",t)}function Wm(e,t){Zd(e,"da",t)}function Zd(e,t,s=st){const n=e.__wdc||(e.__wdc=()=>{let r=s;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(ii(t,n,s),s){let r=s.parent;for(;r&&r.parent;)Qd(r.parent.vnode)&&Gm(n,t,s,r),r=r.parent}}function Gm(e,t,s,n){const r=ii(t,e,n,!0);Qn(()=>{ol(n[t],r)},s)}function ii(e,t,s=st,n=!1){if(s){const r=s[e]||(s[e]=[]),o=t.__weh||(t.__weh=(...i)=>{Gs();const a=Hr(s),l=Bt(t,s,e,i);return a(),Js(),l});return n?r.unshift(o):r.push(o),o}}const Cs=e=>(t,s=st)=>{(!Lr||e==="sp")&&ii(e,(...n)=>t(...n),s)},Jm=Cs("bm"),Xs=Cs("m"),Ym=Cs("bu"),ef=Cs("u"),pl=Cs("bum"),Qn=Cs("um"),Xm=Cs("sp"),Qm=Cs("rtg"),Zm=Cs("rtc");function eg(e,t=st){ii("ec",e,t)}const tf="components";function L(e,t){return nf(tf,e,!0,t)||e}const sf=Symbol.for("v-ndc");function ml(e){return Ne(e)?nf(tf,e,!1)||e:e||sf}function nf(e,t,s=!0,n=!1){const r=et||st;if(r){const o=r.type;{const a=Ng(o,!1);if(a&&(a===t||a===gt(t)||a===Xo(gt(t))))return o}const i=uc(r[e]||o[e],t)||uc(r.appContext[e],t);return!i&&n?o:i}}function uc(e,t){return e&&(e[t]||e[gt(t)]||e[Xo(gt(t))])}function qe(e,t,s,n){let r;const o=s,i=ue(e);if(i||Ne(e)){const a=i&&Nn(e);let l=!1;a&&(l=!Pt(e),e=ei(e)),r=new Array(e.length);for(let u=0,c=e.length;u<c;u++)r[u]=t(l?ot(e[u]):e[u],u,void 0,o)}else if(typeof e=="number"){r=new Array(e);for(let a=0;a<e;a++)r[a]=t(a+1,a,void 0,o)}else if(Me(e))if(e[Symbol.iterator])r=Array.from(e,(a,l)=>t(a,l,void 0,o));else{const a=Object.keys(e);r=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const c=a[l];r[l]=t(e[c],c,l,o)}}else r=[];return r}function re(e,t,s={},n,r){if(et.ce||et.parent&&Un(et.parent)&&et.parent.ce)return w(),K(_e,null,[v("slot",s,n)],64);let o=e[t];o&&o._c&&(o._d=!1),w();const i=o&&rf(o(s)),a=s.key||i&&i.key,l=K(_e,{key:(a&&!ks(a)?a:`_${t}`)+""},i||[],i&&e._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),o&&o._c&&(o._d=!0),l}function rf(e){return e.some(t=>Dr(t)?!(t.type===ns||t.type===_e&&!rf(t.children)):!0)?e:null}function tg(e,t){const s={};for(const n in e)s[vr(n)]=e[n];return s}const va=e=>e?Ef(e)?ui(e):va(e.parent):null,xr=Je(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>va(e.parent),$root:e=>va(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>lf(e),$forceUpdate:e=>e.f||(e.f=()=>{hl(e.update)}),$nextTick:e=>e.n||(e.n=nt.bind(e.proxy)),$watch:e=>xg.bind(e)}),Bi=(e,t)=>e!==Re&&!e.__isScriptSetup&&Oe(e,t),sg={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:n,data:r,props:o,accessCache:i,type:a,appContext:l}=e;let u;if(t[0]!=="$"){const h=i[t];if(h!==void 0)switch(h){case 1:return n[t];case 2:return r[t];case 4:return s[t];case 3:return o[t]}else{if(Bi(n,t))return i[t]=1,n[t];if(r!==Re&&Oe(r,t))return i[t]=2,r[t];if((u=e.propsOptions[0])&&Oe(u,t))return i[t]=3,o[t];if(s!==Re&&Oe(s,t))return i[t]=4,s[t];ba&&(i[t]=0)}}const c=xr[t];let d,f;if(c)return t==="$attrs"&&rt(e.attrs,"get",""),c(e);if((d=a.__cssModules)&&(d=d[t]))return d;if(s!==Re&&Oe(s,t))return i[t]=4,s[t];if(f=l.config.globalProperties,Oe(f,t))return f[t]},set({_:e},t,s){const{data:n,setupState:r,ctx:o}=e;return Bi(r,t)?(r[t]=s,!0):n!==Re&&Oe(n,t)?(n[t]=s,!0):Oe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:r,propsOptions:o}},i){let a;return!!s[i]||e!==Re&&Oe(e,i)||Bi(t,i)||(a=o[0])&&Oe(a,i)||Oe(n,i)||Oe(xr,i)||Oe(r.config.globalProperties,i)},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:Oe(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function _a(e){return ue(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}function of(e,t){const s=_a(e);for(const n in t){if(n.startsWith("__skip"))continue;let r=s[n];r?ue(r)||he(r)?r=s[n]={type:r,default:t[n]}:r.default=t[n]:r===null&&(r=s[n]={default:t[n]}),r&&t[`__skip_${n}`]&&(r.skipFactory=!0)}return s}let ba=!0;function ng(e){const t=lf(e),s=e.proxy,n=e.ctx;ba=!1,t.beforeCreate&&dc(t.beforeCreate,e,"bc");const{data:r,computed:o,methods:i,watch:a,provide:l,inject:u,created:c,beforeMount:d,mounted:f,beforeUpdate:h,updated:m,activated:g,deactivated:b,beforeDestroy:C,beforeUnmount:E,destroyed:P,unmounted:S,render:D,renderTracked:W,renderTriggered:I,errorCaptured:O,serverPrefetch:A,expose:F,inheritAttrs:q,components:j,directives:ie,filters:de}=t;if(u&&rg(u,n,null),i)for(const ae in i){const z=i[ae];he(z)&&(n[ae]=z.bind(s))}if(r){const ae=r.call(s,s);Me(ae)&&(e.data=is(ae))}if(ba=!0,o)for(const ae in o){const z=o[ae],Fe=he(z)?z.bind(s,s):he(z.get)?z.get.bind(s,s):Xt,He=!he(z)&&he(z.set)?z.set.bind(s):Xt,it=ne({get:Fe,set:He});Object.defineProperty(n,ae,{enumerable:!0,configurable:!0,get:()=>it.value,set:Xe=>it.value=Xe})}if(a)for(const ae in a)af(a[ae],n,s,ae);if(l){const ae=he(l)?l.call(s):l;Reflect.ownKeys(ae).forEach(z=>{qn(z,ae[z])})}c&&dc(c,e,"c");function me(ae,z){ue(z)?z.forEach(Fe=>ae(Fe.bind(s))):z&&ae(z.bind(s))}if(me(Jm,d),me(Xs,f),me(Ym,h),me(ef,m),me(Km,g),me(Wm,b),me(eg,O),me(Zm,W),me(Qm,I),me(pl,E),me(Qn,S),me(Xm,A),ue(F))if(F.length){const ae=e.exposed||(e.exposed={});F.forEach(z=>{Object.defineProperty(ae,z,{get:()=>s[z],set:Fe=>s[z]=Fe})})}else e.exposed||(e.exposed={});D&&e.render===Xt&&(e.render=D),q!=null&&(e.inheritAttrs=q),j&&(e.components=j),ie&&(e.directives=ie),A&&Xd(e)}function rg(e,t,s=Xt){ue(e)&&(e=wa(e));for(const n in e){const r=e[n];let o;Me(r)?"default"in r?o=Ct(r.from||n,r.default,!0):o=Ct(r.from||n):o=Ct(r),ze(o)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>o.value,set:i=>o.value=i}):t[n]=o}}function dc(e,t,s){Bt(ue(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function af(e,t,s,n){let r=n.includes(".")?wf(s,n):()=>s[n];if(Ne(e)){const o=t[e];he(o)&&Ue(r,o)}else if(he(e))Ue(r,e.bind(s));else if(Me(e))if(ue(e))e.forEach(o=>af(o,t,s,n));else{const o=he(e.handler)?e.handler.bind(s):t[e.handler];he(o)&&Ue(r,o,e)}}function lf(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:r,optionsCache:o,config:{optionMergeStrategies:i}}=e.appContext,a=o.get(t);let l;return a?l=a:!r.length&&!s&&!n?l=t:(l={},r.length&&r.forEach(u=>Bo(l,u,i,!0)),Bo(l,t,i)),Me(t)&&o.set(t,l),l}function Bo(e,t,s,n=!1){const{mixins:r,extends:o}=t;o&&Bo(e,o,s,!0),r&&r.forEach(i=>Bo(e,i,s,!0));for(const i in t)if(!(n&&i==="expose")){const a=og[i]||s&&s[i];e[i]=a?a(e[i],t[i]):t[i]}return e}const og={data:fc,props:hc,emits:hc,methods:pr,computed:pr,beforeCreate:lt,created:lt,beforeMount:lt,mounted:lt,beforeUpdate:lt,updated:lt,beforeDestroy:lt,beforeUnmount:lt,destroyed:lt,unmounted:lt,activated:lt,deactivated:lt,errorCaptured:lt,serverPrefetch:lt,components:pr,directives:pr,watch:ag,provide:fc,inject:ig};function fc(e,t){return t?e?function(){return Je(he(e)?e.call(this,this):e,he(t)?t.call(this,this):t)}:t:e}function ig(e,t){return pr(wa(e),wa(t))}function wa(e){if(ue(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function lt(e,t){return e?[...new Set([].concat(e,t))]:t}function pr(e,t){return e?Je(Object.create(null),e,t):t}function hc(e,t){return e?ue(e)&&ue(t)?[...new Set([...e,...t])]:Je(Object.create(null),_a(e),_a(t??{})):t}function ag(e,t){if(!e)return t;if(!t)return e;const s=Je(Object.create(null),e);for(const n in t)s[n]=lt(e[n],t[n]);return s}function cf(){return{app:null,config:{isNativeTag:Jp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let lg=0;function cg(e,t){return function(n,r=null){he(n)||(n=Je({},n)),r!=null&&!Me(r)&&(r=null);const o=cf(),i=new WeakSet,a=[];let l=!1;const u=o.app={_uid:lg++,_component:n,_props:r,_container:null,_context:o,_instance:null,version:Ug,get config(){return o.config},set config(c){},use(c,...d){return i.has(c)||(c&&he(c.install)?(i.add(c),c.install(u,...d)):he(c)&&(i.add(c),c(u,...d))),u},mixin(c){return o.mixins.includes(c)||o.mixins.push(c),u},component(c,d){return d?(o.components[c]=d,u):o.components[c]},directive(c,d){return d?(o.directives[c]=d,u):o.directives[c]},mount(c,d,f){if(!l){const h=u._ceVNode||v(n,r);return h.appContext=o,f===!0?f="svg":f===!1&&(f=void 0),e(h,c,f),l=!0,u._container=c,c.__vue_app__=u,ui(h.component)}},onUnmount(c){a.push(c)},unmount(){l&&(Bt(a,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(c,d){return o.provides[c]=d,u},runWithContext(c){const d=Vn;Vn=u;try{return c()}finally{Vn=d}}};return u}}let Vn=null;function qn(e,t){if(st){let s=st.provides;const n=st.parent&&st.parent.provides;n===s&&(s=st.provides=Object.create(n)),s[e]=t}}function Ct(e,t,s=!1){const n=st||et;if(n||Vn){const r=Vn?Vn._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return s&&he(t)?t.call(n&&n.proxy):t}}const uf={},df=()=>Object.create(uf),ff=e=>Object.getPrototypeOf(e)===uf;function ug(e,t,s,n=!1){const r={},o=df();e.propsDefaults=Object.create(null),hf(e,t,r,o);for(const i in e.propsOptions[0])i in r||(r[i]=void 0);s?e.props=n?r:Bd(r):e.type.props?e.props=r:e.props=o,e.attrs=o}function dg(e,t,s,n){const{props:r,attrs:o,vnode:{patchFlag:i}}=e,a=Ce(r),[l]=e.propsOptions;let u=!1;if((n||i>0)&&!(i&16)){if(i&8){const c=e.vnode.dynamicProps;for(let d=0;d<c.length;d++){let f=c[d];if(li(e.emitsOptions,f))continue;const h=t[f];if(l)if(Oe(o,f))h!==o[f]&&(o[f]=h,u=!0);else{const m=gt(f);r[m]=xa(l,a,m,h,e,!1)}else h!==o[f]&&(o[f]=h,u=!0)}}}else{hf(e,t,r,o)&&(u=!0);let c;for(const d in a)(!t||!Oe(t,d)&&((c=Ws(d))===d||!Oe(t,c)))&&(l?s&&(s[d]!==void 0||s[c]!==void 0)&&(r[d]=xa(l,a,d,void 0,e,!0)):delete r[d]);if(o!==a)for(const d in o)(!t||!Oe(t,d))&&(delete o[d],u=!0)}u&&gs(e.attrs,"set","")}function hf(e,t,s,n){const[r,o]=e.propsOptions;let i=!1,a;if(t)for(let l in t){if(yr(l))continue;const u=t[l];let c;r&&Oe(r,c=gt(l))?!o||!o.includes(c)?s[c]=u:(a||(a={}))[c]=u:li(e.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,i=!0)}if(o){const l=Ce(s),u=a||Re;for(let c=0;c<o.length;c++){const d=o[c];s[d]=xa(r,l,d,u[d],e,!Oe(u,d))}}return i}function xa(e,t,s,n,r,o){const i=e[s];if(i!=null){const a=Oe(i,"default");if(a&&n===void 0){const l=i.default;if(i.type!==Function&&!i.skipFactory&&he(l)){const{propsDefaults:u}=r;if(s in u)n=u[s];else{const c=Hr(r);n=u[s]=l.call(null,t),c()}}else n=l;r.ce&&r.ce._setProp(s,n)}i[0]&&(o&&!a?n=!1:i[1]&&(n===""||n===Ws(s))&&(n=!0))}return n}const fg=new WeakMap;function pf(e,t,s=!1){const n=s?fg:t.propsCache,r=n.get(e);if(r)return r;const o=e.props,i={},a=[];let l=!1;if(!he(e)){const c=d=>{l=!0;const[f,h]=pf(d,t,!0);Je(i,f),h&&a.push(...h)};!s&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!o&&!l)return Me(e)&&n.set(e,Bn),Bn;if(ue(o))for(let c=0;c<o.length;c++){const d=gt(o[c]);pc(d)&&(i[d]=Re)}else if(o)for(const c in o){const d=gt(c);if(pc(d)){const f=o[c],h=i[d]=ue(f)||he(f)?{type:f}:Je({},f),m=h.type;let g=!1,b=!0;if(ue(m))for(let C=0;C<m.length;++C){const E=m[C],P=he(E)&&E.name;if(P==="Boolean"){g=!0;break}else P==="String"&&(b=!1)}else g=he(m)&&m.name==="Boolean";h[0]=g,h[1]=b,(g||Oe(h,"default"))&&a.push(d)}}const u=[i,a];return Me(e)&&n.set(e,u),u}function pc(e){return e[0]!=="$"&&!yr(e)}const mf=e=>e[0]==="_"||e==="$stable",gl=e=>ue(e)?e.map(Yt):[Yt(e)],hg=(e,t,s)=>{if(t._n)return t;const n=k((...r)=>gl(t(...r)),s);return n._c=!1,n},gf=(e,t,s)=>{const n=e._ctx;for(const r in e){if(mf(r))continue;const o=e[r];if(he(o))t[r]=hg(r,o,n);else if(o!=null){const i=gl(o);t[r]=()=>i}}},yf=(e,t)=>{const s=gl(t);e.slots.default=()=>s},vf=(e,t,s)=>{for(const n in t)(s||n!=="_")&&(e[n]=t[n])},pg=(e,t,s)=>{const n=e.slots=df();if(e.vnode.shapeFlag&32){const r=t._;r?(vf(n,t,s),s&&pd(n,"_",r,!0)):gf(t,n)}else t&&yf(e,t)},mg=(e,t,s)=>{const{vnode:n,slots:r}=e;let o=!0,i=Re;if(n.shapeFlag&32){const a=t._;a?s&&a===1?o=!1:vf(r,t,s):(o=!t.$stable,gf(t,r)),i=t}else t&&(yf(e,t),i={default:1});if(o)for(const a in r)!mf(a)&&i[a]==null&&delete r[a]},ct=Pg;function gg(e){return yg(e)}function yg(e,t){const s=Qo();s.__VUE__=!0;const{insert:n,remove:r,patchProp:o,createElement:i,createText:a,createComment:l,setText:u,setElementText:c,parentNode:d,nextSibling:f,setScopeId:h=Xt,insertStaticContent:m}=e,g=(y,_,T,B=null,N=null,M=null,X=void 0,J=null,G=!!_.dynamicChildren)=>{if(y===_)return;y&&!Rn(y,_)&&(B=R(y),Xe(y,N,M,!0),y=null),_.patchFlag===-2&&(G=!1,_.dynamicChildren=null);const{type:U,ref:fe,shapeFlag:Z}=_;switch(U){case ci:b(y,_,T,B);break;case ns:C(y,_,T,B);break;case Co:y==null&&E(_,T,B,X);break;case _e:j(y,_,T,B,N,M,X,J,G);break;default:Z&1?D(y,_,T,B,N,M,X,J,G):Z&6?ie(y,_,T,B,N,M,X,J,G):(Z&64||Z&128)&&U.process(y,_,T,B,N,M,X,J,G,oe)}fe!=null&&N&&jo(fe,y&&y.ref,M,_||y,!_)},b=(y,_,T,B)=>{if(y==null)n(_.el=a(_.children),T,B);else{const N=_.el=y.el;_.children!==y.children&&u(N,_.children)}},C=(y,_,T,B)=>{y==null?n(_.el=l(_.children||""),T,B):_.el=y.el},E=(y,_,T,B)=>{[y.el,y.anchor]=m(y.children,_,T,B,y.el,y.anchor)},P=({el:y,anchor:_},T,B)=>{let N;for(;y&&y!==_;)N=f(y),n(y,T,B),y=N;n(_,T,B)},S=({el:y,anchor:_})=>{let T;for(;y&&y!==_;)T=f(y),r(y),y=T;r(_)},D=(y,_,T,B,N,M,X,J,G)=>{_.type==="svg"?X="svg":_.type==="math"&&(X="mathml"),y==null?W(_,T,B,N,M,X,J,G):A(y,_,N,M,X,J,G)},W=(y,_,T,B,N,M,X,J)=>{let G,U;const{props:fe,shapeFlag:Z,transition:le,dirs:pe}=y;if(G=y.el=i(y.type,M,fe&&fe.is,fe),Z&8?c(G,y.children):Z&16&&O(y.children,G,null,B,N,Mi(y,M),X,J),pe&&sn(y,null,B,"created"),I(G,y,y.scopeId,X,B),fe){for(const De in fe)De!=="value"&&!yr(De)&&o(G,De,null,fe[De],M,B);"value"in fe&&o(G,"value",null,fe.value,M),(U=fe.onVnodeBeforeMount)&&Kt(U,B,y)}pe&&sn(y,null,B,"beforeMount");const ke=vg(N,le);ke&&le.beforeEnter(G),n(G,_,T),((U=fe&&fe.onVnodeMounted)||ke||pe)&&ct(()=>{U&&Kt(U,B,y),ke&&le.enter(G),pe&&sn(y,null,B,"mounted")},N)},I=(y,_,T,B,N)=>{if(T&&h(y,T),B)for(let M=0;M<B.length;M++)h(y,B[M]);if(N){let M=N.subTree;if(_===M||kf(M.type)&&(M.ssContent===_||M.ssFallback===_)){const X=N.vnode;I(y,X,X.scopeId,X.slotScopeIds,N.parent)}}},O=(y,_,T,B,N,M,X,J,G=0)=>{for(let U=G;U<y.length;U++){const fe=y[U]=J?Ls(y[U]):Yt(y[U]);g(null,fe,_,T,B,N,M,X,J)}},A=(y,_,T,B,N,M,X)=>{const J=_.el=y.el;let{patchFlag:G,dynamicChildren:U,dirs:fe}=_;G|=y.patchFlag&16;const Z=y.props||Re,le=_.props||Re;let pe;if(T&&nn(T,!1),(pe=le.onVnodeBeforeUpdate)&&Kt(pe,T,_,y),fe&&sn(_,y,T,"beforeUpdate"),T&&nn(T,!0),(Z.innerHTML&&le.innerHTML==null||Z.textContent&&le.textContent==null)&&c(J,""),U?F(y.dynamicChildren,U,J,T,B,Mi(_,N),M):X||z(y,_,J,null,T,B,Mi(_,N),M,!1),G>0){if(G&16)q(J,Z,le,T,N);else if(G&2&&Z.class!==le.class&&o(J,"class",null,le.class,N),G&4&&o(J,"style",Z.style,le.style,N),G&8){const ke=_.dynamicProps;for(let De=0;De<ke.length;De++){const Ie=ke[De],yt=Z[Ie],ht=le[Ie];(ht!==yt||Ie==="value")&&o(J,Ie,yt,ht,N,T)}}G&1&&y.children!==_.children&&c(J,_.children)}else!X&&U==null&&q(J,Z,le,T,N);((pe=le.onVnodeUpdated)||fe)&&ct(()=>{pe&&Kt(pe,T,_,y),fe&&sn(_,y,T,"updated")},B)},F=(y,_,T,B,N,M,X)=>{for(let J=0;J<_.length;J++){const G=y[J],U=_[J],fe=G.el&&(G.type===_e||!Rn(G,U)||G.shapeFlag&70)?d(G.el):T;g(G,U,fe,null,B,N,M,X,!0)}},q=(y,_,T,B,N)=>{if(_!==T){if(_!==Re)for(const M in _)!yr(M)&&!(M in T)&&o(y,M,_[M],null,N,B);for(const M in T){if(yr(M))continue;const X=T[M],J=_[M];X!==J&&M!=="value"&&o(y,M,J,X,N,B)}"value"in T&&o(y,"value",_.value,T.value,N)}},j=(y,_,T,B,N,M,X,J,G)=>{const U=_.el=y?y.el:a(""),fe=_.anchor=y?y.anchor:a("");let{patchFlag:Z,dynamicChildren:le,slotScopeIds:pe}=_;pe&&(J=J?J.concat(pe):pe),y==null?(n(U,T,B),n(fe,T,B),O(_.children||[],T,fe,N,M,X,J,G)):Z>0&&Z&64&&le&&y.dynamicChildren?(F(y.dynamicChildren,le,T,N,M,X,J),(_.key!=null||N&&_===N.subTree)&&yl(y,_,!0)):z(y,_,T,fe,N,M,X,J,G)},ie=(y,_,T,B,N,M,X,J,G)=>{_.slotScopeIds=J,y==null?_.shapeFlag&512?N.ctx.activate(_,T,B,X,G):de(_,T,B,N,M,X,G):ye(y,_,G)},de=(y,_,T,B,N,M,X)=>{const J=y.component=Dg(y,B,N);if(Qd(y)&&(J.ctx.renderer=oe),Lg(J,!1,X),J.asyncDep){if(N&&N.registerDep(J,me,X),!y.el){const G=J.subTree=v(ns);C(null,G,_,T)}}else me(J,y,_,T,N,M,X)},ye=(y,_,T)=>{const B=_.component=y.component;if(Ag(y,_,T))if(B.asyncDep&&!B.asyncResolved){ae(B,_,T);return}else B.next=_,B.update();else _.el=y.el,B.vnode=_},me=(y,_,T,B,N,M,X)=>{const J=()=>{if(y.isMounted){let{next:Z,bu:le,u:pe,parent:ke,vnode:De}=y;{const zt=_f(y);if(zt){Z&&(Z.el=De.el,ae(y,Z,X)),zt.asyncDep.then(()=>{y.isUnmounted||J()});return}}let Ie=Z,yt;nn(y,!1),Z?(Z.el=De.el,ae(y,Z,X)):Z=De,le&&xo(le),(yt=Z.props&&Z.props.onVnodeBeforeUpdate)&&Kt(yt,ke,Z,De),nn(y,!0);const ht=gc(y),qt=y.subTree;y.subTree=ht,g(qt,ht,d(qt.el),R(qt),y,N,M),Z.el=ht.el,Ie===null&&Tg(y,ht.el),pe&&ct(pe,N),(yt=Z.props&&Z.props.onVnodeUpdated)&&ct(()=>Kt(yt,ke,Z,De),N)}else{let Z;const{el:le,props:pe}=_,{bm:ke,m:De,parent:Ie,root:yt,type:ht}=y,qt=Un(_);nn(y,!1),ke&&xo(ke),!qt&&(Z=pe&&pe.onVnodeBeforeMount)&&Kt(Z,Ie,_),nn(y,!0);{yt.ce&&yt.ce._injectChildStyle(ht);const zt=y.subTree=gc(y);g(null,zt,T,B,y,N,M),_.el=zt.el}if(De&&ct(De,N),!qt&&(Z=pe&&pe.onVnodeMounted)){const zt=_;ct(()=>Kt(Z,Ie,zt),N)}(_.shapeFlag&256||Ie&&Un(Ie.vnode)&&Ie.vnode.shapeFlag&256)&&y.a&&ct(y.a,N),y.isMounted=!0,_=T=B=null}};y.scope.on();const G=y.effect=new wd(J);y.scope.off();const U=y.update=G.run.bind(G),fe=y.job=G.runIfDirty.bind(G);fe.i=y,fe.id=y.uid,G.scheduler=()=>hl(fe),nn(y,!0),U()},ae=(y,_,T)=>{_.component=y;const B=y.vnode.props;y.vnode=_,y.next=null,dg(y,_.props,B,T),mg(y,_.children,T),Gs(),oc(y),Js()},z=(y,_,T,B,N,M,X,J,G=!1)=>{const U=y&&y.children,fe=y?y.shapeFlag:0,Z=_.children,{patchFlag:le,shapeFlag:pe}=_;if(le>0){if(le&128){He(U,Z,T,B,N,M,X,J,G);return}else if(le&256){Fe(U,Z,T,B,N,M,X,J,G);return}}pe&8?(fe&16&&at(U,N,M),Z!==U&&c(T,Z)):fe&16?pe&16?He(U,Z,T,B,N,M,X,J,G):at(U,N,M,!0):(fe&8&&c(T,""),pe&16&&O(Z,T,B,N,M,X,J,G))},Fe=(y,_,T,B,N,M,X,J,G)=>{y=y||Bn,_=_||Bn;const U=y.length,fe=_.length,Z=Math.min(U,fe);let le;for(le=0;le<Z;le++){const pe=_[le]=G?Ls(_[le]):Yt(_[le]);g(y[le],pe,T,null,N,M,X,J,G)}U>fe?at(y,N,M,!0,!1,Z):O(_,T,B,N,M,X,J,G,Z)},He=(y,_,T,B,N,M,X,J,G)=>{let U=0;const fe=_.length;let Z=y.length-1,le=fe-1;for(;U<=Z&&U<=le;){const pe=y[U],ke=_[U]=G?Ls(_[U]):Yt(_[U]);if(Rn(pe,ke))g(pe,ke,T,null,N,M,X,J,G);else break;U++}for(;U<=Z&&U<=le;){const pe=y[Z],ke=_[le]=G?Ls(_[le]):Yt(_[le]);if(Rn(pe,ke))g(pe,ke,T,null,N,M,X,J,G);else break;Z--,le--}if(U>Z){if(U<=le){const pe=le+1,ke=pe<fe?_[pe].el:B;for(;U<=le;)g(null,_[U]=G?Ls(_[U]):Yt(_[U]),T,ke,N,M,X,J,G),U++}}else if(U>le)for(;U<=Z;)Xe(y[U],N,M,!0),U++;else{const pe=U,ke=U,De=new Map;for(U=ke;U<=le;U++){const vt=_[U]=G?Ls(_[U]):Yt(_[U]);vt.key!=null&&De.set(vt.key,U)}let Ie,yt=0;const ht=le-ke+1;let qt=!1,zt=0;const or=new Array(ht);for(U=0;U<ht;U++)or[U]=0;for(U=pe;U<=Z;U++){const vt=y[U];if(yt>=ht){Xe(vt,N,M,!0);continue}let Ht;if(vt.key!=null)Ht=De.get(vt.key);else for(Ie=ke;Ie<=le;Ie++)if(or[Ie-ke]===0&&Rn(vt,_[Ie])){Ht=Ie;break}Ht===void 0?Xe(vt,N,M,!0):(or[Ht-ke]=U+1,Ht>=zt?zt=Ht:qt=!0,g(vt,_[Ht],T,null,N,M,X,J,G),yt++)}const ec=qt?_g(or):Bn;for(Ie=ec.length-1,U=ht-1;U>=0;U--){const vt=ke+U,Ht=_[vt],tc=vt+1<fe?_[vt+1].el:B;or[U]===0?g(null,Ht,T,tc,N,M,X,J,G):qt&&(Ie<0||U!==ec[Ie]?it(Ht,T,tc,2):Ie--)}}},it=(y,_,T,B,N=null)=>{const{el:M,type:X,transition:J,children:G,shapeFlag:U}=y;if(U&6){it(y.component.subTree,_,T,B);return}if(U&128){y.suspense.move(_,T,B);return}if(U&64){X.move(y,_,T,oe);return}if(X===_e){n(M,_,T);for(let Z=0;Z<G.length;Z++)it(G[Z],_,T,B);n(y.anchor,_,T);return}if(X===Co){P(y,_,T);return}if(B!==2&&U&1&&J)if(B===0)J.beforeEnter(M),n(M,_,T),ct(()=>J.enter(M),N);else{const{leave:Z,delayLeave:le,afterLeave:pe}=J,ke=()=>n(M,_,T),De=()=>{Z(M,()=>{ke(),pe&&pe()})};le?le(M,ke,De):De()}else n(M,_,T)},Xe=(y,_,T,B=!1,N=!1)=>{const{type:M,props:X,ref:J,children:G,dynamicChildren:U,shapeFlag:fe,patchFlag:Z,dirs:le,cacheIndex:pe}=y;if(Z===-2&&(N=!1),J!=null&&jo(J,null,T,y,!0),pe!=null&&(_.renderCache[pe]=void 0),fe&256){_.ctx.deactivate(y);return}const ke=fe&1&&le,De=!Un(y);let Ie;if(De&&(Ie=X&&X.onVnodeBeforeUnmount)&&Kt(Ie,_,y),fe&6)cs(y.component,T,B);else{if(fe&128){y.suspense.unmount(T,B);return}ke&&sn(y,null,_,"beforeUnmount"),fe&64?y.type.remove(y,_,T,oe,B):U&&!U.hasOnce&&(M!==_e||Z>0&&Z&64)?at(U,_,T,!1,!0):(M===_e&&Z&384||!N&&fe&16)&&at(G,_,T),B&&Ve(y)}(De&&(Ie=X&&X.onVnodeUnmounted)||ke)&&ct(()=>{Ie&&Kt(Ie,_,y),ke&&sn(y,null,_,"unmounted")},T)},Ve=y=>{const{type:_,el:T,anchor:B,transition:N}=y;if(_===_e){Ke(T,B);return}if(_===Co){S(y);return}const M=()=>{r(T),N&&!N.persisted&&N.afterLeave&&N.afterLeave()};if(y.shapeFlag&1&&N&&!N.persisted){const{leave:X,delayLeave:J}=N,G=()=>X(T,M);J?J(y.el,M,G):G()}else M()},Ke=(y,_)=>{let T;for(;y!==_;)T=f(y),r(y),y=T;r(_)},cs=(y,_,T)=>{const{bum:B,scope:N,job:M,subTree:X,um:J,m:G,a:U}=y;mc(G),mc(U),B&&xo(B),N.stop(),M&&(M.flags|=8,Xe(X,y,_,T)),J&&ct(J,_),ct(()=>{y.isUnmounted=!0},_),_&&_.pendingBranch&&!_.isUnmounted&&y.asyncDep&&!y.asyncResolved&&y.suspenseId===_.pendingId&&(_.deps--,_.deps===0&&_.resolve())},at=(y,_,T,B=!1,N=!1,M=0)=>{for(let X=M;X<y.length;X++)Xe(y[X],_,T,B,N)},R=y=>{if(y.shapeFlag&6)return R(y.component.subTree);if(y.shapeFlag&128)return y.suspense.next();const _=f(y.anchor||y.el),T=_&&_[Wd];return T?f(T):_};let Q=!1;const Y=(y,_,T)=>{y==null?_._vnode&&Xe(_._vnode,null,null,!0):g(_._vnode||null,y,_,null,null,null,T),_._vnode=y,Q||(Q=!0,oc(),zd(),Q=!1)},oe={p:g,um:Xe,m:it,r:Ve,mt:de,mc:O,pc:z,pbc:F,n:R,o:e};return{render:Y,hydrate:void 0,createApp:cg(Y)}}function Mi({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function nn({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function vg(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function yl(e,t,s=!1){const n=e.children,r=t.children;if(ue(n)&&ue(r))for(let o=0;o<n.length;o++){const i=n[o];let a=r[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[o]=Ls(r[o]),a.el=i.el),!s&&a.patchFlag!==-2&&yl(i,a)),a.type===ci&&(a.el=i.el)}}function _g(e){const t=e.slice(),s=[0];let n,r,o,i,a;const l=e.length;for(n=0;n<l;n++){const u=e[n];if(u!==0){if(r=s[s.length-1],e[r]<u){t[n]=r,s.push(n);continue}for(o=0,i=s.length-1;o<i;)a=o+i>>1,e[s[a]]<u?o=a+1:i=a;u<e[s[o]]&&(o>0&&(t[n]=s[o-1]),s[o]=n)}}for(o=s.length,i=s[o-1];o-- >0;)s[o]=i,i=t[i];return s}function _f(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:_f(t)}function mc(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const bg=Symbol.for("v-scx"),wg=()=>Ct(bg);function ss(e,t){return ai(e,null,t)}function bf(e,t){return ai(e,null,{flush:"post"})}function Ue(e,t,s){return ai(e,t,s)}function ai(e,t,s=Re){const{immediate:n,deep:r,flush:o,once:i}=s,a=Je({},s),l=t&&n||!t&&o!=="post";let u;if(Lr){if(o==="sync"){const h=wg();u=h.__watcherHandles||(h.__watcherHandles=[])}else if(!l){const h=()=>{};return h.stop=Xt,h.resume=Xt,h.pause=Xt,h}}const c=st;a.call=(h,m,g)=>Bt(h,c,m,g);let d=!1;o==="post"?a.scheduler=h=>{ct(h,c&&c.suspense)}:o!=="sync"&&(d=!0,a.scheduler=(h,m)=>{m?h():hl(h)}),a.augmentJob=h=>{t&&(h.flags|=4),d&&(h.flags|=2,c&&(h.id=c.uid,h.i=c))};const f=jm(e,t,a);return Lr&&(u?u.push(f):l&&f()),f}function xg(e,t,s){const n=this.proxy,r=Ne(e)?e.includes(".")?wf(n,e):()=>n[e]:e.bind(n,n);let o;he(t)?o=t:(o=t.handler,s=t);const i=Hr(this),a=ai(r,o.bind(n),s);return i(),a}function wf(e,t){const s=t.split(".");return()=>{let n=e;for(let r=0;r<s.length&&n;r++)n=n[s[r]];return n}}const kg=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${gt(t)}Modifiers`]||e[`${Ws(t)}Modifiers`];function Cg(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||Re;let r=s;const o=t.startsWith("update:"),i=o&&kg(n,t.slice(7));i&&(i.trim&&(r=s.map(c=>Ne(c)?c.trim():c)),i.number&&(r=s.map(da)));let a,l=n[a=vr(t)]||n[a=vr(gt(t))];!l&&o&&(l=n[a=vr(Ws(t))]),l&&Bt(l,e,6,r);const u=n[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Bt(u,e,6,r)}}function xf(e,t,s=!1){const n=t.emitsCache,r=n.get(e);if(r!==void 0)return r;const o=e.emits;let i={},a=!1;if(!he(e)){const l=u=>{const c=xf(u,t,!0);c&&(a=!0,Je(i,c))};!s&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!o&&!a?(Me(e)&&n.set(e,null),null):(ue(o)?o.forEach(l=>i[l]=null):Je(i,o),Me(e)&&n.set(e,i),i)}function li(e,t){return!e||!Go(t)?!1:(t=t.slice(2).replace(/Once$/,""),Oe(e,t[0].toLowerCase()+t.slice(1))||Oe(e,Ws(t))||Oe(e,t))}function gc(e){const{type:t,vnode:s,proxy:n,withProxy:r,propsOptions:[o],slots:i,attrs:a,emit:l,render:u,renderCache:c,props:d,data:f,setupState:h,ctx:m,inheritAttrs:g}=e,b=Lo(e);let C,E;try{if(s.shapeFlag&4){const S=r||n,D=S;C=Yt(u.call(D,S,c,d,h,f,m)),E=a}else{const S=t;C=Yt(S.length>1?S(d,{attrs:a,slots:i,emit:l}):S(d,null)),E=t.props?a:Sg(a)}}catch(S){kr.length=0,ri(S,e,1),C=v(ns)}let P=C;if(E&&g!==!1){const S=Object.keys(E),{shapeFlag:D}=P;S.length&&D&7&&(o&&S.some(rl)&&(E=Eg(E,o)),P=Vs(P,E,!1,!0))}return s.dirs&&(P=Vs(P,null,!1,!0),P.dirs=P.dirs?P.dirs.concat(s.dirs):s.dirs),s.transition&&Rr(P,s.transition),C=P,Lo(b),C}const Sg=e=>{let t;for(const s in e)(s==="class"||s==="style"||Go(s))&&((t||(t={}))[s]=e[s]);return t},Eg=(e,t)=>{const s={};for(const n in e)(!rl(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function Ag(e,t,s){const{props:n,children:r,component:o}=e,{props:i,children:a,patchFlag:l}=t,u=o.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return n?yc(n,i,u):!!i;if(l&8){const c=t.dynamicProps;for(let d=0;d<c.length;d++){const f=c[d];if(i[f]!==n[f]&&!li(u,f))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:n===i?!1:n?i?yc(n,i,u):!0:!!i;return!1}function yc(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let r=0;r<n.length;r++){const o=n[r];if(t[o]!==e[o]&&!li(s,o))return!0}return!1}function Tg({vnode:e,parent:t},s){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=s,t=t.parent;else break}}const kf=e=>e.__isSuspense;function Pg(e,t){t&&t.pendingBranch?ue(e)?t.effects.push(...e):t.effects.push(e):Nm(e)}const _e=Symbol.for("v-fgt"),ci=Symbol.for("v-txt"),ns=Symbol.for("v-cmt"),Co=Symbol.for("v-stc"),kr=[];let kt=null;function w(e=!1){kr.push(kt=e?null:[])}function Og(){kr.pop(),kt=kr[kr.length-1]||null}let $r=1;function vc(e,t=!1){$r+=e,e<0&&kt&&t&&(kt.hasOnce=!0)}function Cf(e){return e.dynamicChildren=$r>0?kt||Bn:null,Og(),$r>0&&kt&&kt.push(e),e}function $(e,t,s,n,r,o){return Cf(p(e,t,s,n,r,o,!0))}function K(e,t,s,n,r){return Cf(v(e,t,s,n,r,!0))}function Dr(e){return e?e.__v_isVNode===!0:!1}function Rn(e,t){return e.type===t.type&&e.key===t.key}const Sf=({key:e})=>e??null,So=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?Ne(e)||ze(e)||he(e)?{i:et,r:e,k:t,f:!!s}:e:null);function p(e,t=null,s=null,n=0,r=null,o=e===_e?0:1,i=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Sf(t),ref:t&&So(t),scopeId:Kd,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:et};return a?(_l(l,s),o&128&&e.normalize(l)):s&&(l.shapeFlag|=Ne(s)?8:16),$r>0&&!i&&kt&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&kt.push(l),l}const v=Ig;function Ig(e,t=null,s=null,n=0,r=null,o=!1){if((!e||e===sf)&&(e=ns),Dr(e)){const a=Vs(e,t,!0);return s&&_l(a,s),$r>0&&!o&&kt&&(a.shapeFlag&6?kt[kt.indexOf(e)]=a:kt.push(a)),a.patchFlag=-2,a}if(Fg(e)&&(e=e.__vccOpts),t){t=Ss(t);let{class:a,style:l}=t;a&&!Ne(a)&&(t.class=ge(a)),Me(l)&&(fl(l)&&!ue(l)&&(l=Je({},l)),t.style=Ut(l))}const i=Ne(e)?1:kf(e)?128:Fm(e)?64:Me(e)?4:he(e)?2:0;return p(e,t,s,n,r,i,o,!0)}function Ss(e){return e?fl(e)||ff(e)?Je({},e):e:null}function Vs(e,t,s=!1,n=!1){const{props:r,ref:o,patchFlag:i,children:a,transition:l}=e,u=t?Se(r||{},t):r,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Sf(u),ref:t&&t.ref?s&&o?ue(o)?o.concat(So(t)):[o,So(t)]:So(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==_e?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Vs(e.ssContent),ssFallback:e.ssFallback&&Vs(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&n&&Rr(c,l.clone(c)),c}function H(e=" ",t=0){return v(ci,null,e,t)}function vl(e,t){const s=v(Co,null,e);return s.staticCount=t,s}function Ee(e="",t=!1){return t?(w(),K(ns,null,e)):v(ns,null,e)}function Yt(e){return e==null||typeof e=="boolean"?v(ns):ue(e)?v(_e,null,e.slice()):Dr(e)?Ls(e):v(ci,null,String(e))}function Ls(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Vs(e)}function _l(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(ue(t))s=16;else if(typeof t=="object")if(n&65){const r=t.default;r&&(r._c&&(r._d=!1),_l(e,r()),r._c&&(r._d=!0));return}else{s=32;const r=t._;!r&&!ff(t)?t._ctx=et:r===3&&et&&(et.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else he(t)?(t={default:t,_ctx:et},s=32):(t=String(t),n&64?(s=16,t=[H(t)]):s=8);e.children=t,e.shapeFlag|=s}function Se(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const r in n)if(r==="class")t.class!==n.class&&(t.class=ge([t.class,n.class]));else if(r==="style")t.style=Ut([t.style,n.style]);else if(Go(r)){const o=t[r],i=n[r];i&&o!==i&&!(ue(o)&&o.includes(i))&&(t[r]=o?[].concat(o,i):i)}else r!==""&&(t[r]=n[r])}return t}function Kt(e,t,s,n=null){Bt(e,t,7,[s,n])}const Rg=cf();let $g=0;function Dg(e,t,s){const n=e.type,r=(t?t.appContext:e.appContext)||Rg,o={uid:$g++,vnode:e,type:n,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new vd(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:pf(n,r),emitsOptions:xf(n,r),emit:null,emitted:null,propsDefaults:Re,inheritAttrs:n.inheritAttrs,ctx:Re,data:Re,props:Re,attrs:Re,slots:Re,refs:Re,setupState:Re,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=Cg.bind(null,o),e.ce&&e.ce(o),o}let st=null;const as=()=>st||et;let Mo,ka;{const e=Qo(),t=(s,n)=>{let r;return(r=e[s])||(r=e[s]=[]),r.push(n),o=>{r.length>1?r.forEach(i=>i(o)):r[0](o)}};Mo=t("__VUE_INSTANCE_SETTERS__",s=>st=s),ka=t("__VUE_SSR_SETTERS__",s=>Lr=s)}const Hr=e=>{const t=st;return Mo(e),e.scope.on(),()=>{e.scope.off(),Mo(t)}},_c=()=>{st&&st.scope.off(),Mo(null)};function Ef(e){return e.vnode.shapeFlag&4}let Lr=!1;function Lg(e,t=!1,s=!1){t&&ka(t);const{props:n,children:r}=e.vnode,o=Ef(e);ug(e,n,o,t),pg(e,r,s);const i=o?jg(e,t):void 0;return t&&ka(!1),i}function jg(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,sg);const{setup:n}=s;if(n){Gs();const r=e.setupContext=n.length>1?Mg(e):null,o=Hr(e),i=zr(n,e,0,[e.props,r]),a=dd(i);if(Js(),o(),(a||e.sp)&&!Un(e)&&Xd(e),a){if(i.then(_c,_c),t)return i.then(l=>{bc(e,l)}).catch(l=>{ri(l,e,0)});e.asyncDep=i}else bc(e,i)}else Af(e)}function bc(e,t,s){he(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Me(t)&&(e.setupState=Fd(t)),Af(e)}function Af(e,t,s){const n=e.type;e.render||(e.render=n.render||Xt);{const r=Hr(e);Gs();try{ng(e)}finally{Js(),r()}}}const Bg={get(e,t){return rt(e,"get",""),e[t]}};function Mg(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,Bg),slots:e.slots,emit:e.emit,expose:t}}function ui(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Fd(Md(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in xr)return xr[s](e)},has(t,s){return s in t||s in xr}})):e.proxy}function Ng(e,t=!0){return he(e)?e.displayName||e.name:e.name||t&&e.__name}function Fg(e){return he(e)&&"__vccOpts"in e}const ne=(e,t)=>Dm(e,t,Lr);function jt(e,t,s){const n=arguments.length;return n===2?Me(t)&&!ue(t)?Dr(t)?v(e,null,[t]):v(e,t):v(e,null,t):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&Dr(s)&&(s=[s]),v(e,t,s))}const Ug="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ca;const wc=typeof window<"u"&&window.trustedTypes;if(wc)try{Ca=wc.createPolicy("vue",{createHTML:e=>e})}catch{}const Tf=Ca?e=>Ca.createHTML(e):e=>e,Vg="http://www.w3.org/2000/svg",qg="http://www.w3.org/1998/Math/MathML",ps=typeof document<"u"?document:null,xc=ps&&ps.createElement("template"),zg={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const r=t==="svg"?ps.createElementNS(Vg,e):t==="mathml"?ps.createElementNS(qg,e):s?ps.createElement(e,{is:s}):ps.createElement(e);return e==="select"&&n&&n.multiple!=null&&r.setAttribute("multiple",n.multiple),r},createText:e=>ps.createTextNode(e),createComment:e=>ps.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ps.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,r,o){const i=s?s.previousSibling:t.lastChild;if(r&&(r===o||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),s),!(r===o||!(r=r.nextSibling)););else{xc.innerHTML=Tf(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const a=xc.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,s)}return[i?i.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},As="transition",ar="animation",Kn=Symbol("_vtc"),Pf={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Hg=Je({},zm,Pf),rn=(e,t=[])=>{ue(e)?e.forEach(s=>s(...t)):e&&e(...t)},kc=e=>e?ue(e)?e.some(t=>t.length>1):e.length>1:!1;function Kg(e){const t={};for(const j in e)j in Pf||(t[j]=e[j]);if(e.css===!1)return t;const{name:s="v",type:n,duration:r,enterFromClass:o=`${s}-enter-from`,enterActiveClass:i=`${s}-enter-active`,enterToClass:a=`${s}-enter-to`,appearFromClass:l=o,appearActiveClass:u=i,appearToClass:c=a,leaveFromClass:d=`${s}-leave-from`,leaveActiveClass:f=`${s}-leave-active`,leaveToClass:h=`${s}-leave-to`}=e,m=Wg(r),g=m&&m[0],b=m&&m[1],{onBeforeEnter:C,onEnter:E,onEnterCancelled:P,onLeave:S,onLeaveCancelled:D,onBeforeAppear:W=C,onAppear:I=E,onAppearCancelled:O=P}=t,A=(j,ie,de,ye)=>{j._enterCancelled=ye,Os(j,ie?c:a),Os(j,ie?u:i),de&&de()},F=(j,ie)=>{j._isLeaving=!1,Os(j,d),Os(j,h),Os(j,f),ie&&ie()},q=j=>(ie,de)=>{const ye=j?I:E,me=()=>A(ie,j,de);rn(ye,[ie,me]),Cc(()=>{Os(ie,j?l:o),Wt(ie,j?c:a),kc(ye)||Sc(ie,n,g,me)})};return Je(t,{onBeforeEnter(j){rn(C,[j]),Wt(j,o),Wt(j,i)},onBeforeAppear(j){rn(W,[j]),Wt(j,l),Wt(j,u)},onEnter:q(!1),onAppear:q(!0),onLeave(j,ie){j._isLeaving=!0;const de=()=>F(j,ie);Wt(j,d),j._enterCancelled?(Wt(j,f),Sa()):(Sa(),Wt(j,f)),Cc(()=>{j._isLeaving&&(Os(j,d),Wt(j,h),kc(S)||Sc(j,n,b,de))}),rn(S,[j,de])},onEnterCancelled(j){A(j,!1,void 0,!0),rn(P,[j])},onAppearCancelled(j){A(j,!0,void 0,!0),rn(O,[j])},onLeaveCancelled(j){F(j),rn(D,[j])}})}function Wg(e){if(e==null)return null;if(Me(e))return[Ni(e.enter),Ni(e.leave)];{const t=Ni(e);return[t,t]}}function Ni(e){return em(e)}function Wt(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.add(s)),(e[Kn]||(e[Kn]=new Set)).add(t)}function Os(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.remove(n));const s=e[Kn];s&&(s.delete(t),s.size||(e[Kn]=void 0))}function Cc(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Gg=0;function Sc(e,t,s,n){const r=e._endId=++Gg,o=()=>{r===e._endId&&n()};if(s!=null)return setTimeout(o,s);const{type:i,timeout:a,propCount:l}=Of(e,t);if(!i)return n();const u=i+"end";let c=0;const d=()=>{e.removeEventListener(u,f),o()},f=h=>{h.target===e&&++c>=l&&d()};setTimeout(()=>{c<l&&d()},a+1),e.addEventListener(u,f)}function Of(e,t){const s=window.getComputedStyle(e),n=m=>(s[m]||"").split(", "),r=n(`${As}Delay`),o=n(`${As}Duration`),i=Ec(r,o),a=n(`${ar}Delay`),l=n(`${ar}Duration`),u=Ec(a,l);let c=null,d=0,f=0;t===As?i>0&&(c=As,d=i,f=o.length):t===ar?u>0&&(c=ar,d=u,f=l.length):(d=Math.max(i,u),c=d>0?i>u?As:ar:null,f=c?c===As?o.length:l.length:0);const h=c===As&&/\b(transform|all)(,|$)/.test(n(`${As}Property`).toString());return{type:c,timeout:d,propCount:f,hasTransform:h}}function Ec(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((s,n)=>Ac(s)+Ac(e[n])))}function Ac(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Sa(){return document.body.offsetHeight}function Jg(e,t,s){const n=e[Kn];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const No=Symbol("_vod"),If=Symbol("_vsh"),Yg={beforeMount(e,{value:t},{transition:s}){e[No]=e.style.display==="none"?"":e.style.display,s&&t?s.beforeEnter(e):lr(e,t)},mounted(e,{value:t},{transition:s}){s&&t&&s.enter(e)},updated(e,{value:t,oldValue:s},{transition:n}){!t!=!s&&(n?t?(n.beforeEnter(e),lr(e,!0),n.enter(e)):n.leave(e,()=>{lr(e,!1)}):lr(e,t))},beforeUnmount(e,{value:t}){lr(e,t)}};function lr(e,t){e.style.display=t?e[No]:"none",e[If]=!t}const Xg=Symbol(""),Qg=/(^|;)\s*display\s*:/;function Zg(e,t,s){const n=e.style,r=Ne(s);let o=!1;if(s&&!r){if(t)if(Ne(t))for(const i of t.split(";")){const a=i.slice(0,i.indexOf(":")).trim();s[a]==null&&Eo(n,a,"")}else for(const i in t)s[i]==null&&Eo(n,i,"");for(const i in s)i==="display"&&(o=!0),Eo(n,i,s[i])}else if(r){if(t!==s){const i=n[Xg];i&&(s+=";"+i),n.cssText=s,o=Qg.test(s)}}else t&&e.removeAttribute("style");No in e&&(e[No]=o?n.display:"",e[If]&&(n.display="none"))}const Tc=/\s*!important$/;function Eo(e,t,s){if(ue(s))s.forEach(n=>Eo(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=ey(e,t);Tc.test(s)?e.setProperty(Ws(n),s.replace(Tc,""),"important"):e[n]=s}}const Pc=["Webkit","Moz","ms"],Fi={};function ey(e,t){const s=Fi[t];if(s)return s;let n=gt(t);if(n!=="filter"&&n in e)return Fi[t]=n;n=Xo(n);for(let r=0;r<Pc.length;r++){const o=Pc[r]+n;if(o in e)return Fi[t]=o}return t}const Oc="http://www.w3.org/1999/xlink";function Ic(e,t,s,n,r,o=im(t)){n&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(Oc,t.slice(6,t.length)):e.setAttributeNS(Oc,t,s):s==null||o&&!md(s)?e.removeAttribute(t):e.setAttribute(t,o?"":ks(s)?String(s):s)}function Rc(e,t,s,n,r){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?Tf(s):s);return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){const a=o==="OPTION"?e.getAttribute("value")||"":e.value,l=s==null?e.type==="checkbox"?"on":"":String(s);(a!==l||!("_value"in e))&&(e.value=l),s==null&&e.removeAttribute(t),e._value=s;return}let i=!1;if(s===""||s==null){const a=typeof e[t];a==="boolean"?s=md(s):s==null&&a==="string"?(s="",i=!0):a==="number"&&(s=0,i=!0)}try{e[t]=s}catch{}i&&e.removeAttribute(r||t)}function $n(e,t,s,n){e.addEventListener(t,s,n)}function ty(e,t,s,n){e.removeEventListener(t,s,n)}const $c=Symbol("_vei");function sy(e,t,s,n,r=null){const o=e[$c]||(e[$c]={}),i=o[t];if(n&&i)i.value=n;else{const[a,l]=ny(t);if(n){const u=o[t]=iy(n,r);$n(e,a,u,l)}else i&&(ty(e,a,i,l),o[t]=void 0)}}const Dc=/(?:Once|Passive|Capture)$/;function ny(e){let t;if(Dc.test(e)){t={};let n;for(;n=e.match(Dc);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ws(e.slice(2)),t]}let Ui=0;const ry=Promise.resolve(),oy=()=>Ui||(ry.then(()=>Ui=0),Ui=Date.now());function iy(e,t){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;Bt(ay(n,s.value),t,5,[n])};return s.value=e,s.attached=oy(),s}function ay(e,t){if(ue(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>r=>!r._stopped&&n&&n(r))}else return t}const Lc=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,ly=(e,t,s,n,r,o)=>{const i=r==="svg";t==="class"?Jg(e,n,i):t==="style"?Zg(e,s,n):Go(t)?rl(t)||sy(e,t,s,n,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):cy(e,t,n,i))?(Rc(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Ic(e,t,n,i,o,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ne(n))?Rc(e,gt(t),n,o,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),Ic(e,t,n,i))};function cy(e,t,s,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&Lc(t)&&he(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Lc(t)&&Ne(s)?!1:t in e}const Rf=new WeakMap,$f=new WeakMap,Fo=Symbol("_moveCb"),jc=Symbol("_enterCb"),uy=e=>(delete e.props.mode,e),dy=uy({name:"TransitionGroup",props:Je({},Hg,{tag:String,moveClass:String}),setup(e,{slots:t}){const s=as(),n=qm();let r,o;return ef(()=>{if(!r.length)return;const i=e.moveClass||`${e.name||"v"}-move`;if(!gy(r[0].el,s.vnode.el,i))return;r.forEach(hy),r.forEach(py);const a=r.filter(my);Sa(),a.forEach(l=>{const u=l.el,c=u.style;Wt(u,i),c.transform=c.webkitTransform=c.transitionDuration="";const d=u[Fo]=f=>{f&&f.target!==u||(!f||/transform$/.test(f.propertyName))&&(u.removeEventListener("transitionend",d),u[Fo]=null,Os(u,i))};u.addEventListener("transitionend",d)})}),()=>{const i=Ce(e),a=Kg(i);let l=i.tag||_e;if(r=[],o)for(let u=0;u<o.length;u++){const c=o[u];c.el&&c.el instanceof Element&&(r.push(c),Rr(c,ya(c,a,n,s)),Rf.set(c,c.el.getBoundingClientRect()))}o=t.default?Yd(t.default()):[];for(let u=0;u<o.length;u++){const c=o[u];c.key!=null&&Rr(c,ya(c,a,n,s))}return v(l,null,o)}}}),fy=dy;function hy(e){const t=e.el;t[Fo]&&t[Fo](),t[jc]&&t[jc]()}function py(e){$f.set(e,e.el.getBoundingClientRect())}function my(e){const t=Rf.get(e),s=$f.get(e),n=t.left-s.left,r=t.top-s.top;if(n||r){const o=e.el.style;return o.transform=o.webkitTransform=`translate(${n}px,${r}px)`,o.transitionDuration="0s",e}}function gy(e,t,s){const n=e.cloneNode(),r=e[Kn];r&&r.forEach(a=>{a.split(/\s+/).forEach(l=>l&&n.classList.remove(l))}),s.split(/\s+/).forEach(a=>a&&n.classList.add(a)),n.style.display="none";const o=t.nodeType===1?t:t.parentNode;o.appendChild(n);const{hasTransform:i}=Of(n);return o.removeChild(n),i}const Bc=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ue(t)?s=>xo(t,s):t};function yy(e){e.target.composing=!0}function Mc(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Vi=Symbol("_assign"),bl={created(e,{modifiers:{lazy:t,trim:s,number:n}},r){e[Vi]=Bc(r);const o=n||r.props&&r.props.type==="number";$n(e,t?"change":"input",i=>{if(i.target.composing)return;let a=e.value;s&&(a=a.trim()),o&&(a=da(a)),e[Vi](a)}),s&&$n(e,"change",()=>{e.value=e.value.trim()}),t||($n(e,"compositionstart",yy),$n(e,"compositionend",Mc),$n(e,"change",Mc))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:n,trim:r,number:o}},i){if(e[Vi]=Bc(i),e.composing)return;const a=(o||e.type==="number")&&!/^0\d/.test(e.value)?da(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(n&&t===s||r&&e.value.trim()===l)||(e.value=l))}},vy=["ctrl","shift","alt","meta"],_y={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>vy.some(s=>e[`${s}Key`]&&!t.includes(s))},bs=(e,t)=>{const s=e._withMods||(e._withMods={}),n=t.join(".");return s[n]||(s[n]=(r,...o)=>{for(let i=0;i<t.length;i++){const a=_y[t[i]];if(a&&a(r,t))return}return e(r,...o)})},by={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Df=(e,t)=>{const s=e._withKeys||(e._withKeys={}),n=t.join(".");return s[n]||(s[n]=r=>{if(!("key"in r))return;const o=Ws(r.key);if(t.some(i=>i===o||by[i]===o))return e(r)})},wy=Je({patchProp:ly},zg);let Nc;function xy(){return Nc||(Nc=gg(wy))}const Lf=(...e)=>{const t=xy().createApp(...e),{mount:s}=t;return t.mount=n=>{const r=Cy(n);if(!r)return;const o=t._component;!he(o)&&!o.render&&!o.template&&(o.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const i=s(r,!1,ky(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),i},t};function ky(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Cy(e){return Ne(e)?document.querySelector(e):e}function jf(e){var t,s,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(s=jf(e[t]))&&(n&&(n+=" "),n+=s)}else for(s in e)e[s]&&(n&&(n+=" "),n+=s);return n}function Bf(){for(var e,t,s=0,n="",r=arguments.length;s<r;s++)(e=arguments[s])&&(t=jf(e))&&(n&&(n+=" "),n+=t);return n}const Fc=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Uc=Bf,wl=(e,t)=>s=>{var n;if((t==null?void 0:t.variants)==null)return Uc(e,s==null?void 0:s.class,s==null?void 0:s.className);const{variants:r,defaultVariants:o}=t,i=Object.keys(r).map(u=>{const c=s==null?void 0:s[u],d=o==null?void 0:o[u];if(c===null)return null;const f=Fc(c)||Fc(d);return r[u][f]}),a=s&&Object.entries(s).reduce((u,c)=>{let[d,f]=c;return f===void 0||(u[d]=f),u},{}),l=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,c)=>{let{class:d,className:f,...h}=c;return Object.entries(h).every(m=>{let[g,b]=m;return Array.isArray(b)?b.includes({...o,...a}[g]):{...o,...a}[g]===b})?[...u,d,f]:u},[]);return Uc(e,i,l,s==null?void 0:s.class,s==null?void 0:s.className)},xl="-",Sy=e=>{const t=Ay(e),{conflictingClassGroups:s,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:i=>{const a=i.split(xl);return a[0]===""&&a.length!==1&&a.shift(),Mf(a,t)||Ey(i)},getConflictingClassGroupIds:(i,a)=>{const l=s[i]||[];return a&&n[i]?[...l,...n[i]]:l}}},Mf=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const s=e[0],n=t.nextPart.get(s),r=n?Mf(e.slice(1),n):void 0;if(r)return r;if(t.validators.length===0)return;const o=e.join(xl);return(i=t.validators.find(({validator:a})=>a(o)))==null?void 0:i.classGroupId},Vc=/^\[(.+)\]$/,Ey=e=>{if(Vc.test(e)){const t=Vc.exec(e)[1],s=t==null?void 0:t.substring(0,t.indexOf(":"));if(s)return"arbitrary.."+s}},Ay=e=>{const{theme:t,classGroups:s}=e,n={nextPart:new Map,validators:[]};for(const r in s)Ea(s[r],n,r,t);return n},Ea=(e,t,s,n)=>{e.forEach(r=>{if(typeof r=="string"){const o=r===""?t:qc(t,r);o.classGroupId=s;return}if(typeof r=="function"){if(Ty(r)){Ea(r(n),t,s,n);return}t.validators.push({validator:r,classGroupId:s});return}Object.entries(r).forEach(([o,i])=>{Ea(i,qc(t,o),s,n)})})},qc=(e,t)=>{let s=e;return t.split(xl).forEach(n=>{s.nextPart.has(n)||s.nextPart.set(n,{nextPart:new Map,validators:[]}),s=s.nextPart.get(n)}),s},Ty=e=>e.isThemeGetter,Py=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,s=new Map,n=new Map;const r=(o,i)=>{s.set(o,i),t++,t>e&&(t=0,n=s,s=new Map)};return{get(o){let i=s.get(o);if(i!==void 0)return i;if((i=n.get(o))!==void 0)return r(o,i),i},set(o,i){s.has(o)?s.set(o,i):r(o,i)}}},Aa="!",Ta=":",Oy=Ta.length,Iy=e=>{const{prefix:t,experimentalParseClassName:s}=e;let n=r=>{const o=[];let i=0,a=0,l=0,u;for(let m=0;m<r.length;m++){let g=r[m];if(i===0&&a===0){if(g===Ta){o.push(r.slice(l,m)),l=m+Oy;continue}if(g==="/"){u=m;continue}}g==="["?i++:g==="]"?i--:g==="("?a++:g===")"&&a--}const c=o.length===0?r:r.substring(l),d=Ry(c),f=d!==c,h=u&&u>l?u-l:void 0;return{modifiers:o,hasImportantModifier:f,baseClassName:d,maybePostfixModifierPosition:h}};if(t){const r=t+Ta,o=n;n=i=>i.startsWith(r)?o(i.substring(r.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:i,maybePostfixModifierPosition:void 0}}if(s){const r=n;n=o=>s({className:o,parseClassName:r})}return n},Ry=e=>e.endsWith(Aa)?e.substring(0,e.length-1):e.startsWith(Aa)?e.substring(1):e,$y=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(n=>[n,!0]));return n=>{if(n.length<=1)return n;const r=[];let o=[];return n.forEach(i=>{i[0]==="["||t[i]?(r.push(...o.sort(),i),o=[]):o.push(i)}),r.push(...o.sort()),r}},Dy=e=>({cache:Py(e.cacheSize),parseClassName:Iy(e),sortModifiers:$y(e),...Sy(e)}),Ly=/\s+/,jy=(e,t)=>{const{parseClassName:s,getClassGroupId:n,getConflictingClassGroupIds:r,sortModifiers:o}=t,i=[],a=e.trim().split(Ly);let l="";for(let u=a.length-1;u>=0;u-=1){const c=a[u],{isExternal:d,modifiers:f,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:g}=s(c);if(d){l=c+(l.length>0?" "+l:l);continue}let b=!!g,C=n(b?m.substring(0,g):m);if(!C){if(!b){l=c+(l.length>0?" "+l:l);continue}if(C=n(m),!C){l=c+(l.length>0?" "+l:l);continue}b=!1}const E=o(f).join(":"),P=h?E+Aa:E,S=P+C;if(i.includes(S))continue;i.push(S);const D=r(C,b);for(let W=0;W<D.length;++W){const I=D[W];i.push(P+I)}l=c+(l.length>0?" "+l:l)}return l};function By(){let e=0,t,s,n="";for(;e<arguments.length;)(t=arguments[e++])&&(s=Nf(t))&&(n&&(n+=" "),n+=s);return n}const Nf=e=>{if(typeof e=="string")return e;let t,s="";for(let n=0;n<e.length;n++)e[n]&&(t=Nf(e[n]))&&(s&&(s+=" "),s+=t);return s};function My(e,...t){let s,n,r,o=i;function i(l){const u=t.reduce((c,d)=>d(c),e());return s=Dy(u),n=s.cache.get,r=s.cache.set,o=a,a(l)}function a(l){const u=n(l);if(u)return u;const c=jy(l,s);return r(l,c),c}return function(){return o(By.apply(null,arguments))}}const Ge=e=>{const t=s=>s[e]||[];return t.isThemeGetter=!0,t},Ff=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Uf=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Ny=/^\d+\/\d+$/,Fy=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Uy=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Vy=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,qy=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,zy=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,wn=e=>Ny.test(e),be=e=>!!e&&!Number.isNaN(Number(e)),Ts=e=>!!e&&Number.isInteger(Number(e)),qi=e=>e.endsWith("%")&&be(e.slice(0,-1)),ds=e=>Fy.test(e),Hy=()=>!0,Ky=e=>Uy.test(e)&&!Vy.test(e),Vf=()=>!1,Wy=e=>qy.test(e),Gy=e=>zy.test(e),Jy=e=>!te(e)&&!se(e),Yy=e=>Zn(e,Hf,Vf),te=e=>Ff.test(e),on=e=>Zn(e,Kf,Ky),zi=e=>Zn(e,tv,be),zc=e=>Zn(e,qf,Vf),Xy=e=>Zn(e,zf,Gy),ao=e=>Zn(e,Wf,Wy),se=e=>Uf.test(e),cr=e=>er(e,Kf),Qy=e=>er(e,sv),Hc=e=>er(e,qf),Zy=e=>er(e,Hf),ev=e=>er(e,zf),lo=e=>er(e,Wf,!0),Zn=(e,t,s)=>{const n=Ff.exec(e);return n?n[1]?t(n[1]):s(n[2]):!1},er=(e,t,s=!1)=>{const n=Uf.exec(e);return n?n[1]?t(n[1]):s:!1},qf=e=>e==="position"||e==="percentage",zf=e=>e==="image"||e==="url",Hf=e=>e==="length"||e==="size"||e==="bg-size",Kf=e=>e==="length",tv=e=>e==="number",sv=e=>e==="family-name",Wf=e=>e==="shadow",nv=()=>{const e=Ge("color"),t=Ge("font"),s=Ge("text"),n=Ge("font-weight"),r=Ge("tracking"),o=Ge("leading"),i=Ge("breakpoint"),a=Ge("container"),l=Ge("spacing"),u=Ge("radius"),c=Ge("shadow"),d=Ge("inset-shadow"),f=Ge("text-shadow"),h=Ge("drop-shadow"),m=Ge("blur"),g=Ge("perspective"),b=Ge("aspect"),C=Ge("ease"),E=Ge("animate"),P=()=>["auto","avoid","all","avoid-page","page","left","right","column"],S=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],D=()=>[...S(),se,te],W=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto","contain","none"],O=()=>[se,te,l],A=()=>[wn,"full","auto",...O()],F=()=>[Ts,"none","subgrid",se,te],q=()=>["auto",{span:["full",Ts,se,te]},Ts,se,te],j=()=>[Ts,"auto",se,te],ie=()=>["auto","min","max","fr",se,te],de=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ye=()=>["start","end","center","stretch","center-safe","end-safe"],me=()=>["auto",...O()],ae=()=>[wn,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...O()],z=()=>[e,se,te],Fe=()=>[...S(),Hc,zc,{position:[se,te]}],He=()=>["no-repeat",{repeat:["","x","y","space","round"]}],it=()=>["auto","cover","contain",Zy,Yy,{size:[se,te]}],Xe=()=>[qi,cr,on],Ve=()=>["","none","full",u,se,te],Ke=()=>["",be,cr,on],cs=()=>["solid","dashed","dotted","double"],at=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],R=()=>[be,qi,Hc,zc],Q=()=>["","none",m,se,te],Y=()=>["none",be,se,te],oe=()=>["none",be,se,te],Te=()=>[be,se,te],y=()=>[wn,"full",...O()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ds],breakpoint:[ds],color:[Hy],container:[ds],"drop-shadow":[ds],ease:["in","out","in-out"],font:[Jy],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ds],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ds],shadow:[ds],spacing:["px",be],text:[ds],"text-shadow":[ds],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",wn,te,se,b]}],container:["container"],columns:[{columns:[be,te,se,a]}],"break-after":[{"break-after":P()}],"break-before":[{"break-before":P()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:D()}],overflow:[{overflow:W()}],"overflow-x":[{"overflow-x":W()}],"overflow-y":[{"overflow-y":W()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:A()}],"inset-x":[{"inset-x":A()}],"inset-y":[{"inset-y":A()}],start:[{start:A()}],end:[{end:A()}],top:[{top:A()}],right:[{right:A()}],bottom:[{bottom:A()}],left:[{left:A()}],visibility:["visible","invisible","collapse"],z:[{z:[Ts,"auto",se,te]}],basis:[{basis:[wn,"full","auto",a,...O()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[be,wn,"auto","initial","none",te]}],grow:[{grow:["",be,se,te]}],shrink:[{shrink:["",be,se,te]}],order:[{order:[Ts,"first","last","none",se,te]}],"grid-cols":[{"grid-cols":F()}],"col-start-end":[{col:q()}],"col-start":[{"col-start":j()}],"col-end":[{"col-end":j()}],"grid-rows":[{"grid-rows":F()}],"row-start-end":[{row:q()}],"row-start":[{"row-start":j()}],"row-end":[{"row-end":j()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":ie()}],"auto-rows":[{"auto-rows":ie()}],gap:[{gap:O()}],"gap-x":[{"gap-x":O()}],"gap-y":[{"gap-y":O()}],"justify-content":[{justify:[...de(),"normal"]}],"justify-items":[{"justify-items":[...ye(),"normal"]}],"justify-self":[{"justify-self":["auto",...ye()]}],"align-content":[{content:["normal",...de()]}],"align-items":[{items:[...ye(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ye(),{baseline:["","last"]}]}],"place-content":[{"place-content":de()}],"place-items":[{"place-items":[...ye(),"baseline"]}],"place-self":[{"place-self":["auto",...ye()]}],p:[{p:O()}],px:[{px:O()}],py:[{py:O()}],ps:[{ps:O()}],pe:[{pe:O()}],pt:[{pt:O()}],pr:[{pr:O()}],pb:[{pb:O()}],pl:[{pl:O()}],m:[{m:me()}],mx:[{mx:me()}],my:[{my:me()}],ms:[{ms:me()}],me:[{me:me()}],mt:[{mt:me()}],mr:[{mr:me()}],mb:[{mb:me()}],ml:[{ml:me()}],"space-x":[{"space-x":O()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":O()}],"space-y-reverse":["space-y-reverse"],size:[{size:ae()}],w:[{w:[a,"screen",...ae()]}],"min-w":[{"min-w":[a,"screen","none",...ae()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[i]},...ae()]}],h:[{h:["screen",...ae()]}],"min-h":[{"min-h":["screen","none",...ae()]}],"max-h":[{"max-h":["screen",...ae()]}],"font-size":[{text:["base",s,cr,on]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,se,zi]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",qi,te]}],"font-family":[{font:[Qy,te,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,se,te]}],"line-clamp":[{"line-clamp":[be,"none",se,zi]}],leading:[{leading:[o,...O()]}],"list-image":[{"list-image":["none",se,te]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",se,te]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:z()}],"text-color":[{text:z()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...cs(),"wavy"]}],"text-decoration-thickness":[{decoration:[be,"from-font","auto",se,on]}],"text-decoration-color":[{decoration:z()}],"underline-offset":[{"underline-offset":[be,"auto",se,te]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",se,te]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",se,te]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Fe()}],"bg-repeat":[{bg:He()}],"bg-size":[{bg:it()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ts,se,te],radial:["",se,te],conic:[Ts,se,te]},ev,Xy]}],"bg-color":[{bg:z()}],"gradient-from-pos":[{from:Xe()}],"gradient-via-pos":[{via:Xe()}],"gradient-to-pos":[{to:Xe()}],"gradient-from":[{from:z()}],"gradient-via":[{via:z()}],"gradient-to":[{to:z()}],rounded:[{rounded:Ve()}],"rounded-s":[{"rounded-s":Ve()}],"rounded-e":[{"rounded-e":Ve()}],"rounded-t":[{"rounded-t":Ve()}],"rounded-r":[{"rounded-r":Ve()}],"rounded-b":[{"rounded-b":Ve()}],"rounded-l":[{"rounded-l":Ve()}],"rounded-ss":[{"rounded-ss":Ve()}],"rounded-se":[{"rounded-se":Ve()}],"rounded-ee":[{"rounded-ee":Ve()}],"rounded-es":[{"rounded-es":Ve()}],"rounded-tl":[{"rounded-tl":Ve()}],"rounded-tr":[{"rounded-tr":Ve()}],"rounded-br":[{"rounded-br":Ve()}],"rounded-bl":[{"rounded-bl":Ve()}],"border-w":[{border:Ke()}],"border-w-x":[{"border-x":Ke()}],"border-w-y":[{"border-y":Ke()}],"border-w-s":[{"border-s":Ke()}],"border-w-e":[{"border-e":Ke()}],"border-w-t":[{"border-t":Ke()}],"border-w-r":[{"border-r":Ke()}],"border-w-b":[{"border-b":Ke()}],"border-w-l":[{"border-l":Ke()}],"divide-x":[{"divide-x":Ke()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Ke()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...cs(),"hidden","none"]}],"divide-style":[{divide:[...cs(),"hidden","none"]}],"border-color":[{border:z()}],"border-color-x":[{"border-x":z()}],"border-color-y":[{"border-y":z()}],"border-color-s":[{"border-s":z()}],"border-color-e":[{"border-e":z()}],"border-color-t":[{"border-t":z()}],"border-color-r":[{"border-r":z()}],"border-color-b":[{"border-b":z()}],"border-color-l":[{"border-l":z()}],"divide-color":[{divide:z()}],"outline-style":[{outline:[...cs(),"none","hidden"]}],"outline-offset":[{"outline-offset":[be,se,te]}],"outline-w":[{outline:["",be,cr,on]}],"outline-color":[{outline:z()}],shadow:[{shadow:["","none",c,lo,ao]}],"shadow-color":[{shadow:z()}],"inset-shadow":[{"inset-shadow":["none",d,lo,ao]}],"inset-shadow-color":[{"inset-shadow":z()}],"ring-w":[{ring:Ke()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:z()}],"ring-offset-w":[{"ring-offset":[be,on]}],"ring-offset-color":[{"ring-offset":z()}],"inset-ring-w":[{"inset-ring":Ke()}],"inset-ring-color":[{"inset-ring":z()}],"text-shadow":[{"text-shadow":["none",f,lo,ao]}],"text-shadow-color":[{"text-shadow":z()}],opacity:[{opacity:[be,se,te]}],"mix-blend":[{"mix-blend":[...at(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":at()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[be]}],"mask-image-linear-from-pos":[{"mask-linear-from":R()}],"mask-image-linear-to-pos":[{"mask-linear-to":R()}],"mask-image-linear-from-color":[{"mask-linear-from":z()}],"mask-image-linear-to-color":[{"mask-linear-to":z()}],"mask-image-t-from-pos":[{"mask-t-from":R()}],"mask-image-t-to-pos":[{"mask-t-to":R()}],"mask-image-t-from-color":[{"mask-t-from":z()}],"mask-image-t-to-color":[{"mask-t-to":z()}],"mask-image-r-from-pos":[{"mask-r-from":R()}],"mask-image-r-to-pos":[{"mask-r-to":R()}],"mask-image-r-from-color":[{"mask-r-from":z()}],"mask-image-r-to-color":[{"mask-r-to":z()}],"mask-image-b-from-pos":[{"mask-b-from":R()}],"mask-image-b-to-pos":[{"mask-b-to":R()}],"mask-image-b-from-color":[{"mask-b-from":z()}],"mask-image-b-to-color":[{"mask-b-to":z()}],"mask-image-l-from-pos":[{"mask-l-from":R()}],"mask-image-l-to-pos":[{"mask-l-to":R()}],"mask-image-l-from-color":[{"mask-l-from":z()}],"mask-image-l-to-color":[{"mask-l-to":z()}],"mask-image-x-from-pos":[{"mask-x-from":R()}],"mask-image-x-to-pos":[{"mask-x-to":R()}],"mask-image-x-from-color":[{"mask-x-from":z()}],"mask-image-x-to-color":[{"mask-x-to":z()}],"mask-image-y-from-pos":[{"mask-y-from":R()}],"mask-image-y-to-pos":[{"mask-y-to":R()}],"mask-image-y-from-color":[{"mask-y-from":z()}],"mask-image-y-to-color":[{"mask-y-to":z()}],"mask-image-radial":[{"mask-radial":[se,te]}],"mask-image-radial-from-pos":[{"mask-radial-from":R()}],"mask-image-radial-to-pos":[{"mask-radial-to":R()}],"mask-image-radial-from-color":[{"mask-radial-from":z()}],"mask-image-radial-to-color":[{"mask-radial-to":z()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":S()}],"mask-image-conic-pos":[{"mask-conic":[be]}],"mask-image-conic-from-pos":[{"mask-conic-from":R()}],"mask-image-conic-to-pos":[{"mask-conic-to":R()}],"mask-image-conic-from-color":[{"mask-conic-from":z()}],"mask-image-conic-to-color":[{"mask-conic-to":z()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Fe()}],"mask-repeat":[{mask:He()}],"mask-size":[{mask:it()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",se,te]}],filter:[{filter:["","none",se,te]}],blur:[{blur:Q()}],brightness:[{brightness:[be,se,te]}],contrast:[{contrast:[be,se,te]}],"drop-shadow":[{"drop-shadow":["","none",h,lo,ao]}],"drop-shadow-color":[{"drop-shadow":z()}],grayscale:[{grayscale:["",be,se,te]}],"hue-rotate":[{"hue-rotate":[be,se,te]}],invert:[{invert:["",be,se,te]}],saturate:[{saturate:[be,se,te]}],sepia:[{sepia:["",be,se,te]}],"backdrop-filter":[{"backdrop-filter":["","none",se,te]}],"backdrop-blur":[{"backdrop-blur":Q()}],"backdrop-brightness":[{"backdrop-brightness":[be,se,te]}],"backdrop-contrast":[{"backdrop-contrast":[be,se,te]}],"backdrop-grayscale":[{"backdrop-grayscale":["",be,se,te]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[be,se,te]}],"backdrop-invert":[{"backdrop-invert":["",be,se,te]}],"backdrop-opacity":[{"backdrop-opacity":[be,se,te]}],"backdrop-saturate":[{"backdrop-saturate":[be,se,te]}],"backdrop-sepia":[{"backdrop-sepia":["",be,se,te]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":O()}],"border-spacing-x":[{"border-spacing-x":O()}],"border-spacing-y":[{"border-spacing-y":O()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",se,te]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[be,"initial",se,te]}],ease:[{ease:["linear","initial",C,se,te]}],delay:[{delay:[be,se,te]}],animate:[{animate:["none",E,se,te]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[g,se,te]}],"perspective-origin":[{"perspective-origin":D()}],rotate:[{rotate:Y()}],"rotate-x":[{"rotate-x":Y()}],"rotate-y":[{"rotate-y":Y()}],"rotate-z":[{"rotate-z":Y()}],scale:[{scale:oe()}],"scale-x":[{"scale-x":oe()}],"scale-y":[{"scale-y":oe()}],"scale-z":[{"scale-z":oe()}],"scale-3d":["scale-3d"],skew:[{skew:Te()}],"skew-x":[{"skew-x":Te()}],"skew-y":[{"skew-y":Te()}],transform:[{transform:[se,te,"","none","gpu","cpu"]}],"transform-origin":[{origin:D()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:y()}],"translate-x":[{"translate-x":y()}],"translate-y":[{"translate-y":y()}],"translate-z":[{"translate-z":y()}],"translate-none":["translate-none"],accent:[{accent:z()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:z()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",se,te]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",se,te]}],fill:[{fill:["none",...z()]}],"stroke-w":[{stroke:[be,cr,on,zi]}],stroke:[{stroke:["none",...z()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},rv=My(nv),ov="modulepreload",iv=function(e){return"/"+e},Kc={},Wn=function(t,s,n){let r=Promise.resolve();if(s&&s.length>0){let i=function(u){return Promise.all(u.map(c=>Promise.resolve(c).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=i(s.map(u=>{if(u=iv(u),u in Kc)return;Kc[u]=!0;const c=u.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":ov,c||(f.as="script"),f.crossOrigin="",f.href=u,l&&f.setAttribute("nonce",l),document.head.appendChild(f),c)return new Promise((h,m)=>{f.addEventListener("load",h),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return r.then(i=>{for(const a of i||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})},av=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>Wn(async()=>{const{default:n}=await Promise.resolve().then(()=>tr);return{default:n}},void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)};class kl extends Error{constructor(t,s="FunctionsError",n){super(t),this.name=s,this.context=n}}class lv extends kl{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class cv extends kl{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class uv extends kl{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Pa;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Pa||(Pa={}));var dv=function(e,t,s,n){function r(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function a(c){try{u(n.next(c))}catch(d){i(d)}}function l(c){try{u(n.throw(c))}catch(d){i(d)}}function u(c){c.done?o(c.value):r(c.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};class fv{constructor(t,{headers:s={},customFetch:n,region:r=Pa.Any}={}){this.url=t,this.headers=s,this.region=r,this.fetch=av(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,s={}){var n;return dv(this,void 0,void 0,function*(){try{const{headers:r,method:o,body:i}=s;let a={},{region:l}=s;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let u;i&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=i):typeof i=="string"?(a["Content-Type"]="text/plain",u=i):typeof FormData<"u"&&i instanceof FormData?u=i:(a["Content-Type"]="application/json",u=JSON.stringify(i)));const c=yield this.fetch(`${this.url}/${t}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),r),body:u}).catch(m=>{throw new lv(m)}),d=c.headers.get("x-relay-error");if(d&&d==="true")throw new cv(c);if(!c.ok)throw new uv(c);let f=((n=c.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),h;return f==="application/json"?h=yield c.json():f==="application/octet-stream"?h=yield c.blob():f==="text/event-stream"?h=c:f==="multipart/form-data"?h=yield c.formData():h=yield c.text(),{data:h,error:null}}catch(r){return{data:null,error:r}}})}}function hv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function pv(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var s=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(s,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}),s}var Qe={},xn={},kn={},Cn={},Sn={},En={},mv=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Gn=mv();const gv=Gn.fetch,Gf=Gn.fetch.bind(Gn),Jf=Gn.Headers,yv=Gn.Request,vv=Gn.Response,tr=Object.freeze(Object.defineProperty({__proto__:null,Headers:Jf,Request:yv,Response:vv,default:Gf,fetch:gv},Symbol.toStringTag,{value:"Module"})),_v=pv(tr);var co={},Wc;function Yf(){if(Wc)return co;Wc=1,Object.defineProperty(co,"__esModule",{value:!0});class e extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return co.default=e,co}var Gc;function Xf(){if(Gc)return En;Gc=1;var e=En&&En.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(En,"__esModule",{value:!0});const t=e(_v),s=e(Yf());class n{constructor(o){this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=o.headers,this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=o.shouldThrowOnError,this.signal=o.signal,this.isMaybeSingle=o.isMaybeSingle,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,i){return this.headers=Object.assign({},this.headers),this.headers[o]=i,this}then(o,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var c,d,f;let h=null,m=null,g=null,b=u.status,C=u.statusText;if(u.ok){if(this.method!=="HEAD"){const D=await u.text();D===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?m=D:m=JSON.parse(D))}const P=(c=this.headers.Prefer)===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),S=(d=u.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");P&&S&&S.length>1&&(g=parseInt(S[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(m)&&(m.length>1?(h={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,g=null,b=406,C="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{const P=await u.text();try{h=JSON.parse(P),Array.isArray(h)&&u.status===404&&(m=[],h=null,b=200,C="OK")}catch{u.status===404&&P===""?(b=204,C="No Content"):h={message:P}}if(h&&this.isMaybeSingle&&(!((f=h==null?void 0:h.details)===null||f===void 0)&&f.includes("0 rows"))&&(h=null,b=200,C="OK"),h&&this.shouldThrowOnError)throw new s.default(h)}return{error:h,data:m,count:g,status:b,statusText:C}});return this.shouldThrowOnError||(l=l.catch(u=>{var c,d,f;return{error:{message:`${(c=u==null?void 0:u.name)!==null&&c!==void 0?c:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(d=u==null?void 0:u.stack)!==null&&d!==void 0?d:""}`,hint:"",code:`${(f=u==null?void 0:u.code)!==null&&f!==void 0?f:""}`},data:null,count:null,status:0,statusText:""}})),l.then(o,i)}returns(){return this}overrideTypes(){return this}}return En.default=n,En}var Jc;function Qf(){if(Jc)return Sn;Jc=1;var e=Sn&&Sn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Sn,"__esModule",{value:!0});const t=e(Xf());class s extends t.default{select(r){let o=!1;const i=(r??"*").split("").map(a=>/\s/.test(a)&&!o?"":(a==='"'&&(o=!o),a)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(r,{ascending:o=!0,nullsFirst:i,foreignTable:a,referencedTable:l=a}={}){const u=l?`${l}.order`:"order",c=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${c?`${c},`:""}${r}.${o?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:o,referencedTable:i=o}={}){const a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${r}`),this}range(r,o,{foreignTable:i,referencedTable:a=i}={}){const l=typeof a>"u"?"offset":`${a}.offset`,u=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${r}`),this.url.searchParams.set(u,`${o-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:r=!1,verbose:o=!1,settings:i=!1,buffers:a=!1,wal:l=!1,format:u="text"}={}){var c;const d=[r?"analyze":null,o?"verbose":null,i?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),f=(c=this.headers.Accept)!==null&&c!==void 0?c:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${u}; for="${f}"; options=${d};`,u==="json"?this:this}rollback(){var r;return((r=this.headers.Prefer)!==null&&r!==void 0?r:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Sn.default=s,Sn}var Yc;function Cl(){if(Yc)return Cn;Yc=1;var e=Cn&&Cn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Cn,"__esModule",{value:!0});const t=e(Qf());class s extends t.default{eq(r,o){return this.url.searchParams.append(r,`eq.${o}`),this}neq(r,o){return this.url.searchParams.append(r,`neq.${o}`),this}gt(r,o){return this.url.searchParams.append(r,`gt.${o}`),this}gte(r,o){return this.url.searchParams.append(r,`gte.${o}`),this}lt(r,o){return this.url.searchParams.append(r,`lt.${o}`),this}lte(r,o){return this.url.searchParams.append(r,`lte.${o}`),this}like(r,o){return this.url.searchParams.append(r,`like.${o}`),this}likeAllOf(r,o){return this.url.searchParams.append(r,`like(all).{${o.join(",")}}`),this}likeAnyOf(r,o){return this.url.searchParams.append(r,`like(any).{${o.join(",")}}`),this}ilike(r,o){return this.url.searchParams.append(r,`ilike.${o}`),this}ilikeAllOf(r,o){return this.url.searchParams.append(r,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(r,o){return this.url.searchParams.append(r,`ilike(any).{${o.join(",")}}`),this}is(r,o){return this.url.searchParams.append(r,`is.${o}`),this}in(r,o){const i=Array.from(new Set(o)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(r,`in.(${i})`),this}contains(r,o){return typeof o=="string"?this.url.searchParams.append(r,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(r,`cs.{${o.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(o)}`),this}containedBy(r,o){return typeof o=="string"?this.url.searchParams.append(r,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(r,`cd.{${o.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(o)}`),this}rangeGt(r,o){return this.url.searchParams.append(r,`sr.${o}`),this}rangeGte(r,o){return this.url.searchParams.append(r,`nxl.${o}`),this}rangeLt(r,o){return this.url.searchParams.append(r,`sl.${o}`),this}rangeLte(r,o){return this.url.searchParams.append(r,`nxr.${o}`),this}rangeAdjacent(r,o){return this.url.searchParams.append(r,`adj.${o}`),this}overlaps(r,o){return typeof o=="string"?this.url.searchParams.append(r,`ov.${o}`):this.url.searchParams.append(r,`ov.{${o.join(",")}}`),this}textSearch(r,o,{config:i,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const u=i===void 0?"":`(${i})`;return this.url.searchParams.append(r,`${l}fts${u}.${o}`),this}match(r){return Object.entries(r).forEach(([o,i])=>{this.url.searchParams.append(o,`eq.${i}`)}),this}not(r,o,i){return this.url.searchParams.append(r,`not.${o}.${i}`),this}or(r,{foreignTable:o,referencedTable:i=o}={}){const a=i?`${i}.or`:"or";return this.url.searchParams.append(a,`(${r})`),this}filter(r,o,i){return this.url.searchParams.append(r,`${o}.${i}`),this}}return Cn.default=s,Cn}var Xc;function Zf(){if(Xc)return kn;Xc=1;var e=kn&&kn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(kn,"__esModule",{value:!0});const t=e(Cl());class s{constructor(r,{headers:o={},schema:i,fetch:a}){this.url=r,this.headers=o,this.schema=i,this.fetch=a}select(r,{head:o=!1,count:i}={}){const a=o?"HEAD":"GET";let l=!1;const u=(r??"*").split("").map(c=>/\s/.test(c)&&!l?"":(c==='"'&&(l=!l),c)).join("");return this.url.searchParams.set("select",u),i&&(this.headers.Prefer=`count=${i}`),new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(r,{count:o,defaultToNull:i=!0}={}){const a="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),o&&l.push(`count=${o}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(r)){const u=r.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(u.length>0){const c=[...new Set(u)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}upsert(r,{onConflict:o,ignoreDuplicates:i=!1,count:a,defaultToNull:l=!0}={}){const u="POST",c=[`resolution=${i?"ignore":"merge"}-duplicates`];if(o!==void 0&&this.url.searchParams.set("on_conflict",o),this.headers.Prefer&&c.push(this.headers.Prefer),a&&c.push(`count=${a}`),l||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(r)){const d=r.reduce((f,h)=>f.concat(Object.keys(h)),[]);if(d.length>0){const f=[...new Set(d)].map(h=>`"${h}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}update(r,{count:o}={}){const i="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),o&&a.push(`count=${o}`),this.headers.Prefer=a.join(","),new t.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}delete({count:r}={}){const o="DELETE",i=[];return r&&i.push(`count=${r}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return kn.default=s,kn}var ur={},dr={},Qc;function bv(){return Qc||(Qc=1,Object.defineProperty(dr,"__esModule",{value:!0}),dr.version=void 0,dr.version="0.0.0-automated"),dr}var Zc;function wv(){if(Zc)return ur;Zc=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.DEFAULT_HEADERS=void 0;const e=bv();return ur.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${e.version}`},ur}var eu;function xv(){if(eu)return xn;eu=1;var e=xn&&xn.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(xn,"__esModule",{value:!0});const t=e(Zf()),s=e(Cl()),n=wv();class r{constructor(i,{headers:a={},schema:l,fetch:u}={}){this.url=i,this.headers=Object.assign(Object.assign({},n.DEFAULT_HEADERS),a),this.schemaName=l,this.fetch=u}from(i){const a=new URL(`${this.url}/${i}`);return new t.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new r(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,a={},{head:l=!1,get:u=!1,count:c}={}){let d;const f=new URL(`${this.url}/rpc/${i}`);let h;l||u?(d=l?"HEAD":"GET",Object.entries(a).filter(([g,b])=>b!==void 0).map(([g,b])=>[g,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([g,b])=>{f.searchParams.append(g,b)})):(d="POST",h=a);const m=Object.assign({},this.headers);return c&&(m.Prefer=`count=${c}`),new s.default({method:d,url:f,headers:m,schema:this.schemaName,body:h,fetch:this.fetch,allowEmpty:!1})}}return xn.default=r,xn}var tu;function kv(){if(tu)return Qe;tu=1;var e=Qe&&Qe.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.PostgrestError=Qe.PostgrestBuilder=Qe.PostgrestTransformBuilder=Qe.PostgrestFilterBuilder=Qe.PostgrestQueryBuilder=Qe.PostgrestClient=void 0;const t=e(xv());Qe.PostgrestClient=t.default;const s=e(Zf());Qe.PostgrestQueryBuilder=s.default;const n=e(Cl());Qe.PostgrestFilterBuilder=n.default;const r=e(Qf());Qe.PostgrestTransformBuilder=r.default;const o=e(Xf());Qe.PostgrestBuilder=o.default;const i=e(Yf());return Qe.PostgrestError=i.default,Qe.default={PostgrestClient:t.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:r.default,PostgrestBuilder:o.default,PostgrestError:i.default},Qe}var Cv=kv();const Sv=hv(Cv),{PostgrestClient:Ev,PostgrestQueryBuilder:DP,PostgrestFilterBuilder:LP,PostgrestTransformBuilder:jP,PostgrestBuilder:BP,PostgrestError:MP}=Sv,Av="2.11.2",Tv={"X-Client-Info":`realtime-js/${Av}`},Pv="1.0.0",eh=1e4,Ov=1e3;var zn;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(zn||(zn={}));var _t;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(_t||(_t={}));var It;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(It||(It={}));var Oa;(function(e){e.websocket="websocket"})(Oa||(Oa={}));var un;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(un||(un={}));class Iv{constructor(){this.HEADER_LENGTH=1}decode(t,s){return t.constructor===ArrayBuffer?s(this._binaryDecode(t)):s(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const s=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,s,n)}_decodeBroadcast(t,s,n){const r=s.getUint8(1),o=s.getUint8(2);let i=this.HEADER_LENGTH+2;const a=n.decode(t.slice(i,i+r));i=i+r;const l=n.decode(t.slice(i,i+o));i=i+o;const u=JSON.parse(n.decode(t.slice(i,t.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class th{constructor(t,s){this.callback=t,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Le;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Le||(Le={}));const su=(e,t,s={})=>{var n;const r=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((o,i)=>(o[i]=Rv(i,e,t,r),o),{})},Rv=(e,t,s,n)=>{const r=t.find(a=>a.name===e),o=r==null?void 0:r.type,i=s[e];return o&&!n.includes(o)?sh(o,i):Ia(i)},sh=(e,t)=>{if(e.charAt(0)==="_"){const s=e.slice(1,e.length);return jv(t,s)}switch(e){case Le.bool:return $v(t);case Le.float4:case Le.float8:case Le.int2:case Le.int4:case Le.int8:case Le.numeric:case Le.oid:return Dv(t);case Le.json:case Le.jsonb:return Lv(t);case Le.timestamp:return Bv(t);case Le.abstime:case Le.date:case Le.daterange:case Le.int4range:case Le.int8range:case Le.money:case Le.reltime:case Le.text:case Le.time:case Le.timestamptz:case Le.timetz:case Le.tsrange:case Le.tstzrange:return Ia(t);default:return Ia(t)}},Ia=e=>e,$v=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Dv=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Lv=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},jv=(e,t)=>{if(typeof e!="string")return e;const s=e.length-1,n=e[s];if(e[0]==="{"&&n==="}"){let o;const i=e.slice(1,s);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(a=>sh(t,a))}return e},Bv=e=>typeof e=="string"?e.replace(" ","T"):e,nh=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Hi{constructor(t,s,n={},r=eh){this.channel=t,this.event=s,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,s){var n;return this._hasReceived(t)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:s}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(s))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var nu;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(nu||(nu={}));class Cr{constructor(t,s){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},r=>{const{onJoin:o,onLeave:i,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Cr.syncState(this.state,r,o,i),this.pendingDiffs.forEach(l=>{this.state=Cr.syncDiff(this.state,l,o,i)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},r=>{const{onJoin:o,onLeave:i,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Cr.syncDiff(this.state,r,o,i),a())}),this.onJoin((r,o,i)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:o,newPresences:i})}),this.onLeave((r,o,i)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,s,n,r){const o=this.cloneDeep(t),i=this.transformState(s),a={},l={};return this.map(o,(u,c)=>{i[u]||(l[u]=c)}),this.map(i,(u,c)=>{const d=o[u];if(d){const f=c.map(b=>b.presence_ref),h=d.map(b=>b.presence_ref),m=c.filter(b=>h.indexOf(b.presence_ref)<0),g=d.filter(b=>f.indexOf(b.presence_ref)<0);m.length>0&&(a[u]=m),g.length>0&&(l[u]=g)}else a[u]=c}),this.syncDiff(o,{joins:a,leaves:l},n,r)}static syncDiff(t,s,n,r){const{joins:o,leaves:i}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(o,(a,l)=>{var u;const c=(u=t[a])!==null&&u!==void 0?u:[];if(t[a]=this.cloneDeep(l),c.length>0){const d=t[a].map(h=>h.presence_ref),f=c.filter(h=>d.indexOf(h.presence_ref)<0);t[a].unshift(...f)}n(a,c,l)}),this.map(i,(a,l)=>{let u=t[a];if(!u)return;const c=l.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),t[a]=u,r(a,u,l),u.length===0&&delete t[a]}),t}static map(t,s){return Object.getOwnPropertyNames(t).map(n=>s(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((s,n)=>{const r=t[n];return"metas"in r?s[n]=r.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):s[n]=r,s},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ru;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(ru||(ru={}));var ou;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(ou||(ou={}));var ms;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ms||(ms={}));class Sl{constructor(t,s={config:{}},n){this.topic=t,this.params=s,this.socket=n,this.bindings={},this.state=_t.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Hi(this,It.join,this.params,this.timeout),this.rejoinTimer=new th(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=_t.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=_t.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=_t.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=_t.errored,this.rejoinTimer.scheduleTimeout())}),this._on(It.reply,{},(r,o)=>{this._trigger(this._replyEventName(o),r)}),this.presence=new Cr(this),this.broadcastEndpointURL=nh(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,s=this.timeout){var n,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:o,presence:i,private:a}}=this.params;this._onError(c=>t==null?void 0:t(ms.CHANNEL_ERROR,c)),this._onClose(()=>t==null?void 0:t(ms.CLOSED));const l={},u={broadcast:o,presence:i,postgres_changes:(r=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(c=>c.filter))!==null&&r!==void 0?r:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:c})=>{var d;if(this.socket.setAuth(),c===void 0){t==null||t(ms.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,h=(d=f==null?void 0:f.length)!==null&&d!==void 0?d:0,m=[];for(let g=0;g<h;g++){const b=f[g],{filter:{event:C,schema:E,table:P,filter:S}}=b,D=c&&c[g];if(D&&D.event===C&&D.schema===E&&D.table===P&&D.filter===S)m.push(Object.assign(Object.assign({},b),{id:D.id}));else{this.unsubscribe(),t==null||t(ms.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,t&&t(ms.SUBSCRIBED);return}}).receive("error",c=>{t==null||t(ms.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ms.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,s={}){return await this.send({type:"presence",event:"track",payload:t},s.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,s,n){return this._on(t,s,n)}async send(t,s={}){var n,r;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:i}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((r=u.body)===null||r===void 0?void 0:r.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,a,l;const u=this._push(t.type,t,s.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(i=this.params)===null||i===void 0?void 0:i.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=_t.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(It.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const r=new Hi(this,It.leave,{},t);r.receive("ok",()=>{s(),n("ok")}).receive("timeout",()=>{s(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})})}async _fetchWithTimeout(t,s,n){const r=new AbortController,o=setTimeout(()=>r.abort(),n),i=await this.socket.fetch(t,Object.assign(Object.assign({},s),{signal:r.signal}));return clearTimeout(o),i}_push(t,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Hi(this,t,s,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(t,s,n){return s}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,s,n){var r,o;const i=t.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=It;if(n&&[a,l,u,c].indexOf(i)>=0&&n!==this._joinRef())return;let f=this._onMessage(i,s,n);if(s&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(h=>{var m,g,b;return((m=h.filter)===null||m===void 0?void 0:m.event)==="*"||((b=(g=h.filter)===null||g===void 0?void 0:g.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===i}).map(h=>h.callback(f,n)):(o=this.bindings[i])===null||o===void 0||o.filter(h=>{var m,g,b,C,E,P;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in h){const S=h.id,D=(m=h.filter)===null||m===void 0?void 0:m.event;return S&&((g=s.ids)===null||g===void 0?void 0:g.includes(S))&&(D==="*"||(D==null?void 0:D.toLocaleLowerCase())===((b=s.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const S=(E=(C=h==null?void 0:h.filter)===null||C===void 0?void 0:C.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return S==="*"||S===((P=s==null?void 0:s.event)===null||P===void 0?void 0:P.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===i}).map(h=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:g,table:b,commit_timestamp:C,type:E,errors:P}=m;f=Object.assign(Object.assign({},{schema:g,table:b,commit_timestamp:C,eventType:E,new:{},old:{},errors:P}),this._getPayloadRecords(m))}h.callback(f,n)})}_isClosed(){return this.state===_t.closed}_isJoined(){return this.state===_t.joined}_isJoining(){return this.state===_t.joining}_isLeaving(){return this.state===_t.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,s,n){const r=t.toLocaleLowerCase(),o={type:r,filter:s,callback:n};return this.bindings[r]?this.bindings[r].push(o):this.bindings[r]=[o],this}_off(t,s){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(r=>{var o;return!(((o=r.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&Sl.isEqual(r.filter,s))}),this}static isEqual(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const n in t)if(t[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(It.close,{},t)}_onError(t){this._on(It.error,{},s=>t(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=_t.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const s={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(s.new=su(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(s.old=su(t.columns,t.old_record)),s}}const Mv=()=>{},Nv=typeof WebSocket<"u",Fv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Uv{constructor(t,s){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Tv,this.params={},this.timeout=eh,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Mv,this.conn=null,this.sendBuffer=[],this.serializer=new Iv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let i;return o?i=o:typeof fetch>"u"?i=(...a)=>Wn(async()=>{const{default:l}=await Promise.resolve().then(()=>tr);return{default:l}},void 0).then(({default:l})=>l(...a)):i=fetch,(...a)=>i(...a)},this.endPoint=`${t}/${Oa.websocket}`,this.httpEndpoint=nh(t),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const r=(n=s==null?void 0:s.params)===null||n===void 0?void 0:n.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(o,i)=>i(JSON.stringify(o)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new th(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(Nv){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new Vv(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Wn(async()=>{const{default:t}=await import("./browser-CrUl8MW0.js").then(s=>s.b);return{default:t}},[]).then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Pv}))}disconnect(t,s){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const s=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const t=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.disconnect(),t}log(t,s,n){this.logger(t,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case zn.connecting:return un.Connecting;case zn.open:return un.Open;case zn.closing:return un.Closing;default:return un.Closed}}isConnected(){return this.connectionState()===un.Open}channel(t,s={config:{}}){const n=new Sl(`realtime:${t}`,s,this);return this.channels.push(n),n}push(t){const{topic:s,event:n,payload:r,ref:o}=t,i=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${s} ${n} (${o})`,r),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){let s=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(s){let n=null;try{n=JSON.parse(atob(s.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=s,this.channels.forEach(r=>{s&&r.updateJoinPayload({access_token:s}),r.joinedOnce&&r._isJoined()&&r._push(It.access_token,{access_token:s})})}}async sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(Ov,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let s=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${t}"`),s.unsubscribe())}_remove(t){this.channels=this.channels.filter(s=>s._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,s=>{let{topic:n,event:r,payload:o,ref:i}=s;i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${n} ${r} ${i&&"("+i+")"||""}`,o),this.channels.filter(a=>a._isMember(n)).forEach(a=>a._trigger(r,o,i)),this.stateChangeCallbacks.message.forEach(a=>a(s))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(It.error))}_appendParams(t,s){if(Object.keys(s).length===0)return t;const n=t.match(/\?/)?"&":"?",r=new URLSearchParams(s);return`${t}${n}${r}`}_workerObjectUrl(t){let s;if(t)s=t;else{const n=new Blob([Fv],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}}class Vv{constructor(t,s,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=zn.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=n.close}}class El extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Ze(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class qv extends El{constructor(t,s){super(t),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ra extends El{constructor(t,s){super(t),this.name="StorageUnknownError",this.originalError=s}}var zv=function(e,t,s,n){function r(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function a(c){try{u(n.next(c))}catch(d){i(d)}}function l(c){try{u(n.throw(c))}catch(d){i(d)}}function u(c){c.done?o(c.value):r(c.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};const rh=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>Wn(async()=>{const{default:n}=await Promise.resolve().then(()=>tr);return{default:n}},void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)},Hv=()=>zv(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Wn(()=>Promise.resolve().then(()=>tr),void 0)).Response:Response}),$a=e=>{if(Array.isArray(e))return e.map(s=>$a(s));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([s,n])=>{const r=s.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[r]=$a(n)}),t};var mn=function(e,t,s,n){function r(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function a(c){try{u(n.next(c))}catch(d){i(d)}}function l(c){try{u(n.throw(c))}catch(d){i(d)}}function u(c){c.done?o(c.value):r(c.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};const Ki=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Kv=(e,t,s)=>mn(void 0,void 0,void 0,function*(){const n=yield Hv();e instanceof n&&!(s!=null&&s.noResolveJson)?e.json().then(r=>{t(new qv(Ki(r),e.status||500))}).catch(r=>{t(new Ra(Ki(r),r))}):t(new Ra(Ki(e),e))}),Wv=(e,t,s,n)=>{const r={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(r.body=JSON.stringify(n)),Object.assign(Object.assign({},r),s))};function Kr(e,t,s,n,r,o){return mn(this,void 0,void 0,function*(){return new Promise((i,a)=>{e(s,Wv(t,n,r,o)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>i(l)).catch(l=>Kv(l,a,n))})})}function Uo(e,t,s,n){return mn(this,void 0,void 0,function*(){return Kr(e,"GET",t,s,n)})}function js(e,t,s,n,r){return mn(this,void 0,void 0,function*(){return Kr(e,"POST",t,n,r,s)})}function Gv(e,t,s,n,r){return mn(this,void 0,void 0,function*(){return Kr(e,"PUT",t,n,r,s)})}function Jv(e,t,s,n){return mn(this,void 0,void 0,function*(){return Kr(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function oh(e,t,s,n,r){return mn(this,void 0,void 0,function*(){return Kr(e,"DELETE",t,n,r,s)})}var pt=function(e,t,s,n){function r(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function a(c){try{u(n.next(c))}catch(d){i(d)}}function l(c){try{u(n.throw(c))}catch(d){i(d)}}function u(c){c.done?o(c.value):r(c.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};const Yv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},iu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Xv{constructor(t,s={},n,r){this.url=t,this.headers=s,this.bucketId=n,this.fetch=rh(r)}uploadOrUpdate(t,s,n,r){return pt(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},iu),r);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(i.upsert)});const l=i.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.append("cacheControl",i.cacheControl),l&&o.append("metadata",this.encodeMetadata(l))):(o=n,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),r!=null&&r.headers&&(a=Object.assign(Object.assign({},a),r.headers));const u=this._removeEmptyFolders(s),c=this._getFinalPath(u),d=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:t,body:o,headers:a},i!=null&&i.duplex?{duplex:i.duplex}:{})),f=yield d.json();return d.ok?{data:{path:u,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(o){if(Ze(o))return{data:null,error:o};throw o}})}upload(t,s,n){return pt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,s,n)})}uploadToSignedUrl(t,s,n,r){return pt(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),i=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${i}`);a.searchParams.set("token",s);try{let l;const u=Object.assign({upsert:iu.upsert},r),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:c}),f=yield d.json();return d.ok?{data:{path:o,fullPath:f.Key},error:null}:{data:null,error:f}}catch(l){if(Ze(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,s){return pt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const r=Object.assign({},this.headers);s!=null&&s.upsert&&(r["x-upsert"]="true");const o=yield js(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),i=new URL(this.url+o.url),a=i.searchParams.get("token");if(!a)throw new El("No token returned by API");return{data:{signedUrl:i.toString(),path:t,token:a},error:null}}catch(n){if(Ze(n))return{data:null,error:n};throw n}})}update(t,s,n){return pt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,s,n)})}move(t,s,n){return pt(this,void 0,void 0,function*(){try{return{data:yield js(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(Ze(r))return{data:null,error:r};throw r}})}copy(t,s,n){return pt(this,void 0,void 0,function*(){try{return{data:{path:(yield js(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(Ze(r))return{data:null,error:r};throw r}})}createSignedUrl(t,s,n){return pt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t),o=yield js(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:s},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(r){if(Ze(r))return{data:null,error:r};throw r}})}createSignedUrls(t,s,n){return pt(this,void 0,void 0,function*(){try{const r=yield js(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:t},{headers:this.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:r.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(r){if(Ze(r))return{data:null,error:r};throw r}})}download(t,s){return pt(this,void 0,void 0,function*(){const r=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),i=o?`?${o}`:"";try{const a=this._getFinalPath(t);return{data:yield(yield Uo(this.fetch,`${this.url}/${r}/${a}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Ze(a))return{data:null,error:a};throw a}})}info(t){return pt(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{const n=yield Uo(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:$a(n),error:null}}catch(n){if(Ze(n))return{data:null,error:n};throw n}})}exists(t){return pt(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{return yield Jv(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Ze(n)&&n instanceof Ra){const r=n.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,s){const n=this._getFinalPath(t),r=[],o=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";o!==""&&r.push(o);const a=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});l!==""&&r.push(l);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${u}`)}}}remove(t){return pt(this,void 0,void 0,function*(){try{return{data:yield oh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(s){if(Ze(s))return{data:null,error:s};throw s}})}list(t,s,n){return pt(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},Yv),s),{prefix:t||""});return{data:yield js(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(Ze(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const s=[];return t.width&&s.push(`width=${t.width}`),t.height&&s.push(`height=${t.height}`),t.resize&&s.push(`resize=${t.resize}`),t.format&&s.push(`format=${t.format}`),t.quality&&s.push(`quality=${t.quality}`),s.join("&")}}const Qv="2.7.1",Zv={"X-Client-Info":`storage-js/${Qv}`};var An=function(e,t,s,n){function r(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function a(c){try{u(n.next(c))}catch(d){i(d)}}function l(c){try{u(n.throw(c))}catch(d){i(d)}}function u(c){c.done?o(c.value):r(c.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};class e0{constructor(t,s={},n){this.url=t,this.headers=Object.assign(Object.assign({},Zv),s),this.fetch=rh(n)}listBuckets(){return An(this,void 0,void 0,function*(){try{return{data:yield Uo(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Ze(t))return{data:null,error:t};throw t}})}getBucket(t){return An(this,void 0,void 0,function*(){try{return{data:yield Uo(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(s){if(Ze(s))return{data:null,error:s};throw s}})}createBucket(t,s={public:!1}){return An(this,void 0,void 0,function*(){try{return{data:yield js(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ze(n))return{data:null,error:n};throw n}})}updateBucket(t,s){return An(this,void 0,void 0,function*(){try{return{data:yield Gv(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ze(n))return{data:null,error:n};throw n}})}emptyBucket(t){return An(this,void 0,void 0,function*(){try{return{data:yield js(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Ze(s))return{data:null,error:s};throw s}})}deleteBucket(t){return An(this,void 0,void 0,function*(){try{return{data:yield oh(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(s){if(Ze(s))return{data:null,error:s};throw s}})}}class t0 extends e0{constructor(t,s={},n){super(t,s,n)}from(t){return new Xv(this.url,this.headers,t,this.fetch)}}const s0="2.49.4";let mr="";typeof Deno<"u"?mr="deno":typeof document<"u"?mr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?mr="react-native":mr="node";const n0={"X-Client-Info":`supabase-js-${mr}/${s0}`},r0={headers:n0},o0={schema:"public"},i0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},a0={};var l0=function(e,t,s,n){function r(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function a(c){try{u(n.next(c))}catch(d){i(d)}}function l(c){try{u(n.throw(c))}catch(d){i(d)}}function u(c){c.done?o(c.value):r(c.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};const c0=e=>{let t;return e?t=e:typeof fetch>"u"?t=Gf:t=fetch,(...s)=>t(...s)},u0=()=>typeof Headers>"u"?Jf:Headers,d0=(e,t,s)=>{const n=c0(s),r=u0();return(o,i)=>l0(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let u=new r(i==null?void 0:i.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(o,Object.assign(Object.assign({},i),{headers:u}))})};var f0=function(e,t,s,n){function r(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function a(c){try{u(n.next(c))}catch(d){i(d)}}function l(c){try{u(n.throw(c))}catch(d){i(d)}}function u(c){c.done?o(c.value):r(c.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};function h0(e){return e.replace(/\/$/,"")}function p0(e,t){const{db:s,auth:n,realtime:r,global:o}=e,{db:i,auth:a,realtime:l,global:u}=t,c={db:Object.assign(Object.assign({},i),s),auth:Object.assign(Object.assign({},a),n),realtime:Object.assign(Object.assign({},l),r),global:Object.assign(Object.assign({},u),o),accessToken:()=>f0(this,void 0,void 0,function*(){return""})};return e.accessToken?c.accessToken=e.accessToken:delete c.accessToken,c}const ih="2.69.1",Dn=30*1e3,Da=3,Wi=Da*Dn,m0="http://localhost:9999",g0="supabase.auth.token",y0={"X-Client-Info":`gotrue-js/${ih}`},La="X-Supabase-Api-Version",ah={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},v0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,_0=6e5;class Al extends Error{constructor(t,s,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function ve(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class b0 extends Al{constructor(t,s,n){super(t,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function w0(e){return ve(e)&&e.name==="AuthApiError"}class lh extends Al{constructor(t,s){super(t),this.name="AuthUnknownError",this.originalError=s}}class Qs extends Al{constructor(t,s,n,r){super(t,n,r),this.name=s,this.status=n}}class Is extends Qs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function x0(e){return ve(e)&&e.name==="AuthSessionMissingError"}class Gi extends Qs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class uo extends Qs{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class fo extends Qs{constructor(t,s=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function k0(e){return ve(e)&&e.name==="AuthImplicitGrantRedirectError"}class au extends Qs{constructor(t,s=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ja extends Qs{constructor(t,s){super(t,"AuthRetryableFetchError",s,void 0)}}function Ji(e){return ve(e)&&e.name==="AuthRetryableFetchError"}class lu extends Qs{constructor(t,s,n){super(t,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class Sr extends Qs{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const cu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),uu=` 	
\r=`.split(""),C0=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<uu.length;t+=1)e[uu[t].charCodeAt(0)]=-2;for(let t=0;t<cu.length;t+=1)e[cu[t].charCodeAt(0)]=t;return e})();function ch(e,t,s){const n=C0[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function du(e){const t=[],s=i=>{t.push(String.fromCodePoint(i))},n={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},o=i=>{A0(i,n,s)};for(let i=0;i<e.length;i+=1)ch(e.charCodeAt(i),r,o);return t.join("")}function S0(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function E0(e,t){for(let s=0;s<e.length;s+=1){let n=e.charCodeAt(s);if(n>55295&&n<=56319){const r=(n-55296)*1024&65535;n=(e.charCodeAt(s+1)-56320&65535|r)+65536,s+=1}S0(n,t)}}function A0(e,t,s){if(t.utf8seq===0){if(e<=127){s(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&s(t.codepoint)}}function T0(e){const t=[],s={queue:0,queuedBits:0},n=r=>{t.push(r)};for(let r=0;r<e.length;r+=1)ch(e.charCodeAt(r),s,n);return new Uint8Array(t)}function P0(e){const t=[];return E0(e,s=>t.push(s)),new Uint8Array(t)}function O0(e){return Math.round(Date.now()/1e3)+e}function I0(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Gt=()=>typeof window<"u"&&typeof document<"u",an={tested:!1,writable:!1},Er=()=>{if(!Gt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(an.tested)return an.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),an.tested=!0,an.writable=!0}catch{an.tested=!0,an.writable=!1}return an.writable};function R0(e){const t={},s=new URL(e);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((r,o)=>{t[o]=r})}catch{}return s.searchParams.forEach((n,r)=>{t[r]=n}),t}const uh=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>Wn(async()=>{const{default:n}=await Promise.resolve().then(()=>tr);return{default:n}},void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)},$0=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",dh=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},ho=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch{return s}},po=async(e,t)=>{await e.removeItem(t)};class di{constructor(){this.promise=new di.promiseConstructor((t,s)=>{this.resolve=t,this.reject=s})}}di.promiseConstructor=Promise;function Yi(e){const t=e.split(".");if(t.length!==3)throw new Sr("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!v0.test(t[n]))throw new Sr("JWT not in base64url format");return{header:JSON.parse(du(t[0])),payload:JSON.parse(du(t[1])),signature:T0(t[2]),raw:{header:t[0],payload:t[1]}}}async function D0(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function L0(e,t){return new Promise((n,r)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await e(o);if(!t(o,null,i)){n(i);return}}catch(i){if(!t(o,i)){r(i);return}}})()})}function j0(e){return("0"+e.toString(16)).substr(-2)}function B0(){const t=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let r="";for(let o=0;o<56;o++)r+=s.charAt(Math.floor(Math.random()*n));return r}return crypto.getRandomValues(t),Array.from(t,j0).join("")}async function M0(e){const s=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",s),r=new Uint8Array(n);return Array.from(r).map(o=>String.fromCharCode(o)).join("")}async function N0(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const s=await M0(e);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Tn(e,t,s=!1){const n=B0();let r=n;s&&(r+="/PASSWORD_RECOVERY"),await dh(e,`${t}-code-verifier`,r);const o=await N0(n);return[o,n===o?"plain":"s256"]}const F0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function U0(e){const t=e.headers.get(La);if(!t||!t.match(F0))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function V0(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function q0(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var z0=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]]);return s};const cn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),H0=[502,503,504];async function fu(e){var t;if(!$0(e))throw new ja(cn(e),0);if(H0.includes(e.status))throw new ja(cn(e),e.status);let s;try{s=await e.json()}catch(o){throw new lh(cn(o),o)}let n;const r=U0(e);if(r&&r.getTime()>=ah["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new lu(cn(s),e.status,((t=s.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Is}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new lu(cn(s),e.status,s.weak_password.reasons);throw new b0(cn(s),e.status||500,n)}const K0=(e,t,s,n)=>{const r={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),r.body=JSON.stringify(n),Object.assign(Object.assign({},r),s))};async function we(e,t,s,n){var r;const o=Object.assign({},n==null?void 0:n.headers);o[La]||(o[La]=ah["2024-01-01"].name),n!=null&&n.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const i=(r=n==null?void 0:n.query)!==null&&r!==void 0?r:{};n!=null&&n.redirectTo&&(i.redirect_to=n.redirectTo);const a=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await W0(e,t,s+a,{headers:o,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function W0(e,t,s,n,r,o){const i=K0(t,n,r,o);let a;try{a=await e(s,Object.assign({},i))}catch(l){throw console.error(l),new ja(cn(l),0)}if(a.ok||await fu(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await fu(l)}}function Rs(e){var t;let s=null;X0(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=O0(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:s,user:n},error:null}}function hu(e){const t=Rs(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ms(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function G0(e){return{data:e,error:null}}function J0(e){const{action_link:t,email_otp:s,hashed_token:n,redirect_to:r,verification_type:o}=e,i=z0(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:s,hashed_token:n,redirect_to:r,verification_type:o},l=Object.assign({},i);return{data:{properties:a,user:l},error:null}}function Y0(e){return e}function X0(e){return e.access_token&&e.refresh_token&&e.expires_in}var Q0=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]]);return s};class Z0{constructor({url:t="",headers:s={},fetch:n}){this.url=t,this.headers=s,this.fetch=uh(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,s="global"){try{return await we(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ve(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,s={}){try{return await we(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Ms})}catch(n){if(ve(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:s}=t,n=Q0(t,["options"]),r=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(r.new_email=n==null?void 0:n.newEmail,delete r.newEmail),await we(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:J0,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(ve(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(t){try{return await we(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ms})}catch(s){if(ve(s))return{data:{user:null},error:s};throw s}}async listUsers(t){var s,n,r,o,i,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await we(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=t==null?void 0:t.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(o=(r=t==null?void 0:t.perPage)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:""},xform:Y0});if(c.error)throw c.error;const d=await c.json(),f=(i=c.headers.get("x-total-count"))!==null&&i!==void 0?i:0,h=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return h.length>0&&(h.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(m.split(";")[1].split("=")[1]);u[`${b}Page`]=g}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(ve(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){try{return await we(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ms})}catch(s){if(ve(s))return{data:{user:null},error:s};throw s}}async updateUserById(t,s){try{return await we(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:s,headers:this.headers,xform:Ms})}catch(n){if(ve(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,s=!1){try{return await we(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:s},xform:Ms})}catch(n){if(ve(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){try{const{data:s,error:n}=await we(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:s,error:n}}catch(s){if(ve(s))return{data:null,error:s};throw s}}async _deleteFactor(t){try{return{data:await we(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(s){if(ve(s))return{data:null,error:s};throw s}}}const e_={getItem:e=>Er()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Er()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Er()&&globalThis.localStorage.removeItem(e)}};function pu(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}function t_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Pn={debug:!!(globalThis&&Er()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class fh extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class s_ extends fh{}async function n_(e,t,s){Pn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Pn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async r=>{if(r){Pn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await s()}finally{Pn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}else{if(t===0)throw Pn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new s_(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Pn.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}t_();const r_={url:m0,storageKey:g0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:y0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function mu(e,t,s){return await s()}class jr{constructor(t){var s,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=jr.nextInstanceID,jr.nextInstanceID+=1,this.instanceID>0&&Gt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},r_),t);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new Z0({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=uh(r.fetch),this.lock=r.lock||mu,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Gt()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=n_:this.lock=mu,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:Er()?this.storage=e_:(this.memoryStorage={},this.storage=pu(this.memoryStorage)):(this.memoryStorage={},this.storage=pu(this.memoryStorage)),Gt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ih}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const s=R0(window.location.href);let n="none";if(this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce"),Gt()&&this.detectSessionInUrl&&n!=="none"){const{data:r,error:o}=await this._getSessionFromURL(s,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),k0(o)){const l=(t=o.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:a}=r;return this._debug("#_initialize()","detected session in URL",i,"redirect type",a),await this._saveSession(i),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return ve(s)?{error:s}:{error:new lh("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var s,n,r;try{const o=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.captchaToken}},xform:Rs}),{data:i,error:a}=o;if(a||!i)return{data:{user:null,session:null},error:a};const l=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(o){if(ve(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var s,n,r;try{let o;if("email"in t){const{email:c,password:d,options:f}=t;let h=null,m=null;this.flowType==="pkce"&&([h,m]=await Tn(this.storage,this.storageKey)),o=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:c,password:d,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:h,code_challenge_method:m},xform:Rs})}else if("phone"in t){const{phone:c,password:d,options:f}=t;o=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(r=f==null?void 0:f.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Rs})}else throw new uo("You must provide either an email or phone number and a password");const{data:i,error:a}=o;if(a||!i)return{data:{user:null,session:null},error:a};const l=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(o){if(ve(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let s;if("email"in t){const{email:o,password:i,options:a}=t;s=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:hu})}else if("phone"in t){const{phone:o,password:i,options:a}=t;s=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:hu})}else throw new uo("You must provide either an email or phone number and a password");const{data:n,error:r}=s;return r?{data:{user:null,session:null},error:r}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Gi}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(s){if(ve(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(t){var s,n,r,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(r=t.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const s=await ho(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(s??"").split("/");try{const{data:o,error:i}=await we(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Rs});if(await po(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Gi}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:r??null}),error:i})}catch(o){if(ve(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:s,provider:n,token:r,access_token:o,nonce:i}=t,a=await we(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Rs}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Gi}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(s){if(ve(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(t){var s,n,r,o,i;try{if("email"in t){const{email:a,options:l}=t;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await Tn(this.storage,this.storageKey));const{error:d}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in t){const{phone:a,options:l}=t,{data:u,error:c}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(o=l==null?void 0:l.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(i=l==null?void 0:l.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new uo("You must provide either an email or phone number.")}catch(a){if(ve(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var s,n;try{let r,o;"options"in t&&(r=(s=t.options)===null||s===void 0?void 0:s.redirectTo,o=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:i,error:a}=await we(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:r,xform:Rs});if(a)throw a;if(!i)throw new Error("An error occurred on token verification.");const l=i.session,u=i.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(r){if(ve(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(t){var s,n,r;try{let o=null,i=null;return this.flowType==="pkce"&&([o,i]=await Tn(this.storage,this.storageKey)),await we(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(s=t.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((r=t==null?void 0:t.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:G0})}catch(o){if(ve(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:s},error:n}=t;if(n)throw n;if(!s)throw new Is;const{error:r}=await we(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:r}})}catch(t){if(ve(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const s=`${this.url}/resend`;if("email"in t){const{email:n,type:r,options:o}=t,{error:i}=await we(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in t){const{phone:n,type:r,options:o}=t,{data:i,error:a}=await we(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:a}}throw new uo("You must provide either an email or phone number and a type")}catch(s){if(ve(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(t,s){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await t(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const s=await ho(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?t=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Wi:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let i=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,u,c)=>(!i&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:t},error:null}}const{session:r,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ms}):await this._useSession(async s=>{var n,r,o;const{data:i,error:a}=s;if(a)throw a;return!(!((n=i.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Is}:await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&o!==void 0?o:void 0,xform:Ms})})}catch(s){if(ve(s))return x0(s)&&(await this._removeSession(),await po(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(t,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,s))}async _updateUser(t,s={}){try{return await this._useSession(async n=>{const{data:r,error:o}=n;if(o)throw o;if(!r.session)throw new Is;const i=r.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await Tn(this.storage,this.storageKey));const{data:u,error:c}=await we(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:i.access_token,xform:Ms});if(c)throw c;return i.user=u.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(n){if(ve(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Is;const s=Date.now()/1e3;let n=s,r=!0,o=null;const{payload:i}=Yi(t.access_token);if(i.exp&&(n=i.exp,r=n<=s),r){const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};o=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;o={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(s){if(ve(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async s=>{var n;if(!t){const{data:i,error:a}=s;if(a)throw a;t=(n=i.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Is;const{session:r,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(ve(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(t,s){try{if(!Gt())throw new fo("No browser detected.");if(t.error||t.error_description||t.error_code)throw new fo(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new au("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new fo("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new au("No code detected.");const{data:E,error:P}=await this._exchangeCodeForSession(t.code);if(P)throw P;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:o,refresh_token:i,expires_in:a,expires_at:l,token_type:u}=t;if(!o||!a||!i||!u)throw new fo("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(a);let f=c+d;l&&(f=parseInt(l));const h=f-c;h*1e3<=Dn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const m=f-d;c-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,c):c-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,c);const{data:g,error:b}=await this._getUser(o);if(b)throw b;const C={provider_token:n,provider_refresh_token:r,access_token:o,expires_in:d,expires_at:f,refresh_token:i,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:C,redirectType:t.type},error:null}}catch(n){if(ve(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const s=await ho(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&s)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:r,error:o}=s;if(o)return{error:o};const i=(n=r.session)===null||n===void 0?void 0:n.access_token;if(i){const{error:a}=await this.admin.signOut(i,t);if(a&&!(w0(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await po(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const s=I0(),n={id:s,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async s=>{var n,r;try{const{data:{session:o},error:i}=s;if(i)throw i;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,s={}){let n=null,r=null;this.flowType==="pkce"&&([n,r]=await Tn(this.storage,this.storageKey,!0));try{return await we(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(o){if(ve(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=s.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(s){if(ve(s))return{data:null,error:s};throw s}}async linkIdentity(t){var s;try{const{data:n,error:r}=await this._useSession(async o=>{var i,a,l,u,c;const{data:d,error:f}=o;if(f)throw f;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await we(this.fetch,"GET",h,{headers:this.headers,jwt:(c=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(r)throw r;return Gt()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(ve(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async s=>{var n,r;const{data:o,error:i}=s;if(i)throw i;return await we(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(r=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:void 0})})}catch(s){if(ve(s))return{data:null,error:s};throw s}}async _refreshAccessToken(t){const s=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await L0(async r=>(r>0&&await D0(200*Math.pow(2,r-1)),this._debug(s,"refreshing attempt",r),await we(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Rs})),(r,o)=>{const i=200*Math.pow(2,r);return o&&Ji(o)&&Date.now()+i-n<Dn})}catch(n){if(this._debug(s,"error",n),ve(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",s,"url",n),Gt()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await ho(this.storage,this.storageKey);if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const r=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Wi;if(this._debug(s,`session has${r?"":" not"} expired with margin of ${Wi}s`),r){if(this.autoRefreshToken&&n.refresh_token){const{error:o}=await this._callRefreshToken(n.refresh_token);o&&(console.error(o),Ji(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var s,n;if(!t)throw new Is;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new di;const{data:o,error:i}=await this._refreshAccessToken(t);if(i)throw i;if(!o.session)throw new Is;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const a={session:o.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(o){if(this._debug(r,"error",o),ve(o)){const i={session:null,error:o};return Ji(o)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(i),i}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(t,s,n=!0){const r=`#_notifyAllSubscribers(${t})`;this._debug(r,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:s});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,s)}catch(l){o.push(l)}});if(await Promise.all(i),o.length>0){for(let a=0;a<o.length;a+=1)console.error(o[a]);throw o[0]}}finally{this._debug(r,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await dh(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await po(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Gt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Dn);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((n.expires_at*1e3-t)/Dn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Dn}ms, refresh threshold is ${Da} ticks`),r<=Da&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof fh)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Gt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const s=`#_onVisibilityChanged(${t})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,s,n){const r=[`provider=${encodeURIComponent(s)}`];if(n!=null&&n.redirectTo&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,i]=await Tn(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});r.push(a.toString())}if(n!=null&&n.queryParams){const o=new URLSearchParams(n.queryParams);r.push(o.toString())}return n!=null&&n.skipBrowserRedirect&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${r.join("&")}`}async _unenroll(t){try{return await this._useSession(async s=>{var n;const{data:r,error:o}=s;return o?{data:null,error:o}:await we(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(ve(s))return{data:null,error:s};throw s}}async _enroll(t){try{return await this._useSession(async s=>{var n,r;const{data:o,error:i}=s;if(i)return{data:null,error:i};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:u}=await we(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((r=l==null?void 0:l.totp)===null||r===void 0)&&r.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(s){if(ve(s))return{data:null,error:s};throw s}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:o}=s;if(o)return{data:null,error:o};const{data:i,error:a}=await we(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:a})})}catch(s){if(ve(s))return{data:null,error:s};throw s}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:o}=s;return o?{data:null,error:o}:await we(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(ve(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(t){const{data:s,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:s.id,code:t.code})}async _listFactors(){const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=(t==null?void 0:t.factors)||[],r=n.filter(i=>i.factor_type==="totp"&&i.status==="verified"),o=n.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:n,totp:r,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var s,n;const{data:{session:r},error:o}=t;if(o)return{data:null,error:o};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Yi(r.access_token);let a=null;i.aal&&(a=i.aal);let l=a;((n=(s=r.user.factors)===null||s===void 0?void 0:s.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const c=i.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(t,s={keys:[]}){let n=s.keys.find(i=>i.kid===t);if(n||(n=this.jwks.keys.find(i=>i.kid===t),n&&this.jwks_cached_at+_0>Date.now()))return n;const{data:r,error:o}=await we(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;if(!r.keys||r.keys.length===0)throw new Sr("JWKS is empty");if(this.jwks=r,this.jwks_cached_at=Date.now(),n=r.keys.find(i=>i.kid===t),!n)throw new Sr("No matching signing key found in JWKS");return n}async getClaims(t,s={keys:[]}){try{let n=t;if(!n){const{data:h,error:m}=await this.getSession();if(m||!h.session)return{data:null,error:m};n=h.session.access_token}const{header:r,payload:o,signature:i,raw:{header:a,payload:l}}=Yi(n);if(V0(o.exp),!r.kid||r.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:h}=await this.getUser(n);if(h)throw h;return{data:{claims:o,header:r,signature:i},error:null}}const u=q0(r.alg),c=await this.fetchJwk(r.kid,s),d=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,d,i,P0(`${a}.${l}`)))throw new Sr("Invalid JWT signature");return{data:{claims:o,header:r,signature:i},error:null}}catch(n){if(ve(n))return{data:null,error:n};throw n}}}jr.nextInstanceID=0;const o_=jr;class i_ extends o_{constructor(t){super(t)}}var a_=function(e,t,s,n){function r(o){return o instanceof s?o:new s(function(i){i(o)})}return new(s||(s=Promise))(function(o,i){function a(c){try{u(n.next(c))}catch(d){i(d)}}function l(c){try{u(n.throw(c))}catch(d){i(d)}}function u(c){c.done?o(c.value):r(c.value).then(a,l)}u((n=n.apply(e,t||[])).next())})};class l_{constructor(t,s,n){var r,o,i;if(this.supabaseUrl=t,this.supabaseKey=s,!t)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const a=h0(t);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:o0,realtime:a0,auth:Object.assign(Object.assign({},i0),{storageKey:l}),global:r0},c=p0(n??{},u);this.storageKey=(r=c.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(o=c.global.headers)!==null&&o!==void 0?o:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=c.auth)!==null&&i!==void 0?i:{},this.headers,c.global.fetch),this.fetch=d0(s,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new Ev(`${a}/rest/v1`,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),c.accessToken||this._listenForAuthEvents()}get functions(){return new fv(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new t0(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,s={},n={}){return this.rest.rpc(t,s,n)}channel(t,s={config:{}}){return this.realtime.channel(t,s)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,s;return a_(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(s=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:s,detectSessionInUrl:n,storage:r,storageKey:o,flowType:i,lock:a,debug:l},u,c){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new i_({url:this.authUrl,headers:Object.assign(Object.assign({},d),u),storageKey:o,autoRefreshToken:t,persistSession:s,detectSessionInUrl:n,storage:r,flowType:i,lock:a,debug:l,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new Uv(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,s,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const c_=(e,t,s)=>new l_(e,t,s),u_="https://wpwichwnfgbpggcqujld.supabase.co",d_="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Indwd2ljaHduZmdicGdnY3F1amxkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA2NjAzMDcsImV4cCI6MjA1NjIzNjMwN30.y0QCwf--milc8b-3TjJvE-hHIFPKm8QqONFI8m7AjL4",St=c_(u_,d_,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:{getItem:e=>{try{return JSON.parse(localStorage.getItem(e)||"")}catch{return null}},setItem:(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},removeItem:e=>{localStorage.removeItem(e)}}}});function Ye(...e){return rv(Bf(e))}async function Be(e,t={}){var c,d;const n=`http://localhost:5001${e.startsWith("/")?e:`/${e}`}`,{data:r}=await St.auth.getSession(),o=(c=r.session)==null?void 0:c.access_token,i=t.body instanceof FormData,a={...o&&{Authorization:`Bearer ${o}`},...t.headers};i||(a["Content-Type"]="application/json");const l={...t,headers:a},u=await fetch(n,l);if(u.status===401&&console.error("Unauthorized - session may have expired"),(d=u.headers.get("content-type"))!=null&&d.includes("application/json")){const f=await u.json();if(!u.ok)throw new Error(f.error||"API request failed");return f}if(!u.ok)throw new Error("API request failed");return await u.text()}const f_=["top","right","bottom","left"],qs=Math.min,bt=Math.max,Vo=Math.round,mo=Math.floor,Qt=e=>({x:e,y:e}),h_={left:"right",right:"left",bottom:"top",top:"bottom"},p_={start:"end",end:"start"};function Ba(e,t,s){return bt(e,qs(t,s))}function ws(e,t){return typeof e=="function"?e(t):e}function xs(e){return e.split("-")[0]}function sr(e){return e.split("-")[1]}function Tl(e){return e==="x"?"y":"x"}function Pl(e){return e==="y"?"height":"width"}function vs(e){return["top","bottom"].includes(xs(e))?"y":"x"}function Ol(e){return Tl(vs(e))}function m_(e,t,s){s===void 0&&(s=!1);const n=sr(e),r=Ol(e),o=Pl(r);let i=r==="x"?n===(s?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=qo(i)),[i,qo(i)]}function g_(e){const t=qo(e);return[Ma(e),t,Ma(t)]}function Ma(e){return e.replace(/start|end/g,t=>p_[t])}function y_(e,t,s){const n=["left","right"],r=["right","left"],o=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return s?t?r:n:t?n:r;case"left":case"right":return t?o:i;default:return[]}}function v_(e,t,s,n){const r=sr(e);let o=y_(xs(e),s==="start",n);return r&&(o=o.map(i=>i+"-"+r),t&&(o=o.concat(o.map(Ma)))),o}function qo(e){return e.replace(/left|right|bottom|top/g,t=>h_[t])}function __(e){return{top:0,right:0,bottom:0,left:0,...e}}function hh(e){return typeof e!="number"?__(e):{top:e,right:e,bottom:e,left:e}}function zo(e){const{x:t,y:s,width:n,height:r}=e;return{width:n,height:r,top:s,left:t,right:t+n,bottom:s+r,x:t,y:s}}function gu(e,t,s){let{reference:n,floating:r}=e;const o=vs(t),i=Ol(t),a=Pl(i),l=xs(t),u=o==="y",c=n.x+n.width/2-r.width/2,d=n.y+n.height/2-r.height/2,f=n[a]/2-r[a]/2;let h;switch(l){case"top":h={x:c,y:n.y-r.height};break;case"bottom":h={x:c,y:n.y+n.height};break;case"right":h={x:n.x+n.width,y:d};break;case"left":h={x:n.x-r.width,y:d};break;default:h={x:n.x,y:n.y}}switch(sr(t)){case"start":h[i]-=f*(s&&u?-1:1);break;case"end":h[i]+=f*(s&&u?-1:1);break}return h}const b_=async(e,t,s)=>{const{placement:n="bottom",strategy:r="absolute",middleware:o=[],platform:i}=s,a=o.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(t));let u=await i.getElementRects({reference:e,floating:t,strategy:r}),{x:c,y:d}=gu(u,n,l),f=n,h={},m=0;for(let g=0;g<a.length;g++){const{name:b,fn:C}=a[g],{x:E,y:P,data:S,reset:D}=await C({x:c,y:d,initialPlacement:n,placement:f,strategy:r,middlewareData:h,rects:u,platform:i,elements:{reference:e,floating:t}});c=E??c,d=P??d,h={...h,[b]:{...h[b],...S}},D&&m<=50&&(m++,typeof D=="object"&&(D.placement&&(f=D.placement),D.rects&&(u=D.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:r}):D.rects),{x:c,y:d}=gu(u,f,l)),g=-1)}return{x:c,y:d,placement:f,strategy:r,middlewareData:h}};async function Br(e,t){var s;t===void 0&&(t={});const{x:n,y:r,platform:o,rects:i,elements:a,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=ws(t,e),m=hh(h),b=a[f?d==="floating"?"reference":"floating":d],C=zo(await o.getClippingRect({element:(s=await(o.isElement==null?void 0:o.isElement(b)))==null||s?b:b.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),E=d==="floating"?{x:n,y:r,width:i.floating.width,height:i.floating.height}:i.reference,P=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),S=await(o.isElement==null?void 0:o.isElement(P))?await(o.getScale==null?void 0:o.getScale(P))||{x:1,y:1}:{x:1,y:1},D=zo(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:E,offsetParent:P,strategy:l}):E);return{top:(C.top-D.top+m.top)/S.y,bottom:(D.bottom-C.bottom+m.bottom)/S.y,left:(C.left-D.left+m.left)/S.x,right:(D.right-C.right+m.right)/S.x}}const w_=e=>({name:"arrow",options:e,async fn(t){const{x:s,y:n,placement:r,rects:o,platform:i,elements:a,middlewareData:l}=t,{element:u,padding:c=0}=ws(e,t)||{};if(u==null)return{};const d=hh(c),f={x:s,y:n},h=Ol(r),m=Pl(h),g=await i.getDimensions(u),b=h==="y",C=b?"top":"left",E=b?"bottom":"right",P=b?"clientHeight":"clientWidth",S=o.reference[m]+o.reference[h]-f[h]-o.floating[m],D=f[h]-o.reference[h],W=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let I=W?W[P]:0;(!I||!await(i.isElement==null?void 0:i.isElement(W)))&&(I=a.floating[P]||o.floating[m]);const O=S/2-D/2,A=I/2-g[m]/2-1,F=qs(d[C],A),q=qs(d[E],A),j=F,ie=I-g[m]-q,de=I/2-g[m]/2+O,ye=Ba(j,de,ie),me=!l.arrow&&sr(r)!=null&&de!==ye&&o.reference[m]/2-(de<j?F:q)-g[m]/2<0,ae=me?de<j?de-j:de-ie:0;return{[h]:f[h]+ae,data:{[h]:ye,centerOffset:de-ye-ae,...me&&{alignmentOffset:ae}},reset:me}}}),x_=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var s,n;const{placement:r,middlewareData:o,rects:i,initialPlacement:a,platform:l,elements:u}=t,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...b}=ws(e,t);if((s=o.arrow)!=null&&s.alignmentOffset)return{};const C=xs(r),E=vs(a),P=xs(a)===a,S=await(l.isRTL==null?void 0:l.isRTL(u.floating)),D=f||(P||!g?[qo(a)]:g_(a)),W=m!=="none";!f&&W&&D.push(...v_(a,g,m,S));const I=[a,...D],O=await Br(t,b),A=[];let F=((n=o.flip)==null?void 0:n.overflows)||[];if(c&&A.push(O[C]),d){const ye=m_(r,i,S);A.push(O[ye[0]],O[ye[1]])}if(F=[...F,{placement:r,overflows:A}],!A.every(ye=>ye<=0)){var q,j;const ye=(((q=o.flip)==null?void 0:q.index)||0)+1,me=I[ye];if(me){var ie;const z=d==="alignment"?E!==vs(me):!1,Fe=((ie=F[0])==null?void 0:ie.overflows[0])>0;if(!z||Fe)return{data:{index:ye,overflows:F},reset:{placement:me}}}let ae=(j=F.filter(z=>z.overflows[0]<=0).sort((z,Fe)=>z.overflows[1]-Fe.overflows[1])[0])==null?void 0:j.placement;if(!ae)switch(h){case"bestFit":{var de;const z=(de=F.filter(Fe=>{if(W){const He=vs(Fe.placement);return He===E||He==="y"}return!0}).map(Fe=>[Fe.placement,Fe.overflows.filter(He=>He>0).reduce((He,it)=>He+it,0)]).sort((Fe,He)=>Fe[1]-He[1])[0])==null?void 0:de[0];z&&(ae=z);break}case"initialPlacement":ae=a;break}if(r!==ae)return{reset:{placement:ae}}}return{}}}};function yu(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function vu(e){return f_.some(t=>e[t]>=0)}const k_=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:s}=t,{strategy:n="referenceHidden",...r}=ws(e,t);switch(n){case"referenceHidden":{const o=await Br(t,{...r,elementContext:"reference"}),i=yu(o,s.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:vu(i)}}}case"escaped":{const o=await Br(t,{...r,altBoundary:!0}),i=yu(o,s.floating);return{data:{escapedOffsets:i,escaped:vu(i)}}}default:return{}}}}};async function C_(e,t){const{placement:s,platform:n,elements:r}=e,o=await(n.isRTL==null?void 0:n.isRTL(r.floating)),i=xs(s),a=sr(s),l=vs(s)==="y",u=["left","top"].includes(i)?-1:1,c=o&&l?-1:1,d=ws(t,e);let{mainAxis:f,crossAxis:h,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof m=="number"&&(h=a==="end"?m*-1:m),l?{x:h*c,y:f*u}:{x:f*u,y:h*c}}const S_=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var s,n;const{x:r,y:o,placement:i,middlewareData:a}=t,l=await C_(t,e);return i===((s=a.offset)==null?void 0:s.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:r+l.x,y:o+l.y,data:{...l,placement:i}}}}},E_=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:s,y:n,placement:r}=t,{mainAxis:o=!0,crossAxis:i=!1,limiter:a={fn:b=>{let{x:C,y:E}=b;return{x:C,y:E}}},...l}=ws(e,t),u={x:s,y:n},c=await Br(t,l),d=vs(xs(r)),f=Tl(d);let h=u[f],m=u[d];if(o){const b=f==="y"?"top":"left",C=f==="y"?"bottom":"right",E=h+c[b],P=h-c[C];h=Ba(E,h,P)}if(i){const b=d==="y"?"top":"left",C=d==="y"?"bottom":"right",E=m+c[b],P=m-c[C];m=Ba(E,m,P)}const g=a.fn({...t,[f]:h,[d]:m});return{...g,data:{x:g.x-s,y:g.y-n,enabled:{[f]:o,[d]:i}}}}}},A_=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:s,y:n,placement:r,rects:o,middlewareData:i}=t,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=ws(e,t),c={x:s,y:n},d=vs(r),f=Tl(d);let h=c[f],m=c[d];const g=ws(a,t),b=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const P=f==="y"?"height":"width",S=o.reference[f]-o.floating[P]+b.mainAxis,D=o.reference[f]+o.reference[P]-b.mainAxis;h<S?h=S:h>D&&(h=D)}if(u){var C,E;const P=f==="y"?"width":"height",S=["top","left"].includes(xs(r)),D=o.reference[d]-o.floating[P]+(S&&((C=i.offset)==null?void 0:C[d])||0)+(S?0:b.crossAxis),W=o.reference[d]+o.reference[P]+(S?0:((E=i.offset)==null?void 0:E[d])||0)-(S?b.crossAxis:0);m<D?m=D:m>W&&(m=W)}return{[f]:h,[d]:m}}}},T_=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var s,n;const{placement:r,rects:o,platform:i,elements:a}=t,{apply:l=()=>{},...u}=ws(e,t),c=await Br(t,u),d=xs(r),f=sr(r),h=vs(r)==="y",{width:m,height:g}=o.floating;let b,C;d==="top"||d==="bottom"?(b=d,C=f===(await(i.isRTL==null?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(C=d,b=f==="end"?"top":"bottom");const E=g-c.top-c.bottom,P=m-c.left-c.right,S=qs(g-c[b],E),D=qs(m-c[C],P),W=!t.middlewareData.shift;let I=S,O=D;if((s=t.middlewareData.shift)!=null&&s.enabled.x&&(O=P),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(I=E),W&&!f){const F=bt(c.left,0),q=bt(c.right,0),j=bt(c.top,0),ie=bt(c.bottom,0);h?O=m-2*(F!==0||q!==0?F+q:bt(c.left,c.right)):I=g-2*(j!==0||ie!==0?j+ie:bt(c.top,c.bottom))}await l({...t,availableWidth:O,availableHeight:I});const A=await i.getDimensions(a.floating);return m!==A.width||g!==A.height?{reset:{rects:!0}}:{}}}};function fi(){return typeof window<"u"}function gn(e){return Il(e)?(e.nodeName||"").toLowerCase():"#document"}function Et(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ls(e){var t;return(t=(Il(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Il(e){return fi()?e instanceof Node||e instanceof Et(e).Node:!1}function Mt(e){return fi()?e instanceof Element||e instanceof Et(e).Element:!1}function rs(e){return fi()?e instanceof HTMLElement||e instanceof Et(e).HTMLElement:!1}function _u(e){return!fi()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Et(e).ShadowRoot}function Wr(e){const{overflow:t,overflowX:s,overflowY:n,display:r}=Nt(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+s)&&!["inline","contents"].includes(r)}function P_(e){return["table","td","th"].includes(gn(e))}function hi(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Rl(e){const t=$l(),s=Mt(e)?Nt(e):e;return["transform","translate","scale","rotate","perspective"].some(n=>s[n]?s[n]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!t&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!t&&(s.filter?s.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(s.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(s.contain||"").includes(n))}function O_(e){let t=zs(e);for(;rs(t)&&!Jn(t);){if(Rl(t))return t;if(hi(t))return null;t=zs(t)}return null}function $l(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Jn(e){return["html","body","#document"].includes(gn(e))}function Nt(e){return Et(e).getComputedStyle(e)}function pi(e){return Mt(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function zs(e){if(gn(e)==="html")return e;const t=e.assignedSlot||e.parentNode||_u(e)&&e.host||ls(e);return _u(t)?t.host:t}function ph(e){const t=zs(e);return Jn(t)?e.ownerDocument?e.ownerDocument.body:e.body:rs(t)&&Wr(t)?t:ph(t)}function Mr(e,t,s){var n;t===void 0&&(t=[]),s===void 0&&(s=!0);const r=ph(e),o=r===((n=e.ownerDocument)==null?void 0:n.body),i=Et(r);if(o){const a=Na(i);return t.concat(i,i.visualViewport||[],Wr(r)?r:[],a&&s?Mr(a):[])}return t.concat(r,Mr(r,[],s))}function Na(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function mh(e){const t=Nt(e);let s=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const r=rs(e),o=r?e.offsetWidth:s,i=r?e.offsetHeight:n,a=Vo(s)!==o||Vo(n)!==i;return a&&(s=o,n=i),{width:s,height:n,$:a}}function Dl(e){return Mt(e)?e:e.contextElement}function Hn(e){const t=Dl(e);if(!rs(t))return Qt(1);const s=t.getBoundingClientRect(),{width:n,height:r,$:o}=mh(t);let i=(o?Vo(s.width):s.width)/n,a=(o?Vo(s.height):s.height)/r;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const I_=Qt(0);function gh(e){const t=Et(e);return!$l()||!t.visualViewport?I_:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function R_(e,t,s){return t===void 0&&(t=!1),!s||t&&s!==Et(e)?!1:t}function pn(e,t,s,n){t===void 0&&(t=!1),s===void 0&&(s=!1);const r=e.getBoundingClientRect(),o=Dl(e);let i=Qt(1);t&&(n?Mt(n)&&(i=Hn(n)):i=Hn(e));const a=R_(o,s,n)?gh(o):Qt(0);let l=(r.left+a.x)/i.x,u=(r.top+a.y)/i.y,c=r.width/i.x,d=r.height/i.y;if(o){const f=Et(o),h=n&&Mt(n)?Et(n):n;let m=f,g=Na(m);for(;g&&n&&h!==m;){const b=Hn(g),C=g.getBoundingClientRect(),E=Nt(g),P=C.left+(g.clientLeft+parseFloat(E.paddingLeft))*b.x,S=C.top+(g.clientTop+parseFloat(E.paddingTop))*b.y;l*=b.x,u*=b.y,c*=b.x,d*=b.y,l+=P,u+=S,m=Et(g),g=Na(m)}}return zo({width:c,height:d,x:l,y:u})}function Ll(e,t){const s=pi(e).scrollLeft;return t?t.left+s:pn(ls(e)).left+s}function yh(e,t,s){s===void 0&&(s=!1);const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-(s?0:Ll(e,n)),o=n.top+t.scrollTop;return{x:r,y:o}}function $_(e){let{elements:t,rect:s,offsetParent:n,strategy:r}=e;const o=r==="fixed",i=ls(n),a=t?hi(t.floating):!1;if(n===i||a&&o)return s;let l={scrollLeft:0,scrollTop:0},u=Qt(1);const c=Qt(0),d=rs(n);if((d||!d&&!o)&&((gn(n)!=="body"||Wr(i))&&(l=pi(n)),rs(n))){const h=pn(n);u=Hn(n),c.x=h.x+n.clientLeft,c.y=h.y+n.clientTop}const f=i&&!d&&!o?yh(i,l,!0):Qt(0);return{width:s.width*u.x,height:s.height*u.y,x:s.x*u.x-l.scrollLeft*u.x+c.x+f.x,y:s.y*u.y-l.scrollTop*u.y+c.y+f.y}}function D_(e){return Array.from(e.getClientRects())}function L_(e){const t=ls(e),s=pi(e),n=e.ownerDocument.body,r=bt(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),o=bt(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let i=-s.scrollLeft+Ll(e);const a=-s.scrollTop;return Nt(n).direction==="rtl"&&(i+=bt(t.clientWidth,n.clientWidth)-r),{width:r,height:o,x:i,y:a}}function j_(e,t){const s=Et(e),n=ls(e),r=s.visualViewport;let o=n.clientWidth,i=n.clientHeight,a=0,l=0;if(r){o=r.width,i=r.height;const u=$l();(!u||u&&t==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:o,height:i,x:a,y:l}}function B_(e,t){const s=pn(e,!0,t==="fixed"),n=s.top+e.clientTop,r=s.left+e.clientLeft,o=rs(e)?Hn(e):Qt(1),i=e.clientWidth*o.x,a=e.clientHeight*o.y,l=r*o.x,u=n*o.y;return{width:i,height:a,x:l,y:u}}function bu(e,t,s){let n;if(t==="viewport")n=j_(e,s);else if(t==="document")n=L_(ls(e));else if(Mt(t))n=B_(t,s);else{const r=gh(e);n={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return zo(n)}function vh(e,t){const s=zs(e);return s===t||!Mt(s)||Jn(s)?!1:Nt(s).position==="fixed"||vh(s,t)}function M_(e,t){const s=t.get(e);if(s)return s;let n=Mr(e,[],!1).filter(a=>Mt(a)&&gn(a)!=="body"),r=null;const o=Nt(e).position==="fixed";let i=o?zs(e):e;for(;Mt(i)&&!Jn(i);){const a=Nt(i),l=Rl(i);!l&&a.position==="fixed"&&(r=null),(o?!l&&!r:!l&&a.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||Wr(i)&&!l&&vh(e,i))?n=n.filter(c=>c!==i):r=a,i=zs(i)}return t.set(e,n),n}function N_(e){let{element:t,boundary:s,rootBoundary:n,strategy:r}=e;const i=[...s==="clippingAncestors"?hi(t)?[]:M_(t,this._c):[].concat(s),n],a=i[0],l=i.reduce((u,c)=>{const d=bu(t,c,r);return u.top=bt(d.top,u.top),u.right=qs(d.right,u.right),u.bottom=qs(d.bottom,u.bottom),u.left=bt(d.left,u.left),u},bu(t,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function F_(e){const{width:t,height:s}=mh(e);return{width:t,height:s}}function U_(e,t,s){const n=rs(t),r=ls(t),o=s==="fixed",i=pn(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const l=Qt(0);function u(){l.x=Ll(r)}if(n||!n&&!o)if((gn(t)!=="body"||Wr(r))&&(a=pi(t)),n){const h=pn(t,!0,o,t);l.x=h.x+t.clientLeft,l.y=h.y+t.clientTop}else r&&u();o&&!n&&r&&u();const c=r&&!n&&!o?yh(r,a):Qt(0),d=i.left+a.scrollLeft-l.x-c.x,f=i.top+a.scrollTop-l.y-c.y;return{x:d,y:f,width:i.width,height:i.height}}function Xi(e){return Nt(e).position==="static"}function wu(e,t){if(!rs(e)||Nt(e).position==="fixed")return null;if(t)return t(e);let s=e.offsetParent;return ls(e)===s&&(s=s.ownerDocument.body),s}function _h(e,t){const s=Et(e);if(hi(e))return s;if(!rs(e)){let r=zs(e);for(;r&&!Jn(r);){if(Mt(r)&&!Xi(r))return r;r=zs(r)}return s}let n=wu(e,t);for(;n&&P_(n)&&Xi(n);)n=wu(n,t);return n&&Jn(n)&&Xi(n)&&!Rl(n)?s:n||O_(e)||s}const V_=async function(e){const t=this.getOffsetParent||_h,s=this.getDimensions,n=await s(e.floating);return{reference:U_(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function q_(e){return Nt(e).direction==="rtl"}const z_={convertOffsetParentRelativeRectToViewportRelativeRect:$_,getDocumentElement:ls,getClippingRect:N_,getOffsetParent:_h,getElementRects:V_,getClientRects:D_,getDimensions:F_,getScale:Hn,isElement:Mt,isRTL:q_};function bh(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function H_(e,t){let s=null,n;const r=ls(e);function o(){var a;clearTimeout(n),(a=s)==null||a.disconnect(),s=null}function i(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();const u=e.getBoundingClientRect(),{left:c,top:d,width:f,height:h}=u;if(a||t(),!f||!h)return;const m=mo(d),g=mo(r.clientWidth-(c+f)),b=mo(r.clientHeight-(d+h)),C=mo(c),P={rootMargin:-m+"px "+-g+"px "+-b+"px "+-C+"px",threshold:bt(0,qs(1,l))||1};let S=!0;function D(W){const I=W[0].intersectionRatio;if(I!==l){if(!S)return i();I?i(!1,I):n=setTimeout(()=>{i(!1,1e-7)},1e3)}I===1&&!bh(u,e.getBoundingClientRect())&&i(),S=!1}try{s=new IntersectionObserver(D,{...P,root:r.ownerDocument})}catch{s=new IntersectionObserver(D,P)}s.observe(e)}return i(!0),o}function K_(e,t,s,n){n===void 0&&(n={});const{ancestorScroll:r=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,u=Dl(e),c=r||o?[...u?Mr(u):[],...Mr(t)]:[];c.forEach(C=>{r&&C.addEventListener("scroll",s,{passive:!0}),o&&C.addEventListener("resize",s)});const d=u&&a?H_(u,s):null;let f=-1,h=null;i&&(h=new ResizeObserver(C=>{let[E]=C;E&&E.target===u&&h&&(h.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var P;(P=h)==null||P.observe(t)})),s()}),u&&!l&&h.observe(u),h.observe(t));let m,g=l?pn(e):null;l&&b();function b(){const C=pn(e);g&&!bh(g,C)&&s(),g=C,m=requestAnimationFrame(b)}return s(),()=>{var C;c.forEach(E=>{r&&E.removeEventListener("scroll",s),o&&E.removeEventListener("resize",s)}),d==null||d(),(C=h)==null||C.disconnect(),h=null,l&&cancelAnimationFrame(m)}}const W_=S_,G_=E_,xu=x_,J_=T_,Y_=k_,X_=w_,Q_=A_,Z_=(e,t,s)=>{const n=new Map,r={platform:z_,...s},o={...r.platform,_c:n};return b_(e,t,{...r,platform:o})};function eb(e){return e!=null&&typeof e=="object"&&"$el"in e}function Fa(e){if(eb(e)){const t=e.$el;return Il(t)&&gn(t)==="#comment"?null:t}return e}function Ln(e){return typeof e=="function"?e():x(e)}function tb(e){return{name:"arrow",options:e,fn(t){const s=Fa(Ln(e.element));return s==null?{}:X_({element:s,padding:e.padding}).fn(t)}}}function wh(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function ku(e,t){const s=wh(e);return Math.round(t*s)/s}function sb(e,t,s){s===void 0&&(s={});const n=s.whileElementsMounted,r=ne(()=>{var I;return(I=Ln(s.open))!=null?I:!0}),o=ne(()=>Ln(s.middleware)),i=ne(()=>{var I;return(I=Ln(s.placement))!=null?I:"bottom"}),a=ne(()=>{var I;return(I=Ln(s.strategy))!=null?I:"absolute"}),l=ne(()=>{var I;return(I=Ln(s.transform))!=null?I:!0}),u=ne(()=>Fa(e.value)),c=ne(()=>Fa(t.value)),d=ee(0),f=ee(0),h=ee(a.value),m=ee(i.value),g=ni({}),b=ee(!1),C=ne(()=>{const I={position:h.value,left:"0",top:"0"};if(!c.value)return I;const O=ku(c.value,d.value),A=ku(c.value,f.value);return l.value?{...I,transform:"translate("+O+"px, "+A+"px)",...wh(c.value)>=1.5&&{willChange:"transform"}}:{position:h.value,left:O+"px",top:A+"px"}});let E;function P(){if(u.value==null||c.value==null)return;const I=r.value;Z_(u.value,c.value,{middleware:o.value,placement:i.value,strategy:a.value}).then(O=>{d.value=O.x,f.value=O.y,h.value=O.strategy,m.value=O.placement,g.value=O.middlewareData,b.value=I!==!1})}function S(){typeof E=="function"&&(E(),E=void 0)}function D(){if(S(),n===void 0){P();return}if(u.value!=null&&c.value!=null){E=n(u.value,c.value,P);return}}function W(){r.value||(b.value=!1)}return Ue([o,i,a,r],P,{flush:"sync"}),Ue([u,c],D,{flush:"sync"}),Ue(r,W,{flush:"sync"}),al()&&bd(S),{x:_n(d),y:_n(f),strategy:_n(h),placement:_n(m),middlewareData:_n(g),isPositioned:_n(b),floatingStyles:C,update:P}}function jl(e){return e?e.flatMap(t=>t.type===_e?jl(t.children):[t]):[]}const Ua=ce({name:"PrimitiveSlot",inheritAttrs:!1,setup(e,{attrs:t,slots:s}){return()=>{var l,u;if(!s.default)return null;const n=jl(s.default()),r=n.findIndex(c=>c.type!==ns);if(r===-1)return n;const o=n[r];(l=o.props)==null||delete l.ref;const i=o.props?Se(t,o.props):t;t.class&&((u=o.props)!=null&&u.class)&&delete o.props.class;const a=Vs(o,i);for(const c in i)c.startsWith("on")&&(a.props||(a.props={}),a.props[c]=i[c]);return n.length===1?a:(n[r]=a,n)}}}),nb=["area","img","input"],tt=ce({name:"Primitive",inheritAttrs:!1,props:{asChild:{type:Boolean,default:!1},as:{type:[String,Object],default:"div"}},setup(e,{attrs:t,slots:s}){const n=e.asChild?"template":e.as;return typeof n=="string"&&nb.includes(n)?()=>jt(n,t):n!=="template"?()=>jt(e.as,t,{default:s.default}):()=>jt(Ua,t,{default:s.default})}});function rb(e,t){var s;const n=ni();return ss(()=>{n.value=e()},{...t,flush:(s=void 0)!=null?s:"sync"}),dl(n)}function Bl(e){return al()?(bd(e),!0):!1}function ob(e){let t=!1,s;const n=_d(!0);return(...r)=>(t||(s=n.run(()=>e(...r)),t=!0),s)}function xh(e){let t=0,s,n;const r=()=>{t-=1,n&&t<=0&&(n.stop(),s=void 0,n=void 0)};return(...o)=>(t+=1,n||(n=_d(!0),s=n.run(()=>e(...o))),Bl(r),s)}const Zs=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ib=e=>typeof e<"u",ab=Object.prototype.toString,lb=e=>ab.call(e)==="[object Object]",Cu=cb();function cb(){var e,t;return Zs&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((t=window==null?void 0:window.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function ub(e){return as()}function Qi(e){return Array.isArray(e)?e:[e]}function db(e,t=1e4){return Pm((s,n)=>{let r=Fs(e),o;const i=()=>setTimeout(()=>{r=Fs(e),n()},Fs(t));return Bl(()=>{clearTimeout(o)}),{get(){return s(),r},set(a){r=a,n(),clearTimeout(o),o=i()}}})}function fb(e,t){ub()&&pl(e,t)}function hb(e,t,s){return Ue(e,t,{...s,immediate:!0})}const Ml=Zs?window:void 0;function nr(e){var t;const s=Fs(e);return(t=s==null?void 0:s.$el)!=null?t:s}function Ho(...e){const t=[],s=()=>{t.forEach(a=>a()),t.length=0},n=(a,l,u,c)=>(a.addEventListener(l,u,c),()=>a.removeEventListener(l,u,c)),r=ne(()=>{const a=Qi(Fs(e[0])).filter(l=>l!=null);return a.every(l=>typeof l!="string")?a:void 0}),o=hb(()=>{var a,l;return[(l=(a=r.value)==null?void 0:a.map(u=>nr(u)))!=null?l:[Ml].filter(u=>u!=null),Qi(Fs(r.value?e[1]:e[0])),Qi(x(r.value?e[2]:e[1])),Fs(r.value?e[3]:e[2])]},([a,l,u,c])=>{if(s(),!(a!=null&&a.length)||!(l!=null&&l.length)||!(u!=null&&u.length))return;const d=lb(c)?{...c}:c;t.push(...a.flatMap(f=>l.flatMap(h=>u.map(m=>n(f,h,m,d)))))},{flush:"post"}),i=()=>{o(),s()};return Bl(s),i}function pb(){const e=ni(!1),t=as();return t&&Xs(()=>{e.value=!0},t),e}function mb(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function gb(...e){let t,s,n={};e.length===3?(t=e[0],s=e[1],n=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,s=e[0],n=e[1]):(t=e[0],s=e[1]):(t=!0,s=e[0]);const{target:r=Ml,eventName:o="keydown",passive:i=!1,dedupe:a=!1}=n,l=mb(t);return Ho(r,o,c=>{c.repeat&&Fs(a)||l(c)&&s(c)},i)}function yb(e){return JSON.parse(JSON.stringify(e))}function Hs(e,t,s,n={}){var r,o,i;const{clone:a=!1,passive:l=!1,eventName:u,deep:c=!1,defaultValue:d,shouldEmit:f}=n,h=as(),m=s||(h==null?void 0:h.emit)||((r=h==null?void 0:h.$emit)==null?void 0:r.bind(h))||((i=(o=h==null?void 0:h.proxy)==null?void 0:o.$emit)==null?void 0:i.bind(h==null?void 0:h.proxy));let g=u;t||(t="modelValue"),g=g||`update:${t.toString()}`;const b=P=>a?typeof a=="function"?a(P):yb(P):P,C=()=>ib(e[t])?b(e[t]):d,E=P=>{f?f(P)&&m(g,P):m(g,P)};if(l){const P=C(),S=ee(P);let D=!1;return Ue(()=>e[t],W=>{D||(D=!0,S.value=b(W),nt(()=>D=!1))}),Ue(S,W=>{!D&&(W!==e[t]||c)&&E(W)},{deep:c}),S}else return ne({get(){return C()},set(P){E(P)}})}function Vt(e,t){const s=typeof e=="string"&&!t?`${e}Context`:t,n=Symbol(s);return[i=>{const a=Ct(n,i);if(a||a===null)return a;throw new Error(`Injection \`${n.toString()}\` not found. Component must be used within ${Array.isArray(e)?`one of the following components: ${e.join(", ")}`:`\`${e}\``}`)},i=>(qn(n,i),i)]}function kh(e){return e==null}const[Nl,NP]=Vt("ConfigProvider");function Fl(e){const t=Nl({dir:ee("ltr")});return ne(()=>{var s;return(e==null?void 0:e.value)||((s=t.dir)==null?void 0:s.value)||"ltr"})}function $e(){const e=as(),t=ee(),s=ne(()=>{var i,a;return["#text","#comment"].includes((i=t.value)==null?void 0:i.$el.nodeName)?(a=t.value)==null?void 0:a.$el.nextElementSibling:nr(t)}),n=Object.assign({},e.exposed),r={};for(const i in e.props)Object.defineProperty(r,i,{enumerable:!0,configurable:!0,get:()=>e.props[i]});if(Object.keys(n).length>0)for(const i in n)Object.defineProperty(r,i,{enumerable:!0,configurable:!0,get:()=>n[i]});Object.defineProperty(r,"$el",{enumerable:!0,configurable:!0,get:()=>e.vnode.el}),e.exposed=r;function o(i){t.value=i,i&&(Object.defineProperty(r,"$el",{enumerable:!0,configurable:!0,get:()=>i instanceof Element?i:i.$el}),e.exposed=r)}return{forwardRef:o,currentRef:t,currentElement:s}}const vb=["INPUT","TEXTAREA"];function _b(e,t,s,n={}){if(!t||n.enableIgnoredElement&&vb.includes(t.nodeName))return null;const{arrowKeyOptions:r="both",attributeName:o="[data-reka-collection-item]",itemsArray:i=[],loop:a=!0,dir:l="ltr",preventScroll:u=!0,focus:c=!1}=n,[d,f,h,m,g,b]=[e.key==="ArrowRight",e.key==="ArrowLeft",e.key==="ArrowUp",e.key==="ArrowDown",e.key==="Home",e.key==="End"],C=h||m,E=d||f;if(!g&&!b&&(!C&&!E||r==="vertical"&&E||r==="horizontal"&&C))return null;const P=s?Array.from(s.querySelectorAll(o)):i;if(!P.length)return null;u&&e.preventDefault();let S=null;return E||C?S=Ch(P,t,{goForward:C?m:l==="ltr"?d:f,loop:a}):g?S=P.at(0)||null:b&&(S=P.at(-1)||null),c&&(S==null||S.focus()),S}function Ch(e,t,s,n=e.length){if(--n===0)return null;const r=e.indexOf(t),o=s.goForward?r+1:r-1;if(!s.loop&&(o<0||o>=e.length))return null;const i=(o+e.length)%e.length,a=e[i];return a?a.hasAttribute("disabled")&&a.getAttribute("disabled")!=="false"?Ch(e,a,s,n):a:null}let bb=0;function Ko(e,t="reka"){const s=Nl({useId:void 0});return cc?`${t}-${cc()}`:s.useId?`${t}-${s.useId()}`:`${t}-${++bb}`}function wb(e,t){const s=ee(e);function n(o){return t[s.value][o]??s.value}return{state:s,dispatch:o=>{s.value=n(o)}}}function xb(e,t){var b;const s=ee({}),n=ee("none"),r=ee(e),o=e.value?"mounted":"unmounted";let i;const a=((b=t.value)==null?void 0:b.ownerDocument.defaultView)??Ml,{state:l,dispatch:u}=wb(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),c=C=>{var E;if(Zs){const P=new CustomEvent(C,{bubbles:!1,cancelable:!1});(E=t.value)==null||E.dispatchEvent(P)}};Ue(e,async(C,E)=>{var S;const P=E!==C;if(await nt(),P){const D=n.value,W=go(t.value);C?(u("MOUNT"),c("enter"),W==="none"&&c("after-enter")):W==="none"||W==="undefined"||((S=s.value)==null?void 0:S.display)==="none"?(u("UNMOUNT"),c("leave"),c("after-leave")):E&&D!==W?(u("ANIMATION_OUT"),c("leave")):(u("UNMOUNT"),c("after-leave"))}},{immediate:!0});const d=C=>{const E=go(t.value),P=E.includes(C.animationName),S=l.value==="mounted"?"enter":"leave";if(C.target===t.value&&P&&(c(`after-${S}`),u("ANIMATION_END"),!r.value)){const D=t.value.style.animationFillMode;t.value.style.animationFillMode="forwards",i=a==null?void 0:a.setTimeout(()=>{var W;((W=t.value)==null?void 0:W.style.animationFillMode)==="forwards"&&(t.value.style.animationFillMode=D)})}C.target===t.value&&E==="none"&&u("ANIMATION_END")},f=C=>{C.target===t.value&&(n.value=go(t.value))},h=Ue(t,(C,E)=>{C?(s.value=getComputedStyle(C),C.addEventListener("animationstart",f),C.addEventListener("animationcancel",d),C.addEventListener("animationend",d)):(u("ANIMATION_END"),i!==void 0&&(a==null||a.clearTimeout(i)),E==null||E.removeEventListener("animationstart",f),E==null||E.removeEventListener("animationcancel",d),E==null||E.removeEventListener("animationend",d))},{immediate:!0}),m=Ue(l,()=>{const C=go(t.value);n.value=l.value==="mounted"?C:"none"});return Qn(()=>{h(),m()}),{isPresent:ne(()=>["mounted","unmountSuspended"].includes(l.value))}}function go(e){return e&&getComputedStyle(e).animationName||"none"}const Ul=ce({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(e,{slots:t,expose:s}){var u;const{present:n,forceMount:r}=Ys(e),o=ee(),{isPresent:i}=xb(n,o);s({present:i});let a=t.default({present:i.value});a=jl(a||[]);const l=as();if(a&&(a==null?void 0:a.length)>1){const c=(u=l==null?void 0:l.parent)!=null&&u.type.name?`<${l.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${c}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(d=>`  - ${d}`).join(`
`)].join(`
`))}return()=>r.value||n.value||i.value?jt(t.default({present:i.value})[0],{ref:c=>{const d=nr(c);return typeof(d==null?void 0:d.hasAttribute)>"u"||(d!=null&&d.hasAttribute("data-reka-popper-content-wrapper")?o.value=d.firstElementChild:o.value=d),d}}):null}});function Gr(e){const t=as(),s=t==null?void 0:t.type.emits,n={};return s!=null&&s.length||console.warn(`No emitted event found. Please check component: ${t==null?void 0:t.type.__name}`),s==null||s.forEach(r=>{n[vr(gt(r))]=(...o)=>e(r,...o)}),n}function Jr(e){const t=as(),s=Object.keys((t==null?void 0:t.type.props)??{}).reduce((r,o)=>{const i=(t==null?void 0:t.type.props[o]).default;return i!==void 0&&(r[o]=i),r},{}),n=Rm(e);return ne(()=>{const r={},o=(t==null?void 0:t.vnode.props)??{};return Object.keys(o).forEach(i=>{r[gt(i)]=o[i]}),Object.keys({...s,...r}).reduce((i,a)=>(n.value[a]!==void 0&&(i[a]=n.value[a]),i),{})})}function en(e,t){const s=Jr(e),n=t?Gr(t):{};return ne(()=>({...s.value,...n}))}const[Es,kb]=Vt("DialogRoot"),Cb=ce({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,default:void 0},defaultOpen:{type:Boolean,default:!1},modal:{type:Boolean,default:!0}},emits:["update:open"],setup(e,{emit:t}){const s=e,r=Hs(s,"open",t,{defaultValue:s.defaultOpen,passive:s.open===void 0}),o=ee(),i=ee(),{modal:a}=Ys(s);return kb({open:r,modal:a,openModal:()=>{r.value=!0},onOpenChange:l=>{r.value=l},onOpenToggle:()=>{r.value=!r.value},contentId:"",titleId:"",descriptionId:"",triggerElement:o,contentElement:i}),(l,u)=>re(l.$slots,"default",{open:x(r)})}}),Sh=ce({__name:"Teleport",props:{to:{default:"body"},disabled:{type:Boolean},defer:{type:Boolean},forceMount:{type:Boolean}},setup(e){const t=pb();return(s,n)=>x(t)||s.forceMount?(w(),K(Vm,{key:0,to:s.to,disabled:s.disabled,defer:s.defer},[re(s.$slots,"default")],8,["to","disabled","defer"])):Ee("",!0)}});function Eh(e,t,s){const n=s.originalEvent.target,r=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:s});t&&n.addEventListener(e,t,{once:!0}),n.dispatchEvent(r)}const Sb="dismissableLayer.pointerDownOutside",Eb="dismissableLayer.focusOutside";function Ah(e,t){const s=t.closest("[data-dismissable-layer]"),n=e.dataset.dismissableLayer===""?e:e.querySelector("[data-dismissable-layer]"),r=Array.from(e.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(s&&n===s||r.indexOf(n)<r.indexOf(s))}function Ab(e,t){var o;const s=((o=t==null?void 0:t.value)==null?void 0:o.ownerDocument)??(globalThis==null?void 0:globalThis.document),n=ee(!1),r=ee(()=>{});return ss(i=>{if(!Zs)return;const a=async u=>{const c=u.target;if(t!=null&&t.value){if(Ah(t.value,c)){n.value=!1;return}if(u.target&&!n.value){let d=function(){Eh(Sb,e,f)};const f={originalEvent:u};u.pointerType==="touch"?(s.removeEventListener("click",r.value),r.value=d,s.addEventListener("click",r.value,{once:!0})):d()}else s.removeEventListener("click",r.value);n.value=!1}},l=window.setTimeout(()=>{s.addEventListener("pointerdown",a)},0);i(()=>{window.clearTimeout(l),s.removeEventListener("pointerdown",a),s.removeEventListener("click",r.value)})}),{onPointerDownCapture:()=>n.value=!0}}function Tb(e,t){var r;const s=((r=t==null?void 0:t.value)==null?void 0:r.ownerDocument)??(globalThis==null?void 0:globalThis.document),n=ee(!1);return ss(o=>{if(!Zs)return;const i=async a=>{t!=null&&t.value&&(await nt(),await nt(),!(!t.value||Ah(t.value,a.target))&&a.target&&!n.value&&Eh(Eb,e,{originalEvent:a}))};s.addEventListener("focusin",i),o(()=>s.removeEventListener("focusin",i))}),{onFocusCapture:()=>n.value=!0,onBlurCapture:()=>n.value=!1}}const fs=is({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Th=ce({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(e,{emit:t}){const s=e,n=t,{forwardRef:r,currentElement:o}=$e(),i=ne(()=>{var m;return((m=o.value)==null?void 0:m.ownerDocument)??globalThis.document}),a=ne(()=>fs.layersRoot),l=ne(()=>o.value?Array.from(a.value).indexOf(o.value):-1),u=ne(()=>fs.layersWithOutsidePointerEventsDisabled.size>0),c=ne(()=>{const m=Array.from(a.value),[g]=[...fs.layersWithOutsidePointerEventsDisabled].slice(-1),b=m.indexOf(g);return l.value>=b}),d=Ab(async m=>{const g=[...fs.branches].some(b=>b==null?void 0:b.contains(m.target));!c.value||g||(n("pointerDownOutside",m),n("interactOutside",m),await nt(),m.defaultPrevented||n("dismiss"))},o),f=Tb(m=>{[...fs.branches].some(b=>b==null?void 0:b.contains(m.target))||(n("focusOutside",m),n("interactOutside",m),m.defaultPrevented||n("dismiss"))},o);gb("Escape",m=>{l.value===a.value.size-1&&(n("escapeKeyDown",m),m.defaultPrevented||n("dismiss"))});let h;return ss(m=>{o.value&&(s.disableOutsidePointerEvents&&(fs.layersWithOutsidePointerEventsDisabled.size===0&&(h=i.value.body.style.pointerEvents,i.value.body.style.pointerEvents="none"),fs.layersWithOutsidePointerEventsDisabled.add(o.value)),a.value.add(o.value),m(()=>{s.disableOutsidePointerEvents&&fs.layersWithOutsidePointerEventsDisabled.size===1&&(i.value.body.style.pointerEvents=h)}))}),ss(m=>{m(()=>{o.value&&(a.value.delete(o.value),fs.layersWithOutsidePointerEventsDisabled.delete(o.value))})}),(m,g)=>(w(),K(x(tt),{ref:x(r),"as-child":m.asChild,as:m.as,"data-dismissable-layer":"",style:Ut({pointerEvents:u.value?c.value?"auto":"none":void 0}),onFocusCapture:x(f).onFocusCapture,onBlurCapture:x(f).onBlurCapture,onPointerdownCapture:x(d).onPointerDownCapture},{default:k(()=>[re(m.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}});function mt(){let e=document.activeElement;if(e==null)return null;for(;e!=null&&e.shadowRoot!=null&&e.shadowRoot.activeElement!=null;)e=e.shadowRoot.activeElement;return e}const Pb="menu.itemSelect",Va=["Enter"," "],Ob=["ArrowDown","PageUp","Home"],Ph=["ArrowUp","PageDown","End"],Ib=[...Ob,...Ph];[...Va],[...Va];function Oh(e){return e?"open":"closed"}function Rb(e){const t=mt();for(const s of e)if(s===t||(s.focus(),mt()!==t))return}function $b(e,t){const{x:s,y:n}=e;let r=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const a=t[o].x,l=t[o].y,u=t[i].x,c=t[i].y;l>n!=c>n&&s<(u-a)*(n-l)/(c-l)+a&&(r=!r)}return r}function Db(e,t){if(!t)return!1;const s={x:e.clientX,y:e.clientY};return $b(s,t)}function qa(e){return e.pointerType==="mouse"}const Zi="focusScope.autoFocusOnMount",ea="focusScope.autoFocusOnUnmount",Su={bubbles:!1,cancelable:!0};function Lb(e,{select:t=!1}={}){const s=mt();for(const n of e)if($s(n,{select:t}),mt()!==s)return!0}function jb(e){const t=Ih(e),s=Eu(t,e),n=Eu(t.reverse(),e);return[s,n]}function Ih(e){const t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const r=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||r?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)t.push(s.currentNode);return t}function Eu(e,t){for(const s of e)if(!Bb(s,{upTo:t}))return s}function Bb(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Mb(e){return e instanceof HTMLInputElement&&"select"in e}function $s(e,{select:t=!1}={}){if(e&&e.focus){const s=mt();e.focus({preventScroll:!0}),e!==s&&Mb(e)&&t&&e.select()}}const Nb=ob(()=>ee([]));function Fb(){const e=Nb();return{add(t){const s=e.value[0];t!==s&&(s==null||s.pause()),e.value=Au(e.value,t),e.value.unshift(t)},remove(t){var s;e.value=Au(e.value,t),(s=e.value[0])==null||s.resume()}}}function Au(e,t){const s=[...e],n=s.indexOf(t);return n!==-1&&s.splice(n,1),s}function Ub(e){return e.filter(t=>t.tagName!=="A")}const Rh=ce({__name:"FocusScope",props:{loop:{type:Boolean,default:!1},trapped:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["mountAutoFocus","unmountAutoFocus"],setup(e,{emit:t}){const s=e,n=t,{currentRef:r,currentElement:o}=$e(),i=ee(null),a=Fb(),l=is({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});ss(c=>{if(!Zs)return;const d=o.value;if(!s.trapped)return;function f(b){if(l.paused||!d)return;const C=b.target;d.contains(C)?i.value=C:$s(i.value,{select:!0})}function h(b){if(l.paused||!d)return;const C=b.relatedTarget;C!==null&&(d.contains(C)||$s(i.value,{select:!0}))}function m(b){d.contains(i.value)||$s(d)}document.addEventListener("focusin",f),document.addEventListener("focusout",h);const g=new MutationObserver(m);d&&g.observe(d,{childList:!0,subtree:!0}),c(()=>{document.removeEventListener("focusin",f),document.removeEventListener("focusout",h),g.disconnect()})}),ss(async c=>{const d=o.value;if(await nt(),!d)return;a.add(l);const f=mt();if(!d.contains(f)){const m=new CustomEvent(Zi,Su);d.addEventListener(Zi,g=>n("mountAutoFocus",g)),d.dispatchEvent(m),m.defaultPrevented||(Lb(Ub(Ih(d)),{select:!0}),mt()===f&&$s(d))}c(()=>{d.removeEventListener(Zi,b=>n("mountAutoFocus",b));const m=new CustomEvent(ea,Su),g=b=>{n("unmountAutoFocus",b)};d.addEventListener(ea,g),d.dispatchEvent(m),setTimeout(()=>{m.defaultPrevented||$s(f??document.body,{select:!0}),d.removeEventListener(ea,g),a.remove(l)},0)})});function u(c){if(!s.loop&&!s.trapped||l.paused)return;const d=c.key==="Tab"&&!c.altKey&&!c.ctrlKey&&!c.metaKey,f=mt();if(d&&f){const h=c.currentTarget,[m,g]=jb(h);m&&g?!c.shiftKey&&f===g?(c.preventDefault(),s.loop&&$s(m,{select:!0})):c.shiftKey&&f===m&&(c.preventDefault(),s.loop&&$s(g,{select:!0})):f===h&&c.preventDefault()}}return(c,d)=>(w(),K(x(tt),{ref_key:"currentRef",ref:r,tabindex:"-1","as-child":c.asChild,as:c.as,onKeydown:u},{default:k(()=>[re(c.$slots,"default")]),_:3},8,["as-child","as"]))}}),$h=ce({__name:"DialogContentImpl",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const s=e,n=t,r=Es(),{forwardRef:o,currentElement:i}=$e();return r.titleId||(r.titleId=Ko(void 0,"reka-dialog-title")),r.descriptionId||(r.descriptionId=Ko(void 0,"reka-dialog-description")),Xs(()=>{r.contentElement=i,mt()!==document.body&&(r.triggerElement.value=mt())}),(a,l)=>(w(),K(x(Rh),{"as-child":"",loop:"",trapped:s.trapFocus,onMountAutoFocus:l[5]||(l[5]=u=>n("openAutoFocus",u)),onUnmountAutoFocus:l[6]||(l[6]=u=>n("closeAutoFocus",u))},{default:k(()=>[v(x(Th),Se({id:x(r).contentId,ref:x(o),as:a.as,"as-child":a.asChild,"disable-outside-pointer-events":a.disableOutsidePointerEvents,role:"dialog","aria-describedby":x(r).descriptionId,"aria-labelledby":x(r).titleId,"data-state":x(Oh)(x(r).open.value)},a.$attrs,{onDismiss:l[0]||(l[0]=u=>x(r).onOpenChange(!1)),onEscapeKeyDown:l[1]||(l[1]=u=>n("escapeKeyDown",u)),onFocusOutside:l[2]||(l[2]=u=>n("focusOutside",u)),onInteractOutside:l[3]||(l[3]=u=>n("interactOutside",u)),onPointerDownOutside:l[4]||(l[4]=u=>n("pointerDownOutside",u))}),{default:k(()=>[re(a.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}});var Vb=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},On=new WeakMap,yo=new WeakMap,vo={},ta=0,Dh=function(e){return e&&(e.host||Dh(e.parentNode))},qb=function(e,t){return t.map(function(s){if(e.contains(s))return s;var n=Dh(s);return n&&e.contains(n)?n:(console.error("aria-hidden",s,"in not contained inside",e,". Doing nothing"),null)}).filter(function(s){return!!s})},zb=function(e,t,s,n){var r=qb(t,Array.isArray(e)?e:[e]);vo[s]||(vo[s]=new WeakMap);var o=vo[s],i=[],a=new Set,l=new Set(r),u=function(d){!d||a.has(d)||(a.add(d),u(d.parentNode))};r.forEach(u);var c=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))c(f);else try{var h=f.getAttribute(n),m=h!==null&&h!=="false",g=(On.get(f)||0)+1,b=(o.get(f)||0)+1;On.set(f,g),o.set(f,b),i.push(f),g===1&&m&&yo.set(f,!0),b===1&&f.setAttribute(s,"true"),m||f.setAttribute(n,"true")}catch(C){console.error("aria-hidden: cannot operate on ",f,C)}})};return c(t),a.clear(),ta++,function(){i.forEach(function(d){var f=On.get(d)-1,h=o.get(d)-1;On.set(d,f),o.set(d,h),f||(yo.has(d)||d.removeAttribute(n),yo.delete(d)),h||d.removeAttribute(s)}),ta--,ta||(On=new WeakMap,On=new WeakMap,yo=new WeakMap,vo={})}},Hb=function(e,t,s){s===void 0&&(s="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),r=Vb(e);return r?(n.push.apply(n,Array.from(r.querySelectorAll("[aria-live]"))),zb(n,r,s,"aria-hidden")):function(){return null}};function Lh(e){let t;Ue(()=>nr(e),s=>{s?t=Hb(s):t&&t()}),Qn(()=>{t&&t()})}const Kb=ce({__name:"DialogContentModal",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const s=e,n=t,r=Es(),o=Gr(n),{forwardRef:i,currentElement:a}=$e();return Lh(a),(l,u)=>(w(),K($h,Se({...s,...x(o)},{ref:x(i),"trap-focus":x(r).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:u[0]||(u[0]=c=>{var d;c.defaultPrevented||(c.preventDefault(),(d=x(r).triggerElement.value)==null||d.focus())}),onPointerDownOutside:u[1]||(u[1]=c=>{const d=c.detail.originalEvent,f=d.button===0&&d.ctrlKey===!0;(d.button===2||f)&&c.preventDefault()}),onFocusOutside:u[2]||(u[2]=c=>{c.preventDefault()})}),{default:k(()=>[re(l.$slots,"default")]),_:3},16,["trap-focus"]))}}),Wb=ce({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const s=e,r=Gr(t);$e();const o=Es(),i=ee(!1),a=ee(!1);return(l,u)=>(w(),K($h,Se({...s,...x(r)},{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:u[0]||(u[0]=c=>{var d;c.defaultPrevented||(i.value||(d=x(o).triggerElement.value)==null||d.focus(),c.preventDefault()),i.value=!1,a.value=!1}),onInteractOutside:u[1]||(u[1]=c=>{var h;c.defaultPrevented||(i.value=!0,c.detail.originalEvent.type==="pointerdown"&&(a.value=!0));const d=c.target;((h=x(o).triggerElement.value)==null?void 0:h.contains(d))&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&a.value&&c.preventDefault()})}),{default:k(()=>[re(l.$slots,"default")]),_:3},16))}}),Gb=ce({__name:"DialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const s=e,n=t,r=Es(),o=Gr(n),{forwardRef:i}=$e();return(a,l)=>(w(),K(x(Ul),{present:a.forceMount||x(r).open.value},{default:k(()=>[x(r).modal.value?(w(),K(Kb,Se({key:0,ref:x(i)},{...s,...x(o),...a.$attrs}),{default:k(()=>[re(a.$slots,"default")]),_:3},16)):(w(),K(Wb,Se({key:1,ref:x(i)},{...s,...x(o),...a.$attrs}),{default:k(()=>[re(a.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}});function sa(e){if(e===null||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);return t!==null&&t!==Object.prototype&&Object.getPrototypeOf(t)!==null||Symbol.iterator in e?!1:Symbol.toStringTag in e?Object.prototype.toString.call(e)==="[object Module]":!0}function za(e,t,s=".",n){if(!sa(t))return za(e,{},s,n);const r=Object.assign({},t);for(const o in e){if(o==="__proto__"||o==="constructor")continue;const i=e[o];i!=null&&(n&&n(r,o,i,s)||(Array.isArray(i)&&Array.isArray(r[o])?r[o]=[...i,...r[o]]:sa(i)&&sa(r[o])?r[o]=za(i,r[o],(s?`${s}.`:"")+o.toString(),n):r[o]=i))}return r}function Jb(e){return(...t)=>t.reduce((s,n)=>za(s,n,"",e),{})}const Yb=Jb(),Xb=xh(()=>{const e=ee(new Map),t=ee(),s=ne(()=>{for(const i of e.value.values())if(i)return!0;return!1}),n=Nl({scrollBody:ee(!0)});let r=null;const o=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.body.style.removeProperty("--scrollbar-width"),document.body.style.overflow=t.value??"",Cu&&(r==null||r()),t.value=void 0};return Ue(s,(i,a)=>{var d;if(!Zs)return;if(!i){a&&o();return}t.value===void 0&&(t.value=document.body.style.overflow);const l=window.innerWidth-document.documentElement.clientWidth,u={padding:l,margin:0},c=(d=n.scrollBody)!=null&&d.value?typeof n.scrollBody.value=="object"?Yb({padding:n.scrollBody.value.padding===!0?l:n.scrollBody.value.padding,margin:n.scrollBody.value.margin===!0?l:n.scrollBody.value.margin},u):u:{padding:0,margin:0};l>0&&(document.body.style.paddingRight=typeof c.padding=="number"?`${c.padding}px`:String(c.padding),document.body.style.marginRight=typeof c.margin=="number"?`${c.margin}px`:String(c.margin),document.body.style.setProperty("--scrollbar-width",`${l}px`),document.body.style.overflow="hidden"),Cu&&(r=Ho(document,"touchmove",f=>Qb(f),{passive:!1})),nt(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),e});function jh(e){const t=Math.random().toString(36).substring(2,7),s=Xb();s.value.set(t,e??!1);const n=ne({get:()=>s.value.get(t)??!1,set:r=>s.value.set(t,r)});return fb(()=>{s.value.delete(t)}),n}function Bh(e){const t=window.getComputedStyle(e);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&e.clientWidth<e.scrollWidth||t.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const s=e.parentNode;return!(s instanceof Element)||s.tagName==="BODY"?!1:Bh(s)}}function Qb(e){const t=e||window.event,s=t.target;return s instanceof Element&&Bh(s)?!1:t.touches.length>1?!0:(t.preventDefault&&t.cancelable&&t.preventDefault(),!1)}const Zb=ce({__name:"DialogOverlayImpl",props:{asChild:{type:Boolean},as:{}},setup(e){const t=Es();return jh(!0),$e(),(s,n)=>(w(),K(x(tt),{as:s.as,"as-child":s.asChild,"data-state":x(t).open.value?"open":"closed",style:{"pointer-events":"auto"}},{default:k(()=>[re(s.$slots,"default")]),_:3},8,["as","as-child","data-state"]))}}),ew=ce({__name:"DialogOverlay",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(e){const t=Es(),{forwardRef:s}=$e();return(n,r)=>{var o;return(o=x(t))!=null&&o.modal.value?(w(),K(x(Ul),{key:0,present:n.forceMount||x(t).open.value},{default:k(()=>[v(Zb,Se(n.$attrs,{ref:x(s),as:n.as,"as-child":n.asChild}),{default:k(()=>[re(n.$slots,"default")]),_:3},16,["as","as-child"])]),_:3},8,["present"])):Ee("",!0)}}}),tw=ce({__name:"DialogClose",props:{asChild:{type:Boolean},as:{default:"button"}},setup(e){const t=e;$e();const s=Es();return(n,r)=>(w(),K(x(tt),Se(t,{type:n.as==="button"?"button":void 0,onClick:r[0]||(r[0]=o=>x(s).onOpenChange(!1))}),{default:k(()=>[re(n.$slots,"default")]),_:3},16,["type"]))}}),sw=ce({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{default:"h2"}},setup(e){const t=e,s=Es();return $e(),(n,r)=>(w(),K(x(tt),Se(t,{id:x(s).titleId}),{default:k(()=>[re(n.$slots,"default")]),_:3},16,["id"]))}}),nw=ce({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{default:"p"}},setup(e){const t=e;$e();const s=Es();return(n,r)=>(w(),K(x(tt),Se(t,{id:x(s).descriptionId}),{default:k(()=>[re(n.$slots,"default")]),_:3},16,["id"]))}}),[Mh,rw]=Vt("AvatarRoot"),ow=ce({__name:"AvatarRoot",props:{asChild:{type:Boolean},as:{default:"span"}},setup(e){return $e(),rw({imageLoadingStatus:ee("loading")}),(t,s)=>(w(),K(x(tt),{"as-child":t.asChild,as:t.as},{default:k(()=>[re(t.$slots,"default")]),_:3},8,["as-child","as"]))}}),iw=ce({__name:"AvatarFallback",props:{delayMs:{default:0},asChild:{type:Boolean},as:{default:"span"}},setup(e){const t=e,s=Mh();$e();const n=ee(!1);let r;return Ue(s.imageLoadingStatus,o=>{o==="loading"&&(n.value=!1,t.delayMs?r=setTimeout(()=>{n.value=!0,clearTimeout(r)},t.delayMs):n.value=!0)},{immediate:!0}),(o,i)=>n.value&&x(s).imageLoadingStatus.value!=="loaded"?(w(),K(x(tt),{key:0,"as-child":o.asChild,as:o.as},{default:k(()=>[re(o.$slots,"default")]),_:3},8,["as-child","as"])):Ee("",!0)}});function aw(e,t){const s=ee("idle"),n=ee(!1),r=o=>()=>{n.value&&(s.value=o)};return Xs(()=>{n.value=!0,Ue([()=>e.value,()=>t==null?void 0:t.value],([o,i])=>{if(!o)s.value="error";else{const a=new window.Image;s.value="loading",a.onload=r("loaded"),a.onerror=r("error"),a.src=o,i&&(a.referrerPolicy=i)}},{immediate:!0})}),Qn(()=>{n.value=!1}),s}const lw=ce({__name:"AvatarImage",props:{src:{},referrerPolicy:{},asChild:{type:Boolean},as:{default:"img"}},emits:["loadingStatusChange"],setup(e,{emit:t}){const s=e,n=t,{src:r,referrerPolicy:o}=Ys(s);$e();const i=Mh(),a=aw(r,o);return Ue(a,l=>{n("loadingStatusChange",l),l!=="idle"&&(i.imageLoadingStatus.value=l)},{immediate:!0}),(l,u)=>oi((w(),K(x(tt),{role:"img","as-child":l.asChild,as:l.as,src:x(r),"referrer-policy":x(o)},{default:k(()=>[re(l.$slots,"default")]),_:3},8,["as-child","as","src","referrer-policy"])),[[Yg,x(a)==="loaded"]])}});function Tu(){const e=ee(),t=ne(()=>{var s,n;return["#text","#comment"].includes((s=e.value)==null?void 0:s.$el.nodeName)?(n=e.value)==null?void 0:n.$el.nextElementSibling:nr(e)});return{primitiveElement:e,currentElement:t}}const cw="rovingFocusGroup.onEntryFocus",uw={bubbles:!1,cancelable:!0};function dw(e,t=!1){const s=mt();for(const n of e)if(n===s||(n.focus({preventScroll:t}),mt()!==s))return}const Pu="data-reka-collection-item";function Nh(e={}){const{key:t="",isProvider:s=!1}=e,n=`${t}CollectionProvider`;let r;if(s){const c=ee(new Map);r={collectionRef:ee(),itemMap:c},qn(n,r)}else r=Ct(n);const o=(c=!1)=>{const d=r.collectionRef.value;if(!d)return[];const f=Array.from(d.querySelectorAll(`[${Pu}]`)),m=Array.from(r.itemMap.value.values()).sort((g,b)=>f.indexOf(g.ref)-f.indexOf(b.ref));return c?m:m.filter(g=>g.ref.dataset.disabled!=="")},i=ce({name:"CollectionSlot",setup(c,{slots:d}){const{primitiveElement:f,currentElement:h}=Tu();return Ue(h,()=>{r.collectionRef.value=h.value}),()=>jt(Ua,{ref:f},d)}}),a=ce({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(c,{slots:d,attrs:f}){const{primitiveElement:h,currentElement:m}=Tu();return ss(g=>{if(m.value){const b=Md(m.value);r.itemMap.value.set(b,{ref:m.value,value:c.value}),g(()=>r.itemMap.value.delete(b))}}),()=>jt(Ua,{...f,[Pu]:"",ref:h},d)}}),l=ne(()=>Array.from(r.itemMap.value.values())),u=ne(()=>r.itemMap.value.size);return{getItems:o,reactiveItems:l,itemMapSize:u,CollectionSlot:i,CollectionItem:a}}const[FP,fw]=Vt("RovingFocusGroup"),hw=ce({__name:"RovingFocusGroup",props:{orientation:{default:void 0},dir:{},loop:{type:Boolean,default:!1},currentTabStopId:{},defaultCurrentTabStopId:{},preventScrollOnEntryFocus:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["entryFocus","update:currentTabStopId"],setup(e,{expose:t,emit:s}){const n=e,r=s,{loop:o,orientation:i,dir:a}=Ys(n),l=Fl(a),u=Hs(n,"currentTabStopId",r,{defaultValue:n.defaultCurrentTabStopId,passive:n.currentTabStopId===void 0}),c=ee(!1),d=ee(!1),f=ee(0),{getItems:h,CollectionSlot:m}=Nh({isProvider:!0});function g(C){const E=!d.value;if(C.currentTarget&&C.target===C.currentTarget&&E&&!c.value){const P=new CustomEvent(cw,uw);if(C.currentTarget.dispatchEvent(P),r("entryFocus",P),!P.defaultPrevented){const S=h().map(O=>O.ref).filter(O=>O.dataset.disabled!==""),D=S.find(O=>O.getAttribute("data-active")===""),W=S.find(O=>O.id===u.value),I=[D,W,...S].filter(Boolean);dw(I,n.preventScrollOnEntryFocus)}}d.value=!1}function b(){setTimeout(()=>{d.value=!1},1)}return t({getItems:h}),fw({loop:o,dir:l,orientation:i,currentTabStopId:u,onItemFocus:C=>{u.value=C},onItemShiftTab:()=>{c.value=!0},onFocusableItemAdd:()=>{f.value++},onFocusableItemRemove:()=>{f.value--}}),(C,E)=>(w(),K(x(m),null,{default:k(()=>[v(x(tt),{tabindex:c.value||f.value===0?-1:0,"data-orientation":x(i),as:C.as,"as-child":C.asChild,dir:x(l),style:{outline:"none"},onMousedown:E[0]||(E[0]=P=>d.value=!0),onMouseup:b,onFocus:g,onBlur:E[1]||(E[1]=P=>c.value=!1)},{default:k(()=>[re(C.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),[Fh,pw]=Vt("PopperRoot"),mw=ce({inheritAttrs:!1,__name:"PopperRoot",setup(e){const t=ee();return pw({anchor:t,onAnchorChange:s=>t.value=s}),(s,n)=>re(s.$slots,"default")}});function gw(e){const t=db("",1e3);return{search:t,handleTypeaheadSearch:(r,o)=>{t.value=t.value+r;{const i=mt(),a=o.map(f=>{var h,m;return{...f,textValue:((h=f.value)==null?void 0:h.textValue)??((m=f.ref.textContent)==null?void 0:m.trim())??""}}),l=a.find(f=>f.ref===i),u=a.map(f=>f.textValue),c=vw(u,t.value,l==null?void 0:l.textValue),d=a.find(f=>f.textValue===c);return d&&d.ref.focus(),d==null?void 0:d.ref}},resetTypeahead:()=>{t.value=""}}}function yw(e,t){return e.map((s,n)=>e[(t+n)%e.length])}function vw(e,t,s){const r=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,o=s?e.indexOf(s):-1;let i=yw(e,Math.max(o,0));r.length===1&&(i=i.filter(u=>u!==s));const l=i.find(u=>u.toLowerCase().startsWith(r.toLowerCase()));return l!==s?l:void 0}const _w=ce({__name:"PopperAnchor",props:{reference:{},asChild:{type:Boolean},as:{}},setup(e){const t=e,{forwardRef:s,currentElement:n}=$e(),r=Fh();return bf(()=>{r.onAnchorChange(t.reference??n.value)}),(o,i)=>(w(),K(x(tt),{ref:x(s),as:o.as,"as-child":o.asChild},{default:k(()=>[re(o.$slots,"default")]),_:3},8,["as","as-child"]))}});function bw(e){return e!==null}function ww(e){return{name:"transformOrigin",options:e,fn(t){var b,C,E;const{placement:s,rects:n,middlewareData:r}=t,i=((b=r.arrow)==null?void 0:b.centerOffset)!==0,a=i?0:e.arrowWidth,l=i?0:e.arrowHeight,[u,c]=Ha(s),d={start:"0%",center:"50%",end:"100%"}[c],f=(((C=r.arrow)==null?void 0:C.x)??0)+a/2,h=(((E=r.arrow)==null?void 0:E.y)??0)+l/2;let m="",g="";return u==="bottom"?(m=i?d:`${f}px`,g=`${-l}px`):u==="top"?(m=i?d:`${f}px`,g=`${n.floating.height+l}px`):u==="right"?(m=`${-l}px`,g=i?d:`${h}px`):u==="left"&&(m=`${n.floating.width+l}px`,g=i?d:`${h}px`),{data:{x:m,y:g}}}}}function Ha(e){const[t,s="center"]=e.split("-");return[t,s]}function xw(e){const t=ee(),s=ne(()=>{var r;return((r=t.value)==null?void 0:r.width)??0}),n=ne(()=>{var r;return((r=t.value)==null?void 0:r.height)??0});return Xs(()=>{const r=nr(e);if(r){t.value={width:r.offsetWidth,height:r.offsetHeight};const o=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let l,u;if("borderBoxSize"in a){const c=a.borderBoxSize,d=Array.isArray(c)?c[0]:c;l=d.inlineSize,u=d.blockSize}else l=r.offsetWidth,u=r.offsetHeight;t.value={width:l,height:u}});return o.observe(r,{box:"border-box"}),()=>o.unobserve(r)}else t.value=void 0}),{width:s,height:n}}const Uh={side:"bottom",sideOffset:0,align:"center",alignOffset:0,arrowPadding:0,avoidCollisions:!0,collisionBoundary:()=>[],collisionPadding:0,sticky:"partial",hideWhenDetached:!1,positionStrategy:"fixed",updatePositionStrategy:"optimized",prioritizePosition:!1},[UP,kw]=Vt("PopperContent"),Cw=ce({inheritAttrs:!1,__name:"PopperContent",props:of({side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},{...Uh}),emits:["placed"],setup(e,{emit:t}){const s=e,n=t,r=Fh(),{forwardRef:o,currentElement:i}=$e(),a=ee(),l=ee(),{width:u,height:c}=xw(l),d=ne(()=>s.side+(s.align!=="center"?`-${s.align}`:"")),f=ne(()=>typeof s.collisionPadding=="number"?s.collisionPadding:{top:0,right:0,bottom:0,left:0,...s.collisionPadding}),h=ne(()=>Array.isArray(s.collisionBoundary)?s.collisionBoundary:[s.collisionBoundary]),m=ne(()=>({padding:f.value,boundary:h.value.filter(bw),altBoundary:h.value.length>0})),g=rb(()=>[W_({mainAxis:s.sideOffset+c.value,alignmentAxis:s.alignOffset}),s.prioritizePosition&&s.avoidCollisions&&xu({...m.value}),s.avoidCollisions&&G_({mainAxis:!0,crossAxis:!!s.prioritizePosition,limiter:s.sticky==="partial"?Q_():void 0,...m.value}),!s.prioritizePosition&&s.avoidCollisions&&xu({...m.value}),J_({...m.value,apply:({elements:q,rects:j,availableWidth:ie,availableHeight:de})=>{const{width:ye,height:me}=j.reference,ae=q.floating.style;ae.setProperty("--reka-popper-available-width",`${ie}px`),ae.setProperty("--reka-popper-available-height",`${de}px`),ae.setProperty("--reka-popper-anchor-width",`${ye}px`),ae.setProperty("--reka-popper-anchor-height",`${me}px`)}}),l.value&&tb({element:l.value,padding:s.arrowPadding}),ww({arrowWidth:u.value,arrowHeight:c.value}),s.hideWhenDetached&&Y_({strategy:"referenceHidden",...m.value})]),b=ne(()=>s.reference??r.anchor.value),{floatingStyles:C,placement:E,isPositioned:P,middlewareData:S}=sb(b,a,{strategy:s.positionStrategy,placement:d,whileElementsMounted:(...q)=>K_(...q,{layoutShift:!s.disableUpdateOnLayoutShift,animationFrame:s.updatePositionStrategy==="always"}),middleware:g}),D=ne(()=>Ha(E.value)[0]),W=ne(()=>Ha(E.value)[1]);bf(()=>{P.value&&n("placed")});const I=ne(()=>{var q;return((q=S.value.arrow)==null?void 0:q.centerOffset)!==0}),O=ee("");ss(()=>{i.value&&(O.value=window.getComputedStyle(i.value).zIndex)});const A=ne(()=>{var q;return((q=S.value.arrow)==null?void 0:q.x)??0}),F=ne(()=>{var q;return((q=S.value.arrow)==null?void 0:q.y)??0});return kw({placedSide:D,onArrowChange:q=>l.value=q,arrowX:A,arrowY:F,shouldHideArrow:I}),(q,j)=>{var ie,de,ye;return w(),$("div",{ref_key:"floatingRef",ref:a,"data-reka-popper-content-wrapper":"",style:Ut({...x(C),transform:x(P)?x(C).transform:"translate(0, -200%)",minWidth:"max-content",zIndex:O.value,"--reka-popper-transform-origin":[(ie=x(S).transformOrigin)==null?void 0:ie.x,(de=x(S).transformOrigin)==null?void 0:de.y].join(" "),...((ye=x(S).hide)==null?void 0:ye.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}})},[v(x(tt),Se({ref:x(o)},q.$attrs,{"as-child":s.asChild,as:q.as,"data-side":D.value,"data-align":W.value,style:{animation:x(P)?void 0:"none"}}),{default:k(()=>[re(q.$slots,"default")]),_:3},16,["as-child","as","data-side","data-align","style"])],4)}}});function Sw(){const e=ee(!1);return Xs(()=>{Ho("keydown",()=>{e.value=!0},{capture:!0,passive:!0}),Ho(["pointerdown","pointermove"],()=>{e.value=!1},{capture:!0,passive:!0})}),e}const Ew=xh(Sw),[mi,Aw]=Vt(["MenuRoot","MenuSub"],"MenuContext"),[Vl,Tw]=Vt("MenuRoot"),Pw=ce({__name:"MenuRoot",props:{open:{type:Boolean,default:!1},dir:{},modal:{type:Boolean,default:!0}},emits:["update:open"],setup(e,{emit:t}){const s=e,n=t,{modal:r,dir:o}=Ys(s),i=Fl(o),a=Hs(s,"open",n),l=ee(),u=Ew();return Aw({open:a,onOpenChange:c=>{a.value=c},content:l,onContentChange:c=>{l.value=c}}),Tw({onClose:()=>{a.value=!1},isUsingKeyboardRef:u,dir:i,modal:r}),(c,d)=>(w(),K(x(mw),null,{default:k(()=>[re(c.$slots,"default")]),_:3}))}}),Ow=ce({__name:"MenuAnchor",props:{reference:{},asChild:{type:Boolean},as:{}},setup(e){const t=e;return(s,n)=>(w(),K(x(_w),ts(Ss(t)),{default:k(()=>[re(s.$slots,"default")]),_:3},16))}}),Iw=ce({__name:"MenuPortal",props:{to:{},disabled:{type:Boolean},defer:{type:Boolean},forceMount:{type:Boolean}},setup(e){const t=e;return(s,n)=>(w(),K(x(Sh),ts(Ss(t)),{default:k(()=>[re(s.$slots,"default")]),_:3},16))}});let na=0;function Rw(){ss(e=>{if(!Zs)return;const t=document.querySelectorAll("[data-reka-focus-guard]");document.body.insertAdjacentElement("afterbegin",t[0]??Ou()),document.body.insertAdjacentElement("beforeend",t[1]??Ou()),na++,e(()=>{na===1&&document.querySelectorAll("[data-reka-focus-guard]").forEach(s=>s.remove()),na--})})}function Ou(){const e=document.createElement("span");return e.setAttribute("data-reka-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}const[Vh,$w]=Vt("MenuContent"),qh=ce({__name:"MenuContentImpl",props:of({loop:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},disableOutsideScroll:{type:Boolean},trapFocus:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},{...Uh}),emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus","dismiss"],setup(e,{emit:t}){const s=e,n=t,r=mi(),o=Vl(),{trapFocus:i,disableOutsidePointerEvents:a,loop:l}=Ys(s);Rw(),jh(a.value);const u=ee(""),c=ee(0),d=ee(0),f=ee(null),h=ee("right"),m=ee(0),g=ee(null),b=ee(),{forwardRef:C,currentElement:E}=$e(),{handleTypeaheadSearch:P}=gw();Ue(E,A=>{r.onContentChange(A)}),Qn(()=>{window.clearTimeout(c.value)});function S(A){var q,j;return h.value===((q=f.value)==null?void 0:q.side)&&Db(A,(j=f.value)==null?void 0:j.area)}async function D(A){var F;n("openAutoFocus",A),!A.defaultPrevented&&(A.preventDefault(),(F=E.value)==null||F.focus({preventScroll:!0}))}function W(A){var ae;if(A.defaultPrevented)return;const q=A.target.closest("[data-reka-menu-content]")===A.currentTarget,j=A.ctrlKey||A.altKey||A.metaKey,ie=A.key.length===1,de=_b(A,mt(),E.value,{loop:l.value,arrowKeyOptions:"vertical",dir:o==null?void 0:o.dir.value,focus:!0,attributeName:"[data-reka-collection-item]:not([data-disabled])"});if(de)return de==null?void 0:de.focus();if(A.code==="Space")return;const ye=((ae=b.value)==null?void 0:ae.getItems())??[];if(q&&(A.key==="Tab"&&A.preventDefault(),!j&&ie&&P(A.key,ye)),A.target!==E.value||!Ib.includes(A.key))return;A.preventDefault();const me=[...ye.map(z=>z.ref)];Ph.includes(A.key)&&me.reverse(),Rb(me)}function I(A){var F,q;(q=(F=A==null?void 0:A.currentTarget)==null?void 0:F.contains)!=null&&q.call(F,A.target)||(window.clearTimeout(c.value),u.value="")}function O(A){var j;if(!qa(A))return;const F=A.target,q=m.value!==A.clientX;if((j=A==null?void 0:A.currentTarget)!=null&&j.contains(F)&&q){const ie=A.clientX>m.value?"right":"left";h.value=ie,m.value=A.clientX}}return $w({onItemEnter:A=>!!S(A),onItemLeave:A=>{var F;S(A)||((F=E.value)==null||F.focus(),g.value=null)},onTriggerLeave:A=>!!S(A),searchRef:u,pointerGraceTimerRef:d,onPointerGraceIntentChange:A=>{f.value=A}}),(A,F)=>(w(),K(x(Rh),{"as-child":"",trapped:x(i),onMountAutoFocus:D,onUnmountAutoFocus:F[7]||(F[7]=q=>n("closeAutoFocus",q))},{default:k(()=>[v(x(Th),{"as-child":"","disable-outside-pointer-events":x(a),onEscapeKeyDown:F[2]||(F[2]=q=>n("escapeKeyDown",q)),onPointerDownOutside:F[3]||(F[3]=q=>n("pointerDownOutside",q)),onFocusOutside:F[4]||(F[4]=q=>n("focusOutside",q)),onInteractOutside:F[5]||(F[5]=q=>n("interactOutside",q)),onDismiss:F[6]||(F[6]=q=>n("dismiss"))},{default:k(()=>[v(x(hw),{ref_key:"rovingFocusGroupRef",ref:b,"current-tab-stop-id":g.value,"onUpdate:currentTabStopId":F[0]||(F[0]=q=>g.value=q),"as-child":"",orientation:"vertical",dir:x(o).dir.value,loop:x(l),onEntryFocus:F[1]||(F[1]=q=>{n("entryFocus",q),x(o).isUsingKeyboardRef.value||q.preventDefault()})},{default:k(()=>[v(x(Cw),{ref:x(C),role:"menu",as:A.as,"as-child":A.asChild,"aria-orientation":"vertical","data-reka-menu-content":"","data-state":x(Oh)(x(r).open.value),dir:x(o).dir.value,side:A.side,"side-offset":A.sideOffset,align:A.align,"align-offset":A.alignOffset,"avoid-collisions":A.avoidCollisions,"collision-boundary":A.collisionBoundary,"collision-padding":A.collisionPadding,"arrow-padding":A.arrowPadding,"prioritize-position":A.prioritizePosition,"position-strategy":A.positionStrategy,"update-position-strategy":A.updatePositionStrategy,sticky:A.sticky,"hide-when-detached":A.hideWhenDetached,reference:A.reference,onKeydown:W,onBlur:I,onPointermove:O},{default:k(()=>[re(A.$slots,"default")]),_:3},8,["as","as-child","data-state","dir","side","side-offset","align","align-offset","avoid-collisions","collision-boundary","collision-padding","arrow-padding","prioritize-position","position-strategy","update-position-strategy","sticky","hide-when-detached","reference"])]),_:3},8,["current-tab-stop-id","dir","loop"])]),_:3},8,["disable-outside-pointer-events"])]),_:3},8,["trapped"]))}}),Dw=ce({__name:"MenuRootContentModal",props:{loop:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const s=e,n=t,r=en(s,n),o=mi(),{forwardRef:i,currentElement:a}=$e();return Lh(a),(l,u)=>(w(),K(qh,Se(x(r),{ref:x(i),"trap-focus":x(o).open.value,"disable-outside-pointer-events":x(o).open.value,"disable-outside-scroll":!0,onDismiss:u[0]||(u[0]=c=>x(o).onOpenChange(!1)),onFocusOutside:u[1]||(u[1]=bs(c=>n("focusOutside",c),["prevent"]))}),{default:k(()=>[re(l.$slots,"default")]),_:3},16,["trap-focus","disable-outside-pointer-events"]))}}),Lw=ce({__name:"MenuRootContentNonModal",props:{loop:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const r=en(e,t),o=mi();return(i,a)=>(w(),K(qh,Se(x(r),{"trap-focus":!1,"disable-outside-pointer-events":!1,"disable-outside-scroll":!1,onDismiss:a[0]||(a[0]=l=>x(o).onOpenChange(!1))}),{default:k(()=>[re(i.$slots,"default")]),_:3},16))}}),jw=ce({__name:"MenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const r=en(e,t),o=mi(),i=Vl();return(a,l)=>(w(),K(x(Ul),{present:a.forceMount||x(o).open.value},{default:k(()=>[x(i).modal.value?(w(),K(Dw,ts(Se({key:0},{...a.$attrs,...x(r)})),{default:k(()=>[re(a.$slots,"default")]),_:3},16)):(w(),K(Lw,ts(Se({key:1},{...a.$attrs,...x(r)})),{default:k(()=>[re(a.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),Bw=ce({inheritAttrs:!1,__name:"MenuItemImpl",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},setup(e){const t=e,s=Vh(),{forwardRef:n}=$e(),{CollectionItem:r}=Nh(),o=ee(!1);async function i(l){if(!l.defaultPrevented&&qa(l)){if(t.disabled)s.onItemLeave(l);else if(!s.onItemEnter(l)){const c=l.currentTarget;c==null||c.focus({preventScroll:!0})}}}async function a(l){await nt(),!l.defaultPrevented&&qa(l)&&s.onItemLeave(l)}return(l,u)=>(w(),K(x(r),{value:{textValue:l.textValue}},{default:k(()=>[v(x(tt),Se({ref:x(n),role:"menuitem",tabindex:"-1"},l.$attrs,{as:l.as,"as-child":l.asChild,"aria-disabled":l.disabled||void 0,"data-disabled":l.disabled?"":void 0,"data-highlighted":o.value?"":void 0,onPointermove:i,onPointerleave:a,onFocus:u[0]||(u[0]=async c=>{await nt(),!(c.defaultPrevented||l.disabled)&&(o.value=!0)}),onBlur:u[1]||(u[1]=async c=>{await nt(),!c.defaultPrevented&&(o.value=!1)})}),{default:k(()=>[re(l.$slots,"default")]),_:3},16,["as","as-child","aria-disabled","data-disabled","data-highlighted"])]),_:3},8,["value"]))}}),Mw=ce({__name:"MenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},emits:["select"],setup(e,{emit:t}){const s=e,n=t,{forwardRef:r,currentElement:o}=$e(),i=Vl(),a=Vh(),l=ee(!1);async function u(){const c=o.value;if(!s.disabled&&c){const d=new CustomEvent(Pb,{bubbles:!0,cancelable:!0});n("select",d),await nt(),d.defaultPrevented?l.value=!1:i.onClose()}}return(c,d)=>(w(),K(Bw,Se(s,{ref:x(r),onClick:u,onPointerdown:d[0]||(d[0]=()=>{l.value=!0}),onPointerup:d[1]||(d[1]=async f=>{var h;await nt(),!f.defaultPrevented&&(l.value||(h=f.currentTarget)==null||h.click())}),onKeydown:d[2]||(d[2]=async f=>{const h=x(a).searchRef.value!=="";c.disabled||h&&f.key===" "||x(Va).includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})}),{default:k(()=>[re(c.$slots,"default")]),_:3},16))}}),Nw=ce({__name:"DialogPortal",props:{to:{},disabled:{type:Boolean},defer:{type:Boolean},forceMount:{type:Boolean}},setup(e){const t=e;return(s,n)=>(w(),K(x(Sh),ts(Ss(t)),{default:k(()=>[re(s.$slots,"default")]),_:3},16))}}),[zh,Fw]=Vt("DropdownMenuRoot"),Uw=ce({__name:"DropdownMenuRoot",props:{defaultOpen:{type:Boolean},open:{type:Boolean,default:void 0},dir:{},modal:{type:Boolean,default:!0}},emits:["update:open"],setup(e,{emit:t}){const s=e,n=t;$e();const r=Hs(s,"open",n,{defaultValue:s.defaultOpen,passive:s.open===void 0}),o=ee(),{modal:i,dir:a}=Ys(s),l=Fl(a);return Fw({open:r,onOpenChange:u=>{r.value=u},onOpenToggle:()=>{r.value=!r.value},triggerId:"",triggerElement:o,contentId:"",modal:i,dir:l}),(u,c)=>(w(),K(x(Pw),{open:x(r),"onUpdate:open":c[0]||(c[0]=d=>ze(r)?r.value=d:null),dir:x(l),modal:x(i)},{default:k(()=>[re(u.$slots,"default",{open:x(r)})]),_:3},8,["open","dir","modal"]))}}),Vw=ce({__name:"DropdownMenuTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"button"}},setup(e){const t=e,s=zh(),{forwardRef:n,currentElement:r}=$e();return Xs(()=>{s.triggerElement=r}),s.triggerId||(s.triggerId=Ko(void 0,"reka-dropdown-menu-trigger")),(o,i)=>(w(),K(x(Ow),{"as-child":""},{default:k(()=>[v(x(tt),{id:x(s).triggerId,ref:x(n),type:o.as==="button"?"button":void 0,"as-child":t.asChild,as:o.as,"aria-haspopup":"menu","aria-expanded":x(s).open.value,"aria-controls":x(s).open.value?x(s).contentId:void 0,"data-disabled":o.disabled?"":void 0,disabled:o.disabled,"data-state":x(s).open.value?"open":"closed",onClick:i[0]||(i[0]=async a=>{var l;!o.disabled&&a.button===0&&a.ctrlKey===!1&&((l=x(s))==null||l.onOpenToggle(),await nt(),x(s).open.value&&a.preventDefault())}),onKeydown:i[1]||(i[1]=Df(a=>{o.disabled||(["Enter"," "].includes(a.key)&&x(s).onOpenToggle(),a.key==="ArrowDown"&&x(s).onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())},["enter","space","arrow-down"]))},{default:k(()=>[re(o.$slots,"default")]),_:3},8,["id","type","as-child","as","aria-expanded","aria-controls","data-disabled","disabled","data-state"])]),_:3}))}}),qw=ce({__name:"DropdownMenuPortal",props:{to:{},disabled:{type:Boolean},defer:{type:Boolean},forceMount:{type:Boolean}},setup(e){const t=e;return(s,n)=>(w(),K(x(Iw),ts(Ss(t)),{default:k(()=>[re(s.$slots,"default")]),_:3},16))}}),zw=ce({__name:"DropdownMenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(e,{emit:t}){const r=en(e,t);$e();const o=zh(),i=ee(!1);function a(l){l.defaultPrevented||(i.value||setTimeout(()=>{var u;(u=o.triggerElement.value)==null||u.focus()},0),i.value=!1,l.preventDefault())}return o.contentId||(o.contentId=Ko(void 0,"reka-dropdown-menu-content")),(l,u)=>{var c;return w(),K(x(jw),Se(x(r),{id:x(o).contentId,"aria-labelledby":(c=x(o))==null?void 0:c.triggerId,style:{"--reka-dropdown-menu-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-dropdown-menu-content-available-width":"var(--reka-popper-available-width)","--reka-dropdown-menu-content-available-height":"var(--reka-popper-available-height)","--reka-dropdown-menu-trigger-width":"var(--reka-popper-anchor-width)","--reka-dropdown-menu-trigger-height":"var(--reka-popper-anchor-height)"},onCloseAutoFocus:a,onInteractOutside:u[0]||(u[0]=d=>{var g;if(d.defaultPrevented)return;const f=d.detail.originalEvent,h=f.button===0&&f.ctrlKey===!0,m=f.button===2||h;(!x(o).modal.value||m)&&(i.value=!0),(g=x(o).triggerElement.value)!=null&&g.contains(d.target)&&d.preventDefault()})}),{default:k(()=>[re(l.$slots,"default")]),_:3},16,["id","aria-labelledby"])}}}),Hw=ce({__name:"DropdownMenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},emits:["select"],setup(e,{emit:t}){const s=e,r=Gr(t);return $e(),(o,i)=>(w(),K(x(Mw),ts(Ss({...s,...x(r)})),{default:k(()=>[re(o.$slots,"default")]),_:3},16))}}),Kw=ce({__name:"Label",props:{for:{},asChild:{type:Boolean},as:{default:"label"}},setup(e){const t=e;return $e(),(s,n)=>(w(),K(x(tt),Se(t,{onMousedown:n[0]||(n[0]=r=>{!r.defaultPrevented&&r.detail>1&&r.preventDefault()})}),{default:k(()=>[re(s.$slots,"default")]),_:3},16))}}),Nr=100,[Ww,Gw]=Vt("ProgressRoot"),ql=e=>typeof e=="number";function Jw(e,t){return kh(e)||ql(e)&&!Number.isNaN(e)&&e<=t&&e>=0?e:(console.error(`Invalid prop \`value\` of value \`${e}\` supplied to \`ProgressRoot\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Nr} if no \`max\` prop is set)
  - \`null\`  or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`),null)}function Yw(e){return ql(e)&&!Number.isNaN(e)&&e>0?e:(console.error(`Invalid prop \`max\` of value \`${e}\` supplied to \`ProgressRoot\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Nr}\`.`),Nr)}const Xw=ce({__name:"ProgressRoot",props:{modelValue:{},max:{default:Nr},getValueLabel:{type:Function,default:(e,t)=>`${Math.round(e/t*Nr)}%`},asChild:{type:Boolean},as:{}},emits:["update:modelValue","update:max"],setup(e,{emit:t}){const s=e,n=t;$e();const r=Hs(s,"modelValue",n,{passive:s.modelValue===void 0}),o=Hs(s,"max",n,{passive:s.max===void 0});Ue(()=>r.value,async a=>{const l=Jw(a,s.max);l!==a&&(await nt(),r.value=l)},{immediate:!0}),Ue(()=>s.max,a=>{const l=Yw(s.max);l!==a&&(o.value=l)},{immediate:!0});const i=ne(()=>kh(r.value)?"indeterminate":r.value===o.value?"complete":"loading");return Gw({modelValue:r,max:o,progressState:i}),(a,l)=>(w(),K(x(tt),{"as-child":a.asChild,as:a.as,"aria-valuemax":x(o),"aria-valuemin":0,"aria-valuenow":ql(x(r))?x(r):void 0,"aria-valuetext":a.getValueLabel(x(r),x(o)),"aria-label":a.getValueLabel(x(r),x(o)),role:"progressbar","data-state":i.value,"data-value":x(r)??void 0,"data-max":x(o)},{default:k(()=>[re(a.$slots,"default",{modelValue:x(r)})]),_:3},8,["as-child","as","aria-valuemax","aria-valuenow","aria-valuetext","aria-label","data-state","data-value","data-max"]))}}),Qw=ce({__name:"ProgressIndicator",props:{asChild:{type:Boolean},as:{}},setup(e){const t=e,s=Ww();return $e(),(n,r)=>{var o;return w(),K(x(tt),Se(t,{"data-state":x(s).progressState.value,"data-value":((o=x(s).modelValue)==null?void 0:o.value)??void 0,"data-max":x(s).max.value}),{default:k(()=>[re(n.$slots,"default")]),_:3},16,["data-state","data-value","data-max"])}}}),Ot={__name:"Button",props:{variant:{type:null,required:!1},size:{type:null,required:!1},class:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(e){const t=e;return(s,n)=>(w(),K(x(tt),{as:e.as,"as-child":e.asChild,class:ge(x(Ye)(x(Zw)({variant:e.variant,size:e.size}),t.class))},{default:k(()=>[re(s.$slots,"default")]),_:3},8,["as","as-child","class"]))}},Zw=wl("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-950 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 dark:focus-visible:ring-slate-300",{variants:{variant:{default:"bg-slate-900 text-slate-50 shadow hover:bg-slate-900/90 dark:bg-slate-50 dark:text-slate-900 dark:hover:bg-slate-50/90",destructive:"bg-red-500 text-slate-50 shadow-sm hover:bg-red-500/90 dark:bg-red-900 dark:text-slate-50 dark:hover:bg-red-900/90",outline:"border border-slate-200 bg-white shadow-sm hover:bg-slate-100 hover:text-slate-900 dark:border-slate-800 dark:bg-slate-950 dark:hover:bg-slate-800 dark:hover:text-slate-50",secondary:"bg-slate-100 text-slate-900 shadow-sm hover:bg-slate-100/80 dark:bg-slate-800 dark:text-slate-50 dark:hover:bg-slate-800/80",ghost:"hover:bg-slate-100 hover:text-slate-900 dark:hover:bg-slate-800 dark:hover:text-slate-50",link:"text-slate-900 underline-offset-4 hover:underline dark:text-slate-50"},size:{default:"h-9 px-4 py-2",xs:"h-7 rounded px-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),e1={__name:"DropdownMenu",props:{defaultOpen:{type:Boolean,required:!1},open:{type:Boolean,required:!1},dir:{type:String,required:!1},modal:{type:Boolean,required:!1}},emits:["update:open"],setup(e,{emit:t}){const r=en(e,t);return(o,i)=>(w(),K(x(Uw),ts(Ss(x(r))),{default:k(()=>[re(o.$slots,"default")]),_:3},16))}};/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=({size:e,strokeWidth:t=2,absoluteStrokeWidth:s,color:n,iconNode:r,name:o,class:i,...a},{slots:l})=>jt("svg",{..._o,width:e||_o.width,height:e||_o.height,stroke:n||_o.stroke,"stroke-width":s?Number(t)*24/Number(e):t,class:["lucide",`lucide-${t1(o??"icon")}`],...a},[...r.map(u=>jt(...u)),...l.default?[l.default()]:[]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=(e,t)=>(s,{slots:n})=>jt(s1,{...s,iconNode:t,name:e},n);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hh=Ae("ArrowLeftIcon",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1=Ae("BookIcon",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=Ae("ChevronDownIcon",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=Ae("ChevronRightIcon",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wh=Ae("ClockIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=Ae("DiscIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=Ae("EyeIcon",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=Ae("FileTextIcon",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=Ae("GlobeIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=Ae("ImageIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=Ae("LoaderCircleIcon",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=Ae("LoaderIcon",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=Ae("LogOutIcon",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=Ae("MessageCircleMoreIcon",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M8 12h.01",key:"czm47f"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 12h.01",key:"1l6xoz"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=Ae("MessageCircleIcon",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=Ae("MessageSquareIcon",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=Ae("MoonIcon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=Ae("PencilIcon",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1=Ae("PiggyBankIcon",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2V5z",key:"1ivx2i"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h.01",key:"xkw8gn"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=Ae("PlayIcon",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=Ae("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p1=Ae("ScrollTextIcon",[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=Ae("SendIcon",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=Ae("ShareIcon",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1=Ae("SparklesIcon",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=Ae("StarIcon",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yh=Ae("SunIcon",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1=Ae("Trash2Icon",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=Ae("TvIcon",[["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",ry:"2",key:"10ag99"}],["polyline",{points:"17 2 12 7 7 2",key:"11pgbg"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=Ae("UploadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=Ae("UserIcon",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-vue-next v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=Ae("XIcon",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),b1={__name:"DropdownMenuContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1,default:4},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(e,{emit:t}){const s=e,n=t,r=ne(()=>{const{class:i,...a}=s;return a}),o=en(r,n);return(i,a)=>(w(),K(x(qw),null,{default:k(()=>[v(x(zw),Se(x(o),{class:x(Ye)("z-50 min-w-32 overflow-hidden rounded-md border border-slate-200 bg-white p-1 text-slate-950 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-50",s.class)}),{default:k(()=>[re(i.$slots,"default")]),_:3},16,["class"])]),_:3}))}},w1={__name:"DropdownMenuItem",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1},inset:{type:Boolean,required:!1}},setup(e){const t=e,s=ne(()=>{const{class:r,...o}=t;return o}),n=Jr(s);return(r,o)=>(w(),K(x(Hw),Se(x(n),{class:x(Ye)("relative flex cursor-default select-none items-center rounded-sm gap-2 px-2 py-1.5 text-sm outline-none transition-colors focus:bg-slate-100 focus:text-slate-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50  [&>svg]:size-4 [&>svg]:shrink-0 dark:focus:bg-slate-800 dark:focus:text-slate-50",e.inset&&"pl-8",t.class)}),{default:k(()=>[re(r.$slots,"default")]),_:3},16,["class"]))}},x1={__name:"DropdownMenuTrigger",props:{disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){const s=Jr(e);return(n,r)=>(w(),K(x(Vw),Se({class:"outline-none"},x(s)),{default:k(()=>[re(n.$slots,"default")]),_:3},16))}},ft=(e,t)=>{const s=e.__vccOpts||e;for(const[n,r]of t)s[n]=r;return s},k1={name:"MainLayout",components:{Button:Ot,ChevronDownIcon:gi,TrophyIcon:r1,UserIcon:Qh,LogOutIcon:Gh,TvIcon:_1,SunIcon:Yh,MoonIcon:Jh,DropdownMenu:e1,DropdownMenuContent:b1,DropdownMenuItem:w1,DropdownMenuTrigger:x1,ChatIcon:c1},data(){return{user:null,authSubscription:null,isDarkTheme:!1}},methods:{login(){window.location.href="/login"},async logout(){try{localStorage.removeItem("sb-wpwichwnfgbpggcqujld-auth-token"),await St.auth.signOut(),window.location.href="/login"}catch(e){console.error("Error during logout:",e)}},async checkUser(){var t;const{data:e}=await St.auth.getSession();this.user=((t=e.session)==null?void 0:t.user)||null},toggleTheme(){this.isDarkTheme=!this.isDarkTheme,this.isDarkTheme?(document.documentElement.classList.add("dark"),console.log("Dark mode enabled")):(document.documentElement.classList.remove("dark"),console.log("Light mode enabled")),localStorage.setItem("theme",this.isDarkTheme?"dark":"light")},initTheme(){const e=localStorage.getItem("theme");e?this.isDarkTheme=e==="dark":this.isDarkTheme=window.matchMedia("(prefers-color-scheme: dark)").matches,this.isDarkTheme?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t=>{localStorage.getItem("theme")===null&&(this.isDarkTheme=t.matches,this.isDarkTheme?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"))})}},async mounted(){this.initTheme(),await this.checkUser();const{data:e}=St.auth.onAuthStateChange(async(t,s)=>{this.user=(s==null?void 0:s.user)||null,t==="SIGNED_OUT"&&(window.location.href="/login")});this.authSubscription=e}},C1={class:"min-h-screen flex flex-col bg-white dark:bg-slate-950 text-slate-900 dark:text-slate-50"},S1={class:"bg-white/95 dark:bg-slate-950/95 backdrop-blur supports-[backdrop-filter]:bg-white/60 dark:supports-[backdrop-filter]:bg-slate-950/60 border-b border-slate-200 dark:border-slate-800 hidden md:block"},E1={class:"container mx-auto px-4 py-3 flex items-center justify-between"},A1={class:"flex items-center gap-8"},T1={class:"flex gap-6"},P1={class:"flex items-center gap-4"},O1={class:"sr-only"},I1={class:"h-8 w-8 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center"},R1={class:"fixed bottom-0 left-0 right-0 border-t border-slate-200 dark:border-slate-800 bg-white/95 dark:bg-slate-950/95 backdrop-blur supports-[backdrop-filter]:bg-white/60 dark:supports-[backdrop-filter]:bg-slate-950/60 md:hidden z-50"},$1={class:"grid grid-cols-4 gap-2 p-2"},D1={class:"flex-1 container mx-auto px-4 pb-16 md:pb-4"};function L1(e,t,s,n,r,o){const i=L("router-link"),a=L("SunIcon"),l=L("MoonIcon"),u=L("Button"),c=L("UserIcon"),d=L("ChevronDownIcon"),f=L("DropdownMenuTrigger"),h=L("Router-link"),m=L("DropdownMenuItem"),g=L("LogOutIcon"),b=L("DropdownMenuContent"),C=L("DropdownMenu"),E=L("TvIcon"),P=L("ChatIcon"),S=L("TrophyIcon");return w(),$("div",C1,[p("nav",S1,[p("div",E1,[p("div",A1,[v(i,{to:"/",class:"flex items-center gap-2"},{default:k(()=>t[0]||(t[0]=[p("span",{class:"text-2xl font-bold"},"Sitchat",-1)])),_:1}),p("div",T1,[v(i,{to:"/shows",class:"text-sm font-medium text-slate-900 dark:text-slate-50 hover:text-primary transition-colors"},{default:k(()=>t[1]||(t[1]=[H(" Shows ")])),_:1}),v(i,{to:"/Chat/History",class:"text-sm font-medium text-slate-900 dark:text-slate-50 hover:text-primary transition-colors"},{default:k(()=>t[2]||(t[2]=[H(" Chat History ")])),_:1}),v(i,{to:"/leaderboard",class:"text-sm font-medium text-slate-900 dark:text-slate-50 hover:text-primary transition-colors"},{default:k(()=>t[3]||(t[3]=[H(" Leaderboard ")])),_:1})])]),p("div",P1,[v(u,{variant:"ghost",size:"icon",class:"rounded-full",onClick:o.toggleTheme,title:r.isDarkTheme?"Switch to light mode":"Switch to dark mode"},{default:k(()=>[r.isDarkTheme?(w(),K(a,{key:0,class:"h-5 w-5"})):(w(),K(l,{key:1,class:"h-5 w-5"})),p("span",O1,V(r.isDarkTheme?"Light Mode":"Dark Mode"),1)]),_:1},8,["onClick","title"]),r.user?(w(),K(C,{key:0},{default:k(()=>[v(f,{class:"flex items-center gap-1 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full p-2"},{default:k(()=>[p("div",I1,[v(c,{class:"h-4 w-4"})]),v(d,{class:"h-4 w-4"})]),_:1}),v(b,null,{default:k(()=>[v(m,null,{default:k(()=>[v(c,{class:"mr-2 h-4 w-4"}),v(h,{to:"/profile"},{default:k(()=>t[4]||(t[4]=[H("Profile")])),_:1})]),_:1}),v(m,{onClick:o.logout},{default:k(()=>[v(g,{class:"mr-2 h-4 w-4"}),t[5]||(t[5]=H(" Logout "))]),_:1},8,["onClick"])]),_:1})]),_:1})):(w(),K(u,{key:1,onClick:o.login},{default:k(()=>t[6]||(t[6]=[H(" Sign In ")])),_:1},8,["onClick"]))])])]),p("div",R1,[p("div",$1,[v(i,{to:"/shows",class:"flex flex-col items-center gap-1 text-xs font-medium text-slate-900 dark:text-slate-50 hover:text-primary transition-colors"},{default:k(()=>[v(E,{class:"h-5 w-5"}),t[7]||(t[7]=p("span",null,"Shows",-1))]),_:1}),v(i,{to:"/Chat/History",class:"flex flex-col items-center gap-1 text-xs font-medium text-slate-900 dark:text-slate-50 hover:text-primary transition-colors"},{default:k(()=>[v(P,{class:"h-5 w-5"}),t[8]||(t[8]=p("span",null,"Chat History",-1))]),_:1}),v(i,{to:"/leaderboard",class:"flex flex-col items-center gap-1 text-xs font-medium text-slate-900 dark:text-slate-50 hover:text-primary transition-colors"},{default:k(()=>[v(S,{class:"h-5 w-5"}),t[9]||(t[9]=p("span",null,"Leaderboard",-1))]),_:1}),v(i,{to:"/profile",class:"flex flex-col items-center gap-1 text-xs font-medium text-slate-900 dark:text-slate-50 hover:text-primary transition-colors"},{default:k(()=>[v(c,{class:"h-5 w-5"}),t[10]||(t[10]=p("span",null,"Profile",-1))]),_:1})])]),p("main",D1,[re(e.$slots,"default")]),t[11]||(t[11]=vl('<footer class="border-t border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 hidden md:block"><div class="container mx-auto px-4 py-8"><div class="grid grid-cols-1 md:grid-cols-3 gap-8"><div><h3 class="text-lg font-semibold mb-4 text-slate-900 dark:text-slate-50">Sitchat</h3><p class="text-sm text-slate-500 dark:text-slate-400"> Bringing stories to life through interactive AI experiences </p></div><div><h3 class="text-lg font-semibold mb-4 text-slate-900 dark:text-slate-50">Legal</h3><ul class="space-y-2 text-sm"><li><a href="#" class="text-slate-500 dark:text-slate-400 hover:text-primary transition-colors">Privacy Policy</a></li><li><a href="#" class="text-slate-500 dark:text-slate-400 hover:text-primary transition-colors">Terms of Service</a></li></ul></div><div><h3 class="text-lg font-semibold mb-4 text-slate-900 dark:text-slate-50">Social</h3><div class="flex gap-4"><a href="#" class="text-slate-500 dark:text-slate-400 hover:text-primary transition-colors"></a><a href="#" class="text-slate-500 dark:text-slate-400 hover:text-primary transition-colors"></a></div></div></div></div></footer>',1))])}const j1=ft(k1,[["render",L1]]),B1={name:"App",components:{MainLayout:j1},mounted(){const e=localStorage.getItem("theme");e==="dark"?document.documentElement.classList.add("dark"):e==="light"?document.documentElement.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.documentElement.classList.add("dark")}};function M1(e,t,s,n,r,o){const i=L("RouterView"),a=L("MainLayout");return e.$route.meta.layout==="main"?(w(),K(a,{key:0},{default:k(()=>[v(i)]),_:1})):(w(),K(i,{key:1}))}const N1=ft(B1,[["render",M1]]);/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const jn=typeof document<"u";function Zh(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function F1(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Zh(e.default)}const Pe=Object.assign;function ra(e,t){const s={};for(const n in t){const r=t[n];s[n]=Ft(r)?r.map(e):e(r)}return s}const Ar=()=>{},Ft=Array.isArray,ep=/#/g,U1=/&/g,V1=/\//g,q1=/=/g,z1=/\?/g,tp=/\+/g,H1=/%5B/g,K1=/%5D/g,sp=/%5E/g,W1=/%60/g,np=/%7B/g,G1=/%7C/g,rp=/%7D/g,J1=/%20/g;function Kl(e){return encodeURI(""+e).replace(G1,"|").replace(H1,"[").replace(K1,"]")}function Y1(e){return Kl(e).replace(np,"{").replace(rp,"}").replace(sp,"^")}function Wa(e){return Kl(e).replace(tp,"%2B").replace(J1,"+").replace(ep,"%23").replace(U1,"%26").replace(W1,"`").replace(np,"{").replace(rp,"}").replace(sp,"^")}function X1(e){return Wa(e).replace(q1,"%3D")}function Q1(e){return Kl(e).replace(ep,"%23").replace(z1,"%3F")}function Z1(e){return e==null?"":Q1(e).replace(V1,"%2F")}function Fr(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const ex=/\/$/,tx=e=>e.replace(ex,"");function oa(e,t,s="/"){let n,r={},o="",i="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(n=t.slice(0,l),o=t.slice(l+1,a>-1?a:t.length),r=e(o)),a>-1&&(n=n||t.slice(0,a),i=t.slice(a,t.length)),n=ox(n??t,s),{fullPath:n+(o&&"?")+o+i,path:n,query:r,hash:Fr(i)}}function sx(e,t){const s=t.query?e(t.query):"";return t.path+(s&&"?")+s+(t.hash||"")}function Iu(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function nx(e,t,s){const n=t.matched.length-1,r=s.matched.length-1;return n>-1&&n===r&&Yn(t.matched[n],s.matched[r])&&op(t.params,s.params)&&e(t.query)===e(s.query)&&t.hash===s.hash}function Yn(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function op(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(!rx(e[s],t[s]))return!1;return!0}function rx(e,t){return Ft(e)?Ru(e,t):Ft(t)?Ru(t,e):e===t}function Ru(e,t){return Ft(t)?e.length===t.length&&e.every((s,n)=>s===t[n]):e.length===1&&e[0]===t}function ox(e,t){if(e.startsWith("/"))return e;if(!e)return t;const s=t.split("/"),n=e.split("/"),r=n[n.length-1];(r===".."||r===".")&&n.push("");let o=s.length-1,i,a;for(i=0;i<n.length;i++)if(a=n[i],a!==".")if(a==="..")o>1&&o--;else break;return s.slice(0,o).join("/")+"/"+n.slice(i).join("/")}const Ps={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Ur;(function(e){e.pop="pop",e.push="push"})(Ur||(Ur={}));var Tr;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Tr||(Tr={}));function ix(e){if(!e)if(jn){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),tx(e)}const ax=/^[^#]+#/;function lx(e,t){return e.replace(ax,"#")+t}function cx(e,t){const s=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-s.left-(t.left||0),top:n.top-s.top-(t.top||0)}}const _i=()=>({left:window.scrollX,top:window.scrollY});function ux(e){let t;if("el"in e){const s=e.el,n=typeof s=="string"&&s.startsWith("#"),r=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!r)return;t=cx(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function $u(e,t){return(history.state?history.state.position-t:-1)+e}const Ga=new Map;function dx(e,t){Ga.set(e,t)}function fx(e){const t=Ga.get(e);return Ga.delete(e),t}let hx=()=>location.protocol+"//"+location.host;function ip(e,t){const{pathname:s,search:n,hash:r}=t,o=e.indexOf("#");if(o>-1){let a=r.includes(e.slice(o))?e.slice(o).length:1,l=r.slice(a);return l[0]!=="/"&&(l="/"+l),Iu(l,"")}return Iu(s,e)+n+r}function px(e,t,s,n){let r=[],o=[],i=null;const a=({state:f})=>{const h=ip(e,location),m=s.value,g=t.value;let b=0;if(f){if(s.value=h,t.value=f,i&&i===m){i=null;return}b=g?f.position-g.position:0}else n(h);r.forEach(C=>{C(s.value,m,{delta:b,type:Ur.pop,direction:b?b>0?Tr.forward:Tr.back:Tr.unknown})})};function l(){i=s.value}function u(f){r.push(f);const h=()=>{const m=r.indexOf(f);m>-1&&r.splice(m,1)};return o.push(h),h}function c(){const{history:f}=window;f.state&&f.replaceState(Pe({},f.state,{scroll:_i()}),"")}function d(){for(const f of o)f();o=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:l,listen:u,destroy:d}}function Du(e,t,s,n=!1,r=!1){return{back:e,current:t,forward:s,replaced:n,position:window.history.length,scroll:r?_i():null}}function mx(e){const{history:t,location:s}=window,n={value:ip(e,s)},r={value:t.state};r.value||o(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(l,u,c){const d=e.indexOf("#"),f=d>-1?(s.host&&document.querySelector("base")?e:e.slice(d))+l:hx()+e+l;try{t[c?"replaceState":"pushState"](u,"",f),r.value=u}catch(h){console.error(h),s[c?"replace":"assign"](f)}}function i(l,u){const c=Pe({},t.state,Du(r.value.back,l,r.value.forward,!0),u,{position:r.value.position});o(l,c,!0),n.value=l}function a(l,u){const c=Pe({},r.value,t.state,{forward:l,scroll:_i()});o(c.current,c,!0);const d=Pe({},Du(n.value,l,null),{position:c.position+1},u);o(l,d,!1),n.value=l}return{location:n,state:r,push:a,replace:i}}function gx(e){e=ix(e);const t=mx(e),s=px(e,t.state,t.location,t.replace);function n(o,i=!0){i||s.pauseListeners(),history.go(o)}const r=Pe({location:"",base:e,go:n,createHref:lx.bind(null,e)},t,s);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function yx(e){return typeof e=="string"||e&&typeof e=="object"}function ap(e){return typeof e=="string"||typeof e=="symbol"}const lp=Symbol("");var Lu;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Lu||(Lu={}));function Xn(e,t){return Pe(new Error,{type:e,[lp]:!0},t)}function hs(e,t){return e instanceof Error&&lp in e&&(t==null||!!(e.type&t))}const ju="[^/]+?",vx={sensitive:!1,strict:!1,start:!0,end:!0},_x=/[.+*?^${}()[\]/\\]/g;function bx(e,t){const s=Pe({},vx,t),n=[];let r=s.start?"^":"";const o=[];for(const u of e){const c=u.length?[]:[90];s.strict&&!u.length&&(r+="/");for(let d=0;d<u.length;d++){const f=u[d];let h=40+(s.sensitive?.25:0);if(f.type===0)d||(r+="/"),r+=f.value.replace(_x,"\\$&"),h+=40;else if(f.type===1){const{value:m,repeatable:g,optional:b,regexp:C}=f;o.push({name:m,repeatable:g,optional:b});const E=C||ju;if(E!==ju){h+=10;try{new RegExp(`(${E})`)}catch(S){throw new Error(`Invalid custom RegExp for param "${m}" (${E}): `+S.message)}}let P=g?`((?:${E})(?:/(?:${E}))*)`:`(${E})`;d||(P=b&&u.length<2?`(?:/${P})`:"/"+P),b&&(P+="?"),r+=P,h+=20,b&&(h+=-8),g&&(h+=-20),E===".*"&&(h+=-50)}c.push(h)}n.push(c)}if(s.strict&&s.end){const u=n.length-1;n[u][n[u].length-1]+=.7000000000000001}s.strict||(r+="/?"),s.end?r+="$":s.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const i=new RegExp(r,s.sensitive?"":"i");function a(u){const c=u.match(i),d={};if(!c)return null;for(let f=1;f<c.length;f++){const h=c[f]||"",m=o[f-1];d[m.name]=h&&m.repeatable?h.split("/"):h}return d}function l(u){let c="",d=!1;for(const f of e){(!d||!c.endsWith("/"))&&(c+="/"),d=!1;for(const h of f)if(h.type===0)c+=h.value;else if(h.type===1){const{value:m,repeatable:g,optional:b}=h,C=m in u?u[m]:"";if(Ft(C)&&!g)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const E=Ft(C)?C.join("/"):C;if(!E)if(b)f.length<2&&(c.endsWith("/")?c=c.slice(0,-1):d=!0);else throw new Error(`Missing required param "${m}"`);c+=E}}return c||"/"}return{re:i,score:n,keys:o,parse:a,stringify:l}}function wx(e,t){let s=0;for(;s<e.length&&s<t.length;){const n=t[s]-e[s];if(n)return n;s++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function cp(e,t){let s=0;const n=e.score,r=t.score;for(;s<n.length&&s<r.length;){const o=wx(n[s],r[s]);if(o)return o;s++}if(Math.abs(r.length-n.length)===1){if(Bu(n))return 1;if(Bu(r))return-1}return r.length-n.length}function Bu(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const xx={type:0,value:""},kx=/[a-zA-Z0-9_]/;function Cx(e){if(!e)return[[]];if(e==="/")return[[xx]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(h){throw new Error(`ERR (${s})/"${u}": ${h}`)}let s=0,n=s;const r=[];let o;function i(){o&&r.push(o),o=[]}let a=0,l,u="",c="";function d(){u&&(s===0?o.push({type:0,value:u}):s===1||s===2||s===3?(o.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function f(){u+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&s!==2){n=s,s=4;continue}switch(s){case 0:l==="/"?(u&&d(),i()):l===":"?(d(),s=1):f();break;case 4:f(),s=n;break;case 1:l==="("?s=2:kx.test(l)?f():(d(),s=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:s=3:c+=l;break;case 3:d(),s=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,c="";break;default:t("Unknown state");break}}return s===2&&t(`Unfinished custom RegExp for param "${u}"`),d(),i(),r}function Sx(e,t,s){const n=bx(Cx(e.path),s),r=Pe(n,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function Ex(e,t){const s=[],n=new Map;t=Uu({strict:!1,end:!0,sensitive:!1},t);function r(d){return n.get(d)}function o(d,f,h){const m=!h,g=Nu(d);g.aliasOf=h&&h.record;const b=Uu(t,d),C=[g];if("alias"in d){const S=typeof d.alias=="string"?[d.alias]:d.alias;for(const D of S)C.push(Nu(Pe({},g,{components:h?h.record.components:g.components,path:D,aliasOf:h?h.record:g})))}let E,P;for(const S of C){const{path:D}=S;if(f&&D[0]!=="/"){const W=f.record.path,I=W[W.length-1]==="/"?"":"/";S.path=f.record.path+(D&&I+D)}if(E=Sx(S,f,b),h?h.alias.push(E):(P=P||E,P!==E&&P.alias.push(E),m&&d.name&&!Fu(E)&&i(d.name)),up(E)&&l(E),g.children){const W=g.children;for(let I=0;I<W.length;I++)o(W[I],E,h&&h.children[I])}h=h||E}return P?()=>{i(P)}:Ar}function i(d){if(ap(d)){const f=n.get(d);f&&(n.delete(d),s.splice(s.indexOf(f),1),f.children.forEach(i),f.alias.forEach(i))}else{const f=s.indexOf(d);f>-1&&(s.splice(f,1),d.record.name&&n.delete(d.record.name),d.children.forEach(i),d.alias.forEach(i))}}function a(){return s}function l(d){const f=Px(d,s);s.splice(f,0,d),d.record.name&&!Fu(d)&&n.set(d.record.name,d)}function u(d,f){let h,m={},g,b;if("name"in d&&d.name){if(h=n.get(d.name),!h)throw Xn(1,{location:d});b=h.record.name,m=Pe(Mu(f.params,h.keys.filter(P=>!P.optional).concat(h.parent?h.parent.keys.filter(P=>P.optional):[]).map(P=>P.name)),d.params&&Mu(d.params,h.keys.map(P=>P.name))),g=h.stringify(m)}else if(d.path!=null)g=d.path,h=s.find(P=>P.re.test(g)),h&&(m=h.parse(g),b=h.record.name);else{if(h=f.name?n.get(f.name):s.find(P=>P.re.test(f.path)),!h)throw Xn(1,{location:d,currentLocation:f});b=h.record.name,m=Pe({},f.params,d.params),g=h.stringify(m)}const C=[];let E=h;for(;E;)C.unshift(E.record),E=E.parent;return{name:b,path:g,params:m,matched:C,meta:Tx(C)}}e.forEach(d=>o(d));function c(){s.length=0,n.clear()}return{addRoute:o,resolve:u,removeRoute:i,clearRoutes:c,getRoutes:a,getRecordMatcher:r}}function Mu(e,t){const s={};for(const n of t)n in e&&(s[n]=e[n]);return s}function Nu(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Ax(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Ax(e){const t={},s=e.props||!1;if("component"in e)t.default=s;else for(const n in e.components)t[n]=typeof s=="object"?s[n]:s;return t}function Fu(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Tx(e){return e.reduce((t,s)=>Pe(t,s.meta),{})}function Uu(e,t){const s={};for(const n in e)s[n]=n in t?t[n]:e[n];return s}function Px(e,t){let s=0,n=t.length;for(;s!==n;){const o=s+n>>1;cp(e,t[o])<0?n=o:s=o+1}const r=Ox(e);return r&&(n=t.lastIndexOf(r,n-1)),n}function Ox(e){let t=e;for(;t=t.parent;)if(up(t)&&cp(e,t)===0)return t}function up({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Ix(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<n.length;++r){const o=n[r].replace(tp," "),i=o.indexOf("="),a=Fr(i<0?o:o.slice(0,i)),l=i<0?null:Fr(o.slice(i+1));if(a in t){let u=t[a];Ft(u)||(u=t[a]=[u]),u.push(l)}else t[a]=l}return t}function Vu(e){let t="";for(let s in e){const n=e[s];if(s=X1(s),n==null){n!==void 0&&(t+=(t.length?"&":"")+s);continue}(Ft(n)?n.map(o=>o&&Wa(o)):[n&&Wa(n)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+s,o!=null&&(t+="="+o))})}return t}function Rx(e){const t={};for(const s in e){const n=e[s];n!==void 0&&(t[s]=Ft(n)?n.map(r=>r==null?null:""+r):n==null?n:""+n)}return t}const $x=Symbol(""),qu=Symbol(""),bi=Symbol(""),dp=Symbol(""),Ja=Symbol("");function fr(){let e=[];function t(n){return e.push(n),()=>{const r=e.indexOf(n);r>-1&&e.splice(r,1)}}function s(){e=[]}return{add:t,list:()=>e.slice(),reset:s}}function Bs(e,t,s,n,r,o=i=>i()){const i=n&&(n.enterCallbacks[r]=n.enterCallbacks[r]||[]);return()=>new Promise((a,l)=>{const u=f=>{f===!1?l(Xn(4,{from:s,to:t})):f instanceof Error?l(f):yx(f)?l(Xn(2,{from:t,to:f})):(i&&n.enterCallbacks[r]===i&&typeof f=="function"&&i.push(f),a())},c=o(()=>e.call(n&&n.instances[r],t,s,u));let d=Promise.resolve(c);e.length<3&&(d=d.then(u)),d.catch(f=>l(f))})}function ia(e,t,s,n,r=o=>o()){const o=[];for(const i of e)for(const a in i.components){let l=i.components[a];if(!(t!=="beforeRouteEnter"&&!i.instances[a]))if(Zh(l)){const c=(l.__vccOpts||l)[t];c&&o.push(Bs(c,s,n,i,a,r))}else{let u=l();o.push(()=>u.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${a}" at "${i.path}"`);const d=F1(c)?c.default:c;i.mods[a]=c,i.components[a]=d;const h=(d.__vccOpts||d)[t];return h&&Bs(h,s,n,i,a,r)()}))}}return o}function zu(e){const t=Ct(bi),s=Ct(dp),n=ne(()=>{const l=x(e.to);return t.resolve(l)}),r=ne(()=>{const{matched:l}=n.value,{length:u}=l,c=l[u-1],d=s.matched;if(!c||!d.length)return-1;const f=d.findIndex(Yn.bind(null,c));if(f>-1)return f;const h=Hu(l[u-2]);return u>1&&Hu(c)===h&&d[d.length-1].path!==h?d.findIndex(Yn.bind(null,l[u-2])):f}),o=ne(()=>r.value>-1&&Mx(s.params,n.value.params)),i=ne(()=>r.value>-1&&r.value===s.matched.length-1&&op(s.params,n.value.params));function a(l={}){if(Bx(l)){const u=t[x(e.replace)?"replace":"push"](x(e.to)).catch(Ar);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:n,href:ne(()=>n.value.href),isActive:o,isExactActive:i,navigate:a}}function Dx(e){return e.length===1?e[0]:e}const Lx=ce({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:zu,setup(e,{slots:t}){const s=is(zu(e)),{options:n}=Ct(bi),r=ne(()=>({[Ku(e.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[Ku(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const o=t.default&&Dx(t.default(s));return e.custom?o:jt("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:r.value},o)}}}),jx=Lx;function Bx(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Mx(e,t){for(const s in t){const n=t[s],r=e[s];if(typeof n=="string"){if(n!==r)return!1}else if(!Ft(r)||r.length!==n.length||n.some((o,i)=>o!==r[i]))return!1}return!0}function Hu(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Ku=(e,t,s)=>e??t??s,Nx=ce({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:s}){const n=Ct(Ja),r=ne(()=>e.route||n.value),o=Ct(qu,0),i=ne(()=>{let u=x(o);const{matched:c}=r.value;let d;for(;(d=c[u])&&!d.components;)u++;return u}),a=ne(()=>r.value.matched[i.value]);qn(qu,ne(()=>i.value+1)),qn($x,a),qn(Ja,r);const l=ee();return Ue(()=>[l.value,a.value,e.name],([u,c,d],[f,h,m])=>{c&&(c.instances[d]=u,h&&h!==c&&u&&u===f&&(c.leaveGuards.size||(c.leaveGuards=h.leaveGuards),c.updateGuards.size||(c.updateGuards=h.updateGuards))),u&&c&&(!h||!Yn(c,h)||!f)&&(c.enterCallbacks[d]||[]).forEach(g=>g(u))},{flush:"post"}),()=>{const u=r.value,c=e.name,d=a.value,f=d&&d.components[c];if(!f)return Wu(s.default,{Component:f,route:u});const h=d.props[c],m=h?h===!0?u.params:typeof h=="function"?h(u):h:null,b=jt(f,Pe({},m,t,{onVnodeUnmounted:C=>{C.component.isUnmounted&&(d.instances[c]=null)},ref:l}));return Wu(s.default,{Component:b,route:u})||b}}});function Wu(e,t){if(!e)return null;const s=e(t);return s.length===1?s[0]:s}const Fx=Nx;function Ux(e){const t=Ex(e.routes,e),s=e.parseQuery||Ix,n=e.stringifyQuery||Vu,r=e.history,o=fr(),i=fr(),a=fr(),l=ni(Ps);let u=Ps;jn&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=ra.bind(null,R=>""+R),d=ra.bind(null,Z1),f=ra.bind(null,Fr);function h(R,Q){let Y,oe;return ap(R)?(Y=t.getRecordMatcher(R),oe=Q):oe=R,t.addRoute(oe,Y)}function m(R){const Q=t.getRecordMatcher(R);Q&&t.removeRoute(Q)}function g(){return t.getRoutes().map(R=>R.record)}function b(R){return!!t.getRecordMatcher(R)}function C(R,Q){if(Q=Pe({},Q||l.value),typeof R=="string"){const T=oa(s,R,Q.path),B=t.resolve({path:T.path},Q),N=r.createHref(T.fullPath);return Pe(T,B,{params:f(B.params),hash:Fr(T.hash),redirectedFrom:void 0,href:N})}let Y;if(R.path!=null)Y=Pe({},R,{path:oa(s,R.path,Q.path).path});else{const T=Pe({},R.params);for(const B in T)T[B]==null&&delete T[B];Y=Pe({},R,{params:d(T)}),Q.params=d(Q.params)}const oe=t.resolve(Y,Q),Te=R.hash||"";oe.params=c(f(oe.params));const y=sx(n,Pe({},R,{hash:Y1(Te),path:oe.path})),_=r.createHref(y);return Pe({fullPath:y,hash:Te,query:n===Vu?Rx(R.query):R.query||{}},oe,{redirectedFrom:void 0,href:_})}function E(R){return typeof R=="string"?oa(s,R,l.value.path):Pe({},R)}function P(R,Q){if(u!==R)return Xn(8,{from:Q,to:R})}function S(R){return I(R)}function D(R){return S(Pe(E(R),{replace:!0}))}function W(R){const Q=R.matched[R.matched.length-1];if(Q&&Q.redirect){const{redirect:Y}=Q;let oe=typeof Y=="function"?Y(R):Y;return typeof oe=="string"&&(oe=oe.includes("?")||oe.includes("#")?oe=E(oe):{path:oe},oe.params={}),Pe({query:R.query,hash:R.hash,params:oe.path!=null?{}:R.params},oe)}}function I(R,Q){const Y=u=C(R),oe=l.value,Te=R.state,y=R.force,_=R.replace===!0,T=W(Y);if(T)return I(Pe(E(T),{state:typeof T=="object"?Pe({},Te,T.state):Te,force:y,replace:_}),Q||Y);const B=Y;B.redirectedFrom=Q;let N;return!y&&nx(n,oe,Y)&&(N=Xn(16,{to:B,from:oe}),it(oe,oe,!0,!1)),(N?Promise.resolve(N):F(B,oe)).catch(M=>hs(M)?hs(M,2)?M:He(M):z(M,B,oe)).then(M=>{if(M){if(hs(M,2))return I(Pe({replace:_},E(M.to),{state:typeof M.to=="object"?Pe({},Te,M.to.state):Te,force:y}),Q||B)}else M=j(B,oe,!0,_,Te);return q(B,oe,M),M})}function O(R,Q){const Y=P(R,Q);return Y?Promise.reject(Y):Promise.resolve()}function A(R){const Q=Ke.values().next().value;return Q&&typeof Q.runWithContext=="function"?Q.runWithContext(R):R()}function F(R,Q){let Y;const[oe,Te,y]=Vx(R,Q);Y=ia(oe.reverse(),"beforeRouteLeave",R,Q);for(const T of oe)T.leaveGuards.forEach(B=>{Y.push(Bs(B,R,Q))});const _=O.bind(null,R,Q);return Y.push(_),at(Y).then(()=>{Y=[];for(const T of o.list())Y.push(Bs(T,R,Q));return Y.push(_),at(Y)}).then(()=>{Y=ia(Te,"beforeRouteUpdate",R,Q);for(const T of Te)T.updateGuards.forEach(B=>{Y.push(Bs(B,R,Q))});return Y.push(_),at(Y)}).then(()=>{Y=[];for(const T of y)if(T.beforeEnter)if(Ft(T.beforeEnter))for(const B of T.beforeEnter)Y.push(Bs(B,R,Q));else Y.push(Bs(T.beforeEnter,R,Q));return Y.push(_),at(Y)}).then(()=>(R.matched.forEach(T=>T.enterCallbacks={}),Y=ia(y,"beforeRouteEnter",R,Q,A),Y.push(_),at(Y))).then(()=>{Y=[];for(const T of i.list())Y.push(Bs(T,R,Q));return Y.push(_),at(Y)}).catch(T=>hs(T,8)?T:Promise.reject(T))}function q(R,Q,Y){a.list().forEach(oe=>A(()=>oe(R,Q,Y)))}function j(R,Q,Y,oe,Te){const y=P(R,Q);if(y)return y;const _=Q===Ps,T=jn?history.state:{};Y&&(oe||_?r.replace(R.fullPath,Pe({scroll:_&&T&&T.scroll},Te)):r.push(R.fullPath,Te)),l.value=R,it(R,Q,Y,_),He()}let ie;function de(){ie||(ie=r.listen((R,Q,Y)=>{if(!cs.listening)return;const oe=C(R),Te=W(oe);if(Te){I(Pe(Te,{replace:!0,force:!0}),oe).catch(Ar);return}u=oe;const y=l.value;jn&&dx($u(y.fullPath,Y.delta),_i()),F(oe,y).catch(_=>hs(_,12)?_:hs(_,2)?(I(Pe(E(_.to),{force:!0}),oe).then(T=>{hs(T,20)&&!Y.delta&&Y.type===Ur.pop&&r.go(-1,!1)}).catch(Ar),Promise.reject()):(Y.delta&&r.go(-Y.delta,!1),z(_,oe,y))).then(_=>{_=_||j(oe,y,!1),_&&(Y.delta&&!hs(_,8)?r.go(-Y.delta,!1):Y.type===Ur.pop&&hs(_,20)&&r.go(-1,!1)),q(oe,y,_)}).catch(Ar)}))}let ye=fr(),me=fr(),ae;function z(R,Q,Y){He(R);const oe=me.list();return oe.length?oe.forEach(Te=>Te(R,Q,Y)):console.error(R),Promise.reject(R)}function Fe(){return ae&&l.value!==Ps?Promise.resolve():new Promise((R,Q)=>{ye.add([R,Q])})}function He(R){return ae||(ae=!R,de(),ye.list().forEach(([Q,Y])=>R?Y(R):Q()),ye.reset()),R}function it(R,Q,Y,oe){const{scrollBehavior:Te}=e;if(!jn||!Te)return Promise.resolve();const y=!Y&&fx($u(R.fullPath,0))||(oe||!Y)&&history.state&&history.state.scroll||null;return nt().then(()=>Te(R,Q,y)).then(_=>_&&ux(_)).catch(_=>z(_,R,Q))}const Xe=R=>r.go(R);let Ve;const Ke=new Set,cs={currentRoute:l,listening:!0,addRoute:h,removeRoute:m,clearRoutes:t.clearRoutes,hasRoute:b,getRoutes:g,resolve:C,options:e,push:S,replace:D,go:Xe,back:()=>Xe(-1),forward:()=>Xe(1),beforeEach:o.add,beforeResolve:i.add,afterEach:a.add,onError:me.add,isReady:Fe,install(R){const Q=this;R.component("RouterLink",jx),R.component("RouterView",Fx),R.config.globalProperties.$router=Q,Object.defineProperty(R.config.globalProperties,"$route",{enumerable:!0,get:()=>x(l)}),jn&&!Ve&&l.value===Ps&&(Ve=!0,S(r.location).catch(Te=>{}));const Y={};for(const Te in Ps)Object.defineProperty(Y,Te,{get:()=>l.value[Te],enumerable:!0});R.provide(bi,Q),R.provide(dp,Bd(Y)),R.provide(Ja,l);const oe=R.unmount;Ke.add(R),R.unmount=function(){Ke.delete(R),Ke.size<1&&(u=Ps,ie&&ie(),ie=null,l.value=Ps,Ve=!1,ae=!1),oe()}}};function at(R){return R.reduce((Q,Y)=>Q.then(()=>A(Y)),Promise.resolve())}return cs}function Vx(e,t){const s=[],n=[],r=[],o=Math.max(t.matched.length,e.matched.length);for(let i=0;i<o;i++){const a=t.matched[i];a&&(e.matched.find(u=>Yn(u,a))?n.push(a):s.push(a));const l=e.matched[i];l&&(t.matched.find(u=>Yn(u,l))||r.push(l))}return[s,n,r]}function Xr(){return Ct(bi)}const qx={name:"AuthPage",components:{Button:Ot,PlayIcon:zl,SparklesIcon:y1,GlobeIcon:i1,ShareIcon:g1},setup(){return{router:Xr()}},data(){return{api_url:"http://localhost:5001",authSubscription:null,email:"",username:"",password:"",confirmPassword:""}},created(){this.checkExistingSession();const{data:e}=St.auth.onAuthStateChange(async(t,s)=>{if(console.log("Auth state changed:",t),s){if(t==="SIGNED_IN"||t==="TOKEN_REFRESHED")try{const n=await Be("auth/verify",{method:"POST",body:JSON.stringify({access_token:s.access_token})});console.log("Backend verification on auth change:",n),n.user&&this.$router.push("/")}catch(n){console.error("Error verifying session:",n)}}else t==="SIGNED_OUT"&&(localStorage.removeItem("supabase_session"),this.$router.push("/auth"))});this.authSubscription=e},beforeDestroy(){this.authSubscription&&this.authSubscription.unsubscribe()},methods:{async signInWithProvider(e){const{data:t,error:s}=await St.auth.signInWithOAuth({provider:e,options:{redirectTo:`${window.location.origin}/auth/callback`}});s&&console.error("OAuth error:",s)},async checkExistingSession(){try{const{data:{session:e}}=await St.auth.getSession();if(e){const t=await Be("auth/verify",{method:"POST",body:JSON.stringify({access_token:e.access_token})});console.log("Existing session verification:",t),t.user&&this.$router.push("/")}}catch(e){console.error("Error checking existing session:",e)}}}},zx={class:"min-h-screen flex flex-col md:flex-row bg-white"},Hx={class:"w-full md:w-[30%] flex items-center justify-center p-6 bg-white"},Kx={class:"w-full max-w-[320px] space-y-6"},Wx={class:"space-y-3"},Gx={class:"text-center text-xs text-gray-500 px-4"},Jx={class:"w-full md:w-[70%] relative min-h-[60vh] bg-black"},Yx={class:"relative h-full flex items-center justify-center p-8"},Xx={class:"max-w-4xl space-y-8 text-center"},Qx={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-12"},Zx={class:"feature-card"},ek={class:"icon-container"},tk={class:"feature-card"},sk={class:"icon-container"},nk={class:"feature-card"},rk={class:"icon-container"};function ok(e,t,s,n,r,o){const i=L("Button"),a=L("SparklesIcon"),l=L("GlobeIcon"),u=L("ShareIcon");return w(),$("div",zx,[p("div",Hx,[p("div",Kx,[t[7]||(t[7]=vl('<div class="text-center space-y-2"><div class="mb-6"><span class="text-4xl font-bold text-black tracking-wider dark:text-white">SitChat</span></div><h1 class="text-2xl font-bold text-black dark:text-white">Begin Your Story</h1><p class="text-sm text-gray-500 dark:text-gray-400">Experience your Favourite Sitcoms!</p></div>',1)),p("div",Wx,[v(i,{variant:"outline",class:"w-full h-11 gap-2 hover:bg-gray-100 transition-all dark:hover:bg-gray-800",onClick:t[0]||(t[0]=c=>o.signInWithProvider("google"))},{default:k(()=>t[1]||(t[1]=[p("img",{src:"https://upload.wikimedia.org/wikipedia/commons/7/7e/Gmail_icon_%282020%29.svg",alt:"Google Logo",class:"h-4 w-4"},null,-1),p("span",{class:"text-sm text-black dark:text-white"},"Continue with Google",-1)])),_:1}),t[2]||(t[2]=p("div",{class:"relative py-4"},[p("div",{class:"absolute inset-0 flex items-center"},[p("span",{class:"w-full border-t border-gray-300"})])],-1))]),p("p",Gx,[t[5]||(t[5]=H(" By continuing, you agree to our ")),v(i,{variant:"link",class:"text-xs h-auto p-0 text-gray-500"},{default:k(()=>t[3]||(t[3]=[H("Terms")])),_:1}),t[6]||(t[6]=H(" and ")),v(i,{variant:"link",class:"text-xs h-auto p-0 text-gray-500"},{default:k(()=>t[4]||(t[4]=[H("Privacy")])),_:1})])])]),p("div",Jx,[t[15]||(t[15]=p("div",{class:"absolute inset-0 pattern-dots pattern-gray-500 pattern-opacity-20 pattern-size-4"},null,-1)),p("div",Yx,[p("div",Xx,[t[14]||(t[14]=p("div",{class:"space-y-4 animate-fade-in"},[p("h2",{class:"text-5xl font-bold text-white leading-tight"},[H(" Where Your Favourite Sitcoms Come"),p("br"),H("to "),p("span",{class:"text-gray-400"},"Life")]),p("p",{class:"text-xl text-gray-300"},"Interactive stories powered by AI")],-1)),p("div",Qx,[p("div",Zx,[p("div",ek,[v(a,{class:"h-6 w-6 text-white"})]),t[8]||(t[8]=p("h3",{class:"text-lg font-medium text-white mt-4"},"Dynamic Episodes",-1)),t[9]||(t[9]=p("p",{class:"text-sm text-gray-300 mt-2"},"Experience dynamic stories where you become part of the narrative.",-1))]),p("div",tk,[p("div",sk,[v(l,{class:"h-6 w-6 text-white"})]),t[10]||(t[10]=p("h3",{class:"text-lg font-medium text-white mt-4"},"Create Stories",-1)),t[11]||(t[11]=p("p",{class:"text-sm text-gray-300 mt-2"},"Design your shows with detailed characters, relationships, and plot objectives.",-1))]),p("div",nk,[p("div",rk,[v(u,{class:"h-6 w-6 text-white"})]),t[12]||(t[12]=p("h3",{class:"text-lg font-medium text-white mt-4"},"Participate",-1)),t[13]||(t[13]=p("p",{class:"text-sm text-gray-300 mt-2"},"Join the conversation as an interactive character, influencing the story's direction.",-1))])])])])])])}const ik=ft(qx,[["render",ok]]),ak={name:"AuthCallback",data(){return{}},created(){setTimeout(async()=>{try{const{data:{session:e}}=await St.auth.getSession();if(e){const t=await Be("auth/verify",{method:"POST",body:JSON.stringify({access_token:e.access_token})});localStorage.setItem("user_id",t.user.id),localStorage.setItem("username",t.user.user_metadata.full_name),this.$router.push("/")}else console.error("No active session found"),this.$router.push("/auth")}catch(e){console.error("Auth callback error:",e),this.$router.push("/auth")}},500)}};function lk(e,t,s,n,r,o){return w(),$("div",null,"Processing authentication...")}const ck=ft(ak,[["render",lk]]),uk={__name:"Progress",props:{modelValue:{type:[Number,null],required:!1,default:0},max:{type:Number,required:!1},getValueLabel:{type:Function,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(e){const t=e,s=ne(()=>{const{class:n,...r}=t;return r});return(n,r)=>(w(),K(x(Xw),Se(s.value,{class:x(Ye)("relative h-2 w-full overflow-hidden rounded-full bg-slate-900/20 dark:bg-slate-50/20",t.class)}),{default:k(()=>[v(x(Qw),{class:"h-full w-full flex-1 bg-slate-900 transition-all dark:bg-slate-50",style:Ut(`transform: translateX(-${100-(t.modelValue??0)}%);`)},null,8,["style"])]),_:1},16,["class"]))}},wi={__name:"Textarea",props:{class:{type:null,required:!1},defaultValue:{type:[String,Number],required:!1},modelValue:{type:[String,Number],required:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e,r=Hs(s,"modelValue",t,{passive:!0,defaultValue:s.defaultValue});return(o,i)=>oi((w(),$("textarea",{"onUpdate:modelValue":i[0]||(i[0]=a=>ze(r)?r.value=a:null),class:ge(x(Ye)("flex min-h-[60px] w-full rounded-md border border-slate-200 bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-950 disabled:cursor-not-allowed disabled:opacity-50 dark:border-slate-800 dark:placeholder:text-slate-400 dark:focus-visible:ring-slate-300",s.class))},null,2)),[[bl,x(r)]])}},os=Object.create(null);os.open="0";os.close="1";os.ping="2";os.pong="3";os.message="4";os.upgrade="5";os.noop="6";const Ao=Object.create(null);Object.keys(os).forEach(e=>{Ao[os[e]]=e});const Ya={type:"error",data:"parser error"},fp=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",hp=typeof ArrayBuffer=="function",pp=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Wl=({type:e,data:t},s,n)=>fp&&t instanceof Blob?s?n(t):Gu(t,n):hp&&(t instanceof ArrayBuffer||pp(t))?s?n(t):Gu(new Blob([t]),n):n(os[e]+(t||"")),Gu=(e,t)=>{const s=new FileReader;return s.onload=function(){const n=s.result.split(",")[1];t("b"+(n||""))},s.readAsDataURL(e)};function Ju(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let aa;function dk(e,t){if(fp&&e.data instanceof Blob)return e.data.arrayBuffer().then(Ju).then(t);if(hp&&(e.data instanceof ArrayBuffer||pp(e.data)))return t(Ju(e.data));Wl(e,!1,s=>{aa||(aa=new TextEncoder),t(aa.encode(s))})}const Yu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",gr=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<Yu.length;e++)gr[Yu.charCodeAt(e)]=e;const fk=e=>{let t=e.length*.75,s=e.length,n,r=0,o,i,a,l;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const u=new ArrayBuffer(t),c=new Uint8Array(u);for(n=0;n<s;n+=4)o=gr[e.charCodeAt(n)],i=gr[e.charCodeAt(n+1)],a=gr[e.charCodeAt(n+2)],l=gr[e.charCodeAt(n+3)],c[r++]=o<<2|i>>4,c[r++]=(i&15)<<4|a>>2,c[r++]=(a&3)<<6|l&63;return u},hk=typeof ArrayBuffer=="function",Gl=(e,t)=>{if(typeof e!="string")return{type:"message",data:mp(e,t)};const s=e.charAt(0);return s==="b"?{type:"message",data:pk(e.substring(1),t)}:Ao[s]?e.length>1?{type:Ao[s],data:e.substring(1)}:{type:Ao[s]}:Ya},pk=(e,t)=>{if(hk){const s=fk(e);return mp(s,t)}else return{base64:!0,data:e}},mp=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},gp="",mk=(e,t)=>{const s=e.length,n=new Array(s);let r=0;e.forEach((o,i)=>{Wl(o,!1,a=>{n[i]=a,++r===s&&t(n.join(gp))})})},gk=(e,t)=>{const s=e.split(gp),n=[];for(let r=0;r<s.length;r++){const o=Gl(s[r],t);if(n.push(o),o.type==="error")break}return n};function yk(){return new TransformStream({transform(e,t){dk(e,s=>{const n=s.length;let r;if(n<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,n);else if(n<65536){r=new Uint8Array(3);const o=new DataView(r.buffer);o.setUint8(0,126),o.setUint16(1,n)}else{r=new Uint8Array(9);const o=new DataView(r.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(n))}e.data&&typeof e.data!="string"&&(r[0]|=128),t.enqueue(r),t.enqueue(s)})}})}let la;function bo(e){return e.reduce((t,s)=>t+s.length,0)}function wo(e,t){if(e[0].length===t)return e.shift();const s=new Uint8Array(t);let n=0;for(let r=0;r<t;r++)s[r]=e[0][n++],n===e[0].length&&(e.shift(),n=0);return e.length&&n<e[0].length&&(e[0]=e[0].slice(n)),s}function vk(e,t){la||(la=new TextDecoder);const s=[];let n=0,r=-1,o=!1;return new TransformStream({transform(i,a){for(s.push(i);;){if(n===0){if(bo(s)<1)break;const l=wo(s,1);o=(l[0]&128)===128,r=l[0]&127,r<126?n=3:r===126?n=1:n=2}else if(n===1){if(bo(s)<2)break;const l=wo(s,2);r=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),n=3}else if(n===2){if(bo(s)<8)break;const l=wo(s,8),u=new DataView(l.buffer,l.byteOffset,l.length),c=u.getUint32(0);if(c>Math.pow(2,21)-1){a.enqueue(Ya);break}r=c*Math.pow(2,32)+u.getUint32(4),n=3}else{if(bo(s)<r)break;const l=wo(s,r);a.enqueue(Gl(o?l:la.decode(l),t)),n=0}if(r===0||r>e){a.enqueue(Ya);break}}}})}const yp=4;function We(e){if(e)return _k(e)}function _k(e){for(var t in We.prototype)e[t]=We.prototype[t];return e}We.prototype.on=We.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};We.prototype.once=function(e,t){function s(){this.off(e,s),t.apply(this,arguments)}return s.fn=t,this.on(e,s),this};We.prototype.off=We.prototype.removeListener=We.prototype.removeAllListeners=We.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+e];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var n,r=0;r<s.length;r++)if(n=s[r],n===t||n.fn===t){s.splice(r,1);break}return s.length===0&&delete this._callbacks["$"+e],this};We.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),s=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(s){s=s.slice(0);for(var n=0,r=s.length;n<r;++n)s[n].apply(this,t)}return this};We.prototype.emitReserved=We.prototype.emit;We.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};We.prototype.hasListeners=function(e){return!!this.listeners(e).length};const xi=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,s)=>s(t,0),Tt=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),bk="arraybuffer";function vp(e,...t){return t.reduce((s,n)=>(e.hasOwnProperty(n)&&(s[n]=e[n]),s),{})}const wk=Tt.setTimeout,xk=Tt.clearTimeout;function ki(e,t){t.useNativeTimers?(e.setTimeoutFn=wk.bind(Tt),e.clearTimeoutFn=xk.bind(Tt)):(e.setTimeoutFn=Tt.setTimeout.bind(Tt),e.clearTimeoutFn=Tt.clearTimeout.bind(Tt))}const kk=1.33;function Ck(e){return typeof e=="string"?Sk(e):Math.ceil((e.byteLength||e.size)*kk)}function Sk(e){let t=0,s=0;for(let n=0,r=e.length;n<r;n++)t=e.charCodeAt(n),t<128?s+=1:t<2048?s+=2:t<55296||t>=57344?s+=3:(n++,s+=4);return s}function _p(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Ek(e){let t="";for(let s in e)e.hasOwnProperty(s)&&(t.length&&(t+="&"),t+=encodeURIComponent(s)+"="+encodeURIComponent(e[s]));return t}function Ak(e){let t={},s=e.split("&");for(let n=0,r=s.length;n<r;n++){let o=s[n].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}class Tk extends Error{constructor(t,s,n){super(t),this.description=s,this.context=n,this.type="TransportError"}}class Jl extends We{constructor(t){super(),this.writable=!1,ki(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,s,n){return super.emitReserved("error",new Tk(t,s,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const s=Gl(t,this.socket.binaryType);this.onPacket(s)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,s={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(s)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const s=Ek(t);return s.length?"?"+s:""}}class Pk extends Jl{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const s=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||s()})),this.writable||(n++,this.once("drain",function(){--n||s()}))}else s()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const s=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};gk(t,this.socket.binaryType).forEach(s),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,mk(t,s=>{this.doWrite(s,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",s=this.query||{};return this.opts.timestampRequests!==!1&&(s[this.opts.timestampParam]=_p()),!this.supportsBinary&&!s.sid&&(s.b64=1),this.createUri(t,s)}}let bp=!1;try{bp=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Ok=bp;function Ik(){}class Rk extends Pk{constructor(t){if(super(t),typeof location<"u"){const s=location.protocol==="https:";let n=location.port;n||(n=s?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,s){const n=this.request({method:"POST",data:t});n.on("success",s),n.on("error",(r,o)=>{this.onError("xhr post error",r,o)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(s,n)=>{this.onError("xhr poll error",s,n)}),this.pollXhr=t}}class Zt extends We{constructor(t,s,n){super(),this.createRequest=t,ki(this,n),this._opts=n,this._method=n.method||"GET",this._uri=s,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var t;const s=vp(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");s.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(s);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let r in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(r)&&n.setRequestHeader(r,this._opts.extraHeaders[r])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var r;n.readyState===3&&((r=this._opts.cookieJar)===null||r===void 0||r.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(r){this.setTimeoutFn(()=>{this._onError(r)},0);return}typeof document<"u"&&(this._index=Zt.requestsCount++,Zt.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Ik,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Zt.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Zt.requestsCount=0;Zt.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Xu);else if(typeof addEventListener=="function"){const e="onpagehide"in Tt?"pagehide":"unload";addEventListener(e,Xu,!1)}}function Xu(){for(let e in Zt.requests)Zt.requests.hasOwnProperty(e)&&Zt.requests[e].abort()}const $k=function(){const e=wp({xdomain:!1});return e&&e.responseType!==null}();class Dk extends Rk{constructor(t){super(t);const s=t&&t.forceBase64;this.supportsBinary=$k&&!s}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Zt(wp,this.uri(),t)}}function wp(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||Ok))return new XMLHttpRequest}catch{}if(!t)try{return new Tt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const xp=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Lk extends Jl{get name(){return"websocket"}doOpen(){const t=this.uri(),s=this.opts.protocols,n=xp?{}:vp(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,s,n)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let s=0;s<t.length;s++){const n=t[s],r=s===t.length-1;Wl(n,this.supportsBinary,o=>{try{this.doWrite(n,o)}catch{}r&&xi(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",s=this.query||{};return this.opts.timestampRequests&&(s[this.opts.timestampParam]=_p()),this.supportsBinary||(s.b64=1),this.createUri(t,s)}}const ca=Tt.WebSocket||Tt.MozWebSocket;class jk extends Lk{createSocket(t,s,n){return xp?new ca(t,s,n):s?new ca(t,s):new ca(t)}doWrite(t,s){this.ws.send(s)}}class Bk extends Jl{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const s=vk(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(s).getReader(),r=yk();r.readable.pipeTo(t.writable),this._writer=r.writable.getWriter();const o=()=>{n.read().then(({done:a,value:l})=>{a||(this.onPacket(l),o())}).catch(a=>{})};o();const i={type:"open"};this.query.sid&&(i.data=`{"sid":"${this.query.sid}"}`),this._writer.write(i).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let s=0;s<t.length;s++){const n=t[s],r=s===t.length-1;this._writer.write(n).then(()=>{r&&xi(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const Mk={websocket:jk,webtransport:Bk,polling:Dk},Nk=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Fk=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Xa(e){if(e.length>8e3)throw"URI too long";const t=e,s=e.indexOf("["),n=e.indexOf("]");s!=-1&&n!=-1&&(e=e.substring(0,s)+e.substring(s,n).replace(/:/g,";")+e.substring(n,e.length));let r=Nk.exec(e||""),o={},i=14;for(;i--;)o[Fk[i]]=r[i]||"";return s!=-1&&n!=-1&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=Uk(o,o.path),o.queryKey=Vk(o,o.query),o}function Uk(e,t){const s=/\/{2,9}/g,n=t.replace(s,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function Vk(e,t){const s={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,r,o){r&&(s[r]=o)}),s}const Qa=typeof addEventListener=="function"&&typeof removeEventListener=="function",To=[];Qa&&addEventListener("offline",()=>{To.forEach(e=>e())},!1);class Us extends We{constructor(t,s){if(super(),this.binaryType=bk,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(s=t,t=null),t){const n=Xa(t);s.hostname=n.host,s.secure=n.protocol==="https"||n.protocol==="wss",s.port=n.port,n.query&&(s.query=n.query)}else s.host&&(s.hostname=Xa(s.host).host);ki(this,s),this.secure=s.secure!=null?s.secure:typeof location<"u"&&location.protocol==="https:",s.hostname&&!s.port&&(s.port=this.secure?"443":"80"),this.hostname=s.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=s.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},s.transports.forEach(n=>{const r=n.prototype.name;this.transports.push(r),this._transportsByName[r]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},s),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Ak(this.opts.query)),Qa&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},To.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const s=Object.assign({},this.opts.query);s.EIO=yp,s.transport=t,this.id&&(s.sid=this.id);const n=Object.assign({},this.opts,{query:s,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Us.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const s=this.createTransport(t);s.open(),this.setTransport(s)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",s=>this._onClose("transport close",s))}onOpen(){this.readyState="open",Us.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const s=new Error("server error");s.code=t.data,this._onError(s);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let s=1;for(let n=0;n<this.writeBuffer.length;n++){const r=this.writeBuffer[n].data;if(r&&(s+=Ck(r)),n>0&&s>this._maxPayload)return this.writeBuffer.slice(0,n);s+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,xi(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,s,n){return this._sendPacket("message",t,s,n),this}send(t,s,n){return this._sendPacket("message",t,s,n),this}_sendPacket(t,s,n,r){if(typeof s=="function"&&(r=s,s=void 0),typeof n=="function"&&(r=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const o={type:t,data:s,options:n};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},s=()=>{this.off("upgrade",s),this.off("upgradeError",s),t()},n=()=>{this.once("upgrade",s),this.once("upgradeError",s)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(Us.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Qa&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=To.indexOf(this._offlineEventListener);n!==-1&&To.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,s),this.writeBuffer=[],this._prevBufferLen=0}}}Us.protocol=yp;class qk extends Us{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let s=this.createTransport(t),n=!1;Us.priorWebsocketSuccess=!1;const r=()=>{n||(s.send([{type:"ping",data:"probe"}]),s.once("packet",d=>{if(!n)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",s),!s)return;Us.priorWebsocketSuccess=s.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(c(),this.setTransport(s),s.send([{type:"upgrade"}]),this.emitReserved("upgrade",s),s=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=s.name,this.emitReserved("upgradeError",f)}}))};function o(){n||(n=!0,c(),s.close(),s=null)}const i=d=>{const f=new Error("probe error: "+d);f.transport=s.name,o(),this.emitReserved("upgradeError",f)};function a(){i("transport closed")}function l(){i("socket closed")}function u(d){s&&d.name!==s.name&&o()}const c=()=>{s.removeListener("open",r),s.removeListener("error",i),s.removeListener("close",a),this.off("close",l),this.off("upgrading",u)};s.once("open",r),s.once("error",i),s.once("close",a),this.once("close",l),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||s.open()},200):s.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const s=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&s.push(t[n]);return s}}let zk=class extends qk{constructor(t,s={}){const n=typeof t=="object"?t:s;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(r=>Mk[r]).filter(r=>!!r)),super(t,n)}};function Hk(e,t="",s){let n=e;s=s||typeof location<"u"&&location,e==null&&(e=s.protocol+"//"+s.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=s.protocol+e:e=s.host+e),/^(https?|wss?):\/\//.test(e)||(typeof s<"u"?e=s.protocol+"//"+e:e="https://"+e),n=Xa(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const o=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+o+":"+n.port+t,n.href=n.protocol+"://"+o+(s&&s.port===n.port?"":":"+n.port),n}const Kk=typeof ArrayBuffer=="function",Wk=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,kp=Object.prototype.toString,Gk=typeof Blob=="function"||typeof Blob<"u"&&kp.call(Blob)==="[object BlobConstructor]",Jk=typeof File=="function"||typeof File<"u"&&kp.call(File)==="[object FileConstructor]";function Yl(e){return Kk&&(e instanceof ArrayBuffer||Wk(e))||Gk&&e instanceof Blob||Jk&&e instanceof File}function Po(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let s=0,n=e.length;s<n;s++)if(Po(e[s]))return!0;return!1}if(Yl(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Po(e.toJSON(),!0);for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&Po(e[s]))return!0;return!1}function Yk(e){const t=[],s=e.data,n=e;return n.data=Za(s,t),n.attachments=t.length,{packet:n,buffers:t}}function Za(e,t){if(!e)return e;if(Yl(e)){const s={_placeholder:!0,num:t.length};return t.push(e),s}else if(Array.isArray(e)){const s=new Array(e.length);for(let n=0;n<e.length;n++)s[n]=Za(e[n],t);return s}else if(typeof e=="object"&&!(e instanceof Date)){const s={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(s[n]=Za(e[n],t));return s}return e}function Xk(e,t){return e.data=el(e.data,t),delete e.attachments,e}function el(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let s=0;s<e.length;s++)e[s]=el(e[s],t);else if(typeof e=="object")for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(e[s]=el(e[s],t));return e}const Qk=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Zk=5;var xe;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(xe||(xe={}));class eC{constructor(t){this.replacer=t}encode(t){return(t.type===xe.EVENT||t.type===xe.ACK)&&Po(t)?this.encodeAsBinary({type:t.type===xe.EVENT?xe.BINARY_EVENT:xe.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let s=""+t.type;return(t.type===xe.BINARY_EVENT||t.type===xe.BINARY_ACK)&&(s+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(s+=t.nsp+","),t.id!=null&&(s+=t.id),t.data!=null&&(s+=JSON.stringify(t.data,this.replacer)),s}encodeAsBinary(t){const s=Yk(t),n=this.encodeAsString(s.packet),r=s.buffers;return r.unshift(n),r}}function Qu(e){return Object.prototype.toString.call(e)==="[object Object]"}class Xl extends We{constructor(t){super(),this.reviver=t}add(t){let s;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");s=this.decodeString(t);const n=s.type===xe.BINARY_EVENT;n||s.type===xe.BINARY_ACK?(s.type=n?xe.EVENT:xe.ACK,this.reconstructor=new tC(s),s.attachments===0&&super.emitReserved("decoded",s)):super.emitReserved("decoded",s)}else if(Yl(t)||t.base64)if(this.reconstructor)s=this.reconstructor.takeBinaryData(t),s&&(this.reconstructor=null,super.emitReserved("decoded",s));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let s=0;const n={type:Number(t.charAt(0))};if(xe[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===xe.BINARY_EVENT||n.type===xe.BINARY_ACK){const o=s+1;for(;t.charAt(++s)!=="-"&&s!=t.length;);const i=t.substring(o,s);if(i!=Number(i)||t.charAt(s)!=="-")throw new Error("Illegal attachments");n.attachments=Number(i)}if(t.charAt(s+1)==="/"){const o=s+1;for(;++s&&!(t.charAt(s)===","||s===t.length););n.nsp=t.substring(o,s)}else n.nsp="/";const r=t.charAt(s+1);if(r!==""&&Number(r)==r){const o=s+1;for(;++s;){const i=t.charAt(s);if(i==null||Number(i)!=i){--s;break}if(s===t.length)break}n.id=Number(t.substring(o,s+1))}if(t.charAt(++s)){const o=this.tryParse(t.substr(s));if(Xl.isPayloadValid(n.type,o))n.data=o;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,s){switch(t){case xe.CONNECT:return Qu(s);case xe.DISCONNECT:return s===void 0;case xe.CONNECT_ERROR:return typeof s=="string"||Qu(s);case xe.EVENT:case xe.BINARY_EVENT:return Array.isArray(s)&&(typeof s[0]=="number"||typeof s[0]=="string"&&Qk.indexOf(s[0])===-1);case xe.ACK:case xe.BINARY_ACK:return Array.isArray(s)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class tC{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const s=Xk(this.reconPack,this.buffers);return this.finishedReconstruction(),s}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const sC=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Xl,Encoder:eC,get PacketType(){return xe},protocol:Zk},Symbol.toStringTag,{value:"Module"}));function Rt(e,t,s){return e.on(t,s),function(){e.off(t,s)}}const nC=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Cp extends We{constructor(t,s,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=s,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Rt(t,"open",this.onopen.bind(this)),Rt(t,"packet",this.onpacket.bind(this)),Rt(t,"error",this.onerror.bind(this)),Rt(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...s){var n,r,o;if(nC.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(s.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(s),this;const i={type:xe.EVENT,data:s};if(i.options={},i.options.compress=this.flags.compress!==!1,typeof s[s.length-1]=="function"){const c=this.ids++,d=s.pop();this._registerAckCallback(c,d),i.id=c}const a=(r=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||r===void 0?void 0:r.writable,l=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!a||(l?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(t,s){var n;const r=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(r===void 0){this.acks[t]=s;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===t&&this.sendBuffer.splice(a,1);s.call(this,new Error("operation has timed out"))},r),i=(...a)=>{this.io.clearTimeoutFn(o),s.apply(this,a)};i.withError=!0,this.acks[t]=i}emitWithAck(t,...s){return new Promise((n,r)=>{const o=(i,a)=>i?r(i):n(a);o.withError=!0,s.push(o),this.emit(t,...s)})}_addToQueue(t){let s;typeof t[t.length-1]=="function"&&(s=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((r,...o)=>n!==this._queue[0]?void 0:(r!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),s&&s(r)):(this._queue.shift(),s&&s(null,...o)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const s=this._queue[0];s.pending&&!t||(s.pending=!0,s.tryCount++,this.flags=s.flags,this.emit.apply(this,s.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:xe.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,s){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,s),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){const n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case xe.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case xe.EVENT:case xe.BINARY_EVENT:this.onevent(t);break;case xe.ACK:case xe.BINARY_ACK:this.onack(t);break;case xe.DISCONNECT:this.ondisconnect();break;case xe.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const s=t.data||[];t.id!=null&&s.push(this.ack(t.id)),this.connected?this.emitEvent(s):this.receiveBuffer.push(Object.freeze(s))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const s=this._anyListeners.slice();for(const n of s)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const s=this;let n=!1;return function(...r){n||(n=!0,s.packet({type:xe.ACK,id:t,data:r}))}}onack(t){const s=this.acks[t.id];typeof s=="function"&&(delete this.acks[t.id],s.withError&&t.data.unshift(null),s.apply(this,t.data))}onconnect(t,s){this.id=t,this.recovered=s&&this._pid===s,this._pid=s,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:xe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const s=this._anyListeners;for(let n=0;n<s.length;n++)if(t===s[n])return s.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const s=this._anyOutgoingListeners;for(let n=0;n<s.length;n++)if(t===s[n])return s.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const s=this._anyOutgoingListeners.slice();for(const n of s)n.apply(this,t.data)}}}function rr(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}rr.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),s=Math.floor(t*this.jitter*e);e=(Math.floor(t*10)&1)==0?e-s:e+s}return Math.min(e,this.max)|0};rr.prototype.reset=function(){this.attempts=0};rr.prototype.setMin=function(e){this.ms=e};rr.prototype.setMax=function(e){this.max=e};rr.prototype.setJitter=function(e){this.jitter=e};class tl extends We{constructor(t,s){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(s=t,t=void 0),s=s||{},s.path=s.path||"/socket.io",this.opts=s,ki(this,s),this.reconnection(s.reconnection!==!1),this.reconnectionAttempts(s.reconnectionAttempts||1/0),this.reconnectionDelay(s.reconnectionDelay||1e3),this.reconnectionDelayMax(s.reconnectionDelayMax||5e3),this.randomizationFactor((n=s.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new rr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(s.timeout==null?2e4:s.timeout),this._readyState="closed",this.uri=t;const r=s.parser||sC;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=s.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var s;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(s=this.backoff)===null||s===void 0||s.setMin(t),this)}randomizationFactor(t){var s;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(s=this.backoff)===null||s===void 0||s.setJitter(t),this)}reconnectionDelayMax(t){var s;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(s=this.backoff)===null||s===void 0||s.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new zk(this.uri,this.opts);const s=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=Rt(s,"open",function(){n.onopen(),t&&t()}),o=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),t?t(a):this.maybeReconnectOnOpen()},i=Rt(s,"error",o);if(this._timeout!==!1){const a=this._timeout,l=this.setTimeoutFn(()=>{r(),o(new Error("timeout")),s.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(r),this.subs.push(i),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Rt(t,"ping",this.onping.bind(this)),Rt(t,"data",this.ondata.bind(this)),Rt(t,"error",this.onerror.bind(this)),Rt(t,"close",this.onclose.bind(this)),Rt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(s){this.onclose("parse error",s)}}ondecoded(t){xi(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,s){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new Cp(this,t,s),this.nsps[t]=n),n}_destroy(t){const s=Object.keys(this.nsps);for(const n of s)if(this.nsps[n].active)return;this._close()}_packet(t){const s=this.encoder.encode(t);for(let n=0;n<s.length;n++)this.engine.write(s[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,s){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,s),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const s=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(r=>{r?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",r)):t.onreconnect()}))},s);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const hr={};function Oo(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const s=Hk(e,t.path||"/socket.io"),n=s.source,r=s.id,o=s.path,i=hr[r]&&o in hr[r].nsps,a=t.forceNew||t["force new connection"]||t.multiplex===!1||i;let l;return a?l=new tl(n,t):(hr[r]||(hr[r]=new tl(n,t)),l=hr[r]),s.query&&!t.query&&(t.query=s.queryKey),l.socket(s.path,t)}Object.assign(Oo,{Manager:tl,Socket:Cp,io:Oo,connect:Oo});var rC=Object.defineProperty,Zu=Object.getOwnPropertySymbols,oC=Object.prototype.hasOwnProperty,iC=Object.prototype.propertyIsEnumerable,ed=(e,t,s)=>t in e?rC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Sp=(e,t)=>{for(var s in t||(t={}))oC.call(t,s)&&ed(e,s,t[s]);if(Zu)for(var s of Zu(t))iC.call(t,s)&&ed(e,s,t[s]);return e},Ci=e=>typeof e=="function",Si=e=>typeof e=="string",Ep=e=>Si(e)&&e.trim().length>0,aC=e=>typeof e=="number",dn=e=>typeof e>"u",Vr=e=>typeof e=="object"&&e!==null,lC=e=>es(e,"tag")&&Ep(e.tag),Ap=e=>window.TouchEvent&&e instanceof TouchEvent,Tp=e=>es(e,"component")&&Pp(e.component),cC=e=>Ci(e)||Vr(e),Pp=e=>!dn(e)&&(Si(e)||cC(e)||Tp(e)),td=e=>Vr(e)&&["height","width","right","left","top","bottom"].every(t=>aC(e[t])),es=(e,t)=>(Vr(e)||Ci(e))&&t in e,uC=(e=>()=>e++)(0);function ua(e){return Ap(e)?e.targetTouches[0].clientX:e.clientX}function sd(e){return Ap(e)?e.targetTouches[0].clientY:e.clientY}var dC=e=>{dn(e.remove)?e.parentNode&&e.parentNode.removeChild(e):e.remove()},Qr=e=>Tp(e)?Qr(e.component):lC(e)?ce({render(){return e}}):typeof e=="string"?e:Ce(x(e)),fC=e=>{if(typeof e=="string")return e;const t=es(e,"props")&&Vr(e.props)?e.props:{},s=es(e,"listeners")&&Vr(e.listeners)?e.listeners:{};return{component:Qr(e),props:t,listeners:s}},hC=()=>typeof window<"u",Ql=class{constructor(){this.allHandlers={}}getHandlers(e){return this.allHandlers[e]||[]}on(e,t){const s=this.getHandlers(e);s.push(t),this.allHandlers[e]=s}off(e,t){const s=this.getHandlers(e);s.splice(s.indexOf(t)>>>0,1)}emit(e,t){this.getHandlers(e).forEach(n=>n(t))}},pC=e=>["on","off","emit"].every(t=>es(e,t)&&Ci(e[t])),wt;(function(e){e.SUCCESS="success",e.ERROR="error",e.WARNING="warning",e.INFO="info",e.DEFAULT="default"})(wt||(wt={}));var Wo;(function(e){e.TOP_LEFT="top-left",e.TOP_CENTER="top-center",e.TOP_RIGHT="top-right",e.BOTTOM_LEFT="bottom-left",e.BOTTOM_CENTER="bottom-center",e.BOTTOM_RIGHT="bottom-right"})(Wo||(Wo={}));var xt;(function(e){e.ADD="add",e.DISMISS="dismiss",e.UPDATE="update",e.CLEAR="clear",e.UPDATE_DEFAULTS="update_defaults"})(xt||(xt={}));var Dt="Vue-Toastification",$t={type:{type:String,default:wt.DEFAULT},classNames:{type:[String,Array],default:()=>[]},trueBoolean:{type:Boolean,default:!0}},Op={type:$t.type,customIcon:{type:[String,Boolean,Object,Function],default:!0}},Io={component:{type:[String,Object,Function,Boolean],default:"button"},classNames:$t.classNames,showOnHover:{type:Boolean,default:!1},ariaLabel:{type:String,default:"close"}},sl={timeout:{type:[Number,Boolean],default:5e3},hideProgressBar:{type:Boolean,default:!1},isRunning:{type:Boolean,default:!1}},Ip={transition:{type:[Object,String],default:`${Dt}__bounce`}},mC={position:{type:String,default:Wo.TOP_RIGHT},draggable:$t.trueBoolean,draggablePercent:{type:Number,default:.6},pauseOnFocusLoss:$t.trueBoolean,pauseOnHover:$t.trueBoolean,closeOnClick:$t.trueBoolean,timeout:sl.timeout,hideProgressBar:sl.hideProgressBar,toastClassName:$t.classNames,bodyClassName:$t.classNames,icon:Op.customIcon,closeButton:Io.component,closeButtonClassName:Io.classNames,showCloseButtonOnHover:Io.showOnHover,accessibility:{type:Object,default:()=>({toastRole:"alert",closeButtonLabel:"close"})},rtl:{type:Boolean,default:!1},eventBus:{type:Object,required:!1,default:()=>new Ql}},gC={id:{type:[String,Number],required:!0,default:0},type:$t.type,content:{type:[String,Object,Function],required:!0,default:""},onClick:{type:Function,default:void 0},onClose:{type:Function,default:void 0}},yC={container:{type:[Object,Function],default:()=>document.body},newestOnTop:$t.trueBoolean,maxToasts:{type:Number,default:20},transition:Ip.transition,toastDefaults:Object,filterBeforeCreate:{type:Function,default:e=>e},filterToasts:{type:Function,default:e=>e},containerClassName:$t.classNames,onMounted:Function,shareAppContext:[Boolean,Object]},_s={CORE_TOAST:mC,TOAST:gC,CONTAINER:yC,PROGRESS_BAR:sl,ICON:Op,TRANSITION:Ip,CLOSE_BUTTON:Io},Rp=ce({name:"VtProgressBar",props:_s.PROGRESS_BAR,data(){return{hasClass:!0}},computed:{style(){return{animationDuration:`${this.timeout}ms`,animationPlayState:this.isRunning?"running":"paused",opacity:this.hideProgressBar?0:1}},cpClass(){return this.hasClass?`${Dt}__progress-bar`:""}},watch:{timeout(){this.hasClass=!1,this.$nextTick(()=>this.hasClass=!0)}},mounted(){this.$el.addEventListener("animationend",this.animationEnded)},beforeUnmount(){this.$el.removeEventListener("animationend",this.animationEnded)},methods:{animationEnded(){this.$emit("close-toast")}}});function vC(e,t){return w(),$("div",{style:Ut(e.style),class:ge(e.cpClass)},null,6)}Rp.render=vC;var _C=Rp,$p=ce({name:"VtCloseButton",props:_s.CLOSE_BUTTON,computed:{buttonComponent(){return this.component!==!1?Qr(this.component):"button"},classes(){const e=[`${Dt}__close-button`];return this.showOnHover&&e.push("show-on-hover"),e.concat(this.classNames)}}}),bC=H("  ");function wC(e,t){return w(),K(ml(e.buttonComponent),Se({"aria-label":e.ariaLabel,class:e.classes},e.$attrs),{default:k(()=>[bC]),_:1},16,["aria-label","class"])}$p.render=wC;var xC=$p,Dp={},kC={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"check-circle",class:"svg-inline--fa fa-check-circle fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},CC=p("path",{fill:"currentColor",d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},null,-1),SC=[CC];function EC(e,t){return w(),$("svg",kC,SC)}Dp.render=EC;var AC=Dp,Lp={},TC={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"info-circle",class:"svg-inline--fa fa-info-circle fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},PC=p("path",{fill:"currentColor",d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},null,-1),OC=[PC];function IC(e,t){return w(),$("svg",TC,OC)}Lp.render=IC;var nd=Lp,jp={},RC={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"exclamation-circle",class:"svg-inline--fa fa-exclamation-circle fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},$C=p("path",{fill:"currentColor",d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},null,-1),DC=[$C];function LC(e,t){return w(),$("svg",RC,DC)}jp.render=LC;var jC=jp,Bp={},BC={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"exclamation-triangle",class:"svg-inline--fa fa-exclamation-triangle fa-w-18",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},MC=p("path",{fill:"currentColor",d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},null,-1),NC=[MC];function FC(e,t){return w(),$("svg",BC,NC)}Bp.render=FC;var UC=Bp,Mp=ce({name:"VtIcon",props:_s.ICON,computed:{customIconChildren(){return es(this.customIcon,"iconChildren")?this.trimValue(this.customIcon.iconChildren):""},customIconClass(){return Si(this.customIcon)?this.trimValue(this.customIcon):es(this.customIcon,"iconClass")?this.trimValue(this.customIcon.iconClass):""},customIconTag(){return es(this.customIcon,"iconTag")?this.trimValue(this.customIcon.iconTag,"i"):"i"},hasCustomIcon(){return this.customIconClass.length>0},component(){return this.hasCustomIcon?this.customIconTag:Pp(this.customIcon)?Qr(this.customIcon):this.iconTypeComponent},iconTypeComponent(){return{[wt.DEFAULT]:nd,[wt.INFO]:nd,[wt.SUCCESS]:AC,[wt.ERROR]:UC,[wt.WARNING]:jC}[this.type]},iconClasses(){const e=[`${Dt}__icon`];return this.hasCustomIcon?e.concat(this.customIconClass):e}},methods:{trimValue(e,t=""){return Ep(e)?e.trim():t}}});function VC(e,t){return w(),K(ml(e.component),{class:ge(e.iconClasses)},{default:k(()=>[H(V(e.customIconChildren),1)]),_:1},8,["class"])}Mp.render=VC;var qC=Mp,Np=ce({name:"VtToast",components:{ProgressBar:_C,CloseButton:xC,Icon:qC},inheritAttrs:!1,props:Object.assign({},_s.CORE_TOAST,_s.TOAST),data(){return{isRunning:!0,disableTransitions:!1,beingDragged:!1,dragStart:0,dragPos:{x:0,y:0},dragRect:{}}},computed:{classes(){const e=[`${Dt}__toast`,`${Dt}__toast--${this.type}`,`${this.position}`].concat(this.toastClassName);return this.disableTransitions&&e.push("disable-transition"),this.rtl&&e.push(`${Dt}__toast--rtl`),e},bodyClasses(){return[`${Dt}__toast-${Si(this.content)?"body":"component-body"}`].concat(this.bodyClassName)},draggableStyle(){return this.dragStart===this.dragPos.x?{}:this.beingDragged?{transform:`translateX(${this.dragDelta}px)`,opacity:1-Math.abs(this.dragDelta/this.removalDistance)}:{transition:"transform 0.2s, opacity 0.2s",transform:"translateX(0)",opacity:1}},dragDelta(){return this.beingDragged?this.dragPos.x-this.dragStart:0},removalDistance(){return td(this.dragRect)?(this.dragRect.right-this.dragRect.left)*this.draggablePercent:0}},mounted(){this.draggable&&this.draggableSetup(),this.pauseOnFocusLoss&&this.focusSetup()},beforeUnmount(){this.draggable&&this.draggableCleanup(),this.pauseOnFocusLoss&&this.focusCleanup()},methods:{hasProp:es,getVueComponentFromObj:Qr,closeToast(){this.eventBus.emit(xt.DISMISS,this.id)},clickHandler(){this.onClick&&this.onClick(this.closeToast),this.closeOnClick&&(!this.beingDragged||this.dragStart===this.dragPos.x)&&this.closeToast()},timeoutHandler(){this.closeToast()},hoverPause(){this.pauseOnHover&&(this.isRunning=!1)},hoverPlay(){this.pauseOnHover&&(this.isRunning=!0)},focusPause(){this.isRunning=!1},focusPlay(){this.isRunning=!0},focusSetup(){addEventListener("blur",this.focusPause),addEventListener("focus",this.focusPlay)},focusCleanup(){removeEventListener("blur",this.focusPause),removeEventListener("focus",this.focusPlay)},draggableSetup(){const e=this.$el;e.addEventListener("touchstart",this.onDragStart,{passive:!0}),e.addEventListener("mousedown",this.onDragStart),addEventListener("touchmove",this.onDragMove,{passive:!1}),addEventListener("mousemove",this.onDragMove),addEventListener("touchend",this.onDragEnd),addEventListener("mouseup",this.onDragEnd)},draggableCleanup(){const e=this.$el;e.removeEventListener("touchstart",this.onDragStart),e.removeEventListener("mousedown",this.onDragStart),removeEventListener("touchmove",this.onDragMove),removeEventListener("mousemove",this.onDragMove),removeEventListener("touchend",this.onDragEnd),removeEventListener("mouseup",this.onDragEnd)},onDragStart(e){this.beingDragged=!0,this.dragPos={x:ua(e),y:sd(e)},this.dragStart=ua(e),this.dragRect=this.$el.getBoundingClientRect()},onDragMove(e){this.beingDragged&&(e.preventDefault(),this.isRunning&&(this.isRunning=!1),this.dragPos={x:ua(e),y:sd(e)})},onDragEnd(){this.beingDragged&&(Math.abs(this.dragDelta)>=this.removalDistance?(this.disableTransitions=!0,this.$nextTick(()=>this.closeToast())):setTimeout(()=>{this.beingDragged=!1,td(this.dragRect)&&this.pauseOnHover&&this.dragRect.bottom>=this.dragPos.y&&this.dragPos.y>=this.dragRect.top&&this.dragRect.left<=this.dragPos.x&&this.dragPos.x<=this.dragRect.right?this.isRunning=!1:this.isRunning=!0}))}}}),zC=["role"];function HC(e,t){const s=L("Icon"),n=L("CloseButton"),r=L("ProgressBar");return w(),$("div",{class:ge(e.classes),style:Ut(e.draggableStyle),onClick:t[0]||(t[0]=(...o)=>e.clickHandler&&e.clickHandler(...o)),onMouseenter:t[1]||(t[1]=(...o)=>e.hoverPause&&e.hoverPause(...o)),onMouseleave:t[2]||(t[2]=(...o)=>e.hoverPlay&&e.hoverPlay(...o))},[e.icon?(w(),K(s,{key:0,"custom-icon":e.icon,type:e.type},null,8,["custom-icon","type"])):Ee("v-if",!0),p("div",{role:e.accessibility.toastRole||"alert",class:ge(e.bodyClasses)},[typeof e.content=="string"?(w(),$(_e,{key:0},[H(V(e.content),1)],2112)):(w(),K(ml(e.getVueComponentFromObj(e.content)),Se({key:1,"toast-id":e.id},e.hasProp(e.content,"props")?e.content.props:{},tg(e.hasProp(e.content,"listeners")?e.content.listeners:{}),{onCloseToast:e.closeToast}),null,16,["toast-id","onCloseToast"]))],10,zC),e.closeButton?(w(),K(n,{key:1,component:e.closeButton,"class-names":e.closeButtonClassName,"show-on-hover":e.showCloseButtonOnHover,"aria-label":e.accessibility.closeButtonLabel,onClick:bs(e.closeToast,["stop"])},null,8,["component","class-names","show-on-hover","aria-label","onClick"])):Ee("v-if",!0),e.timeout?(w(),K(r,{key:2,"is-running":e.isRunning,"hide-progress-bar":e.hideProgressBar,timeout:e.timeout,onCloseToast:e.timeoutHandler},null,8,["is-running","hide-progress-bar","timeout","onCloseToast"])):Ee("v-if",!0)],38)}Np.render=HC;var KC=Np,Fp=ce({name:"VtTransition",props:_s.TRANSITION,emits:["leave"],methods:{hasProp:es,leave(e){e instanceof HTMLElement&&(e.style.left=e.offsetLeft+"px",e.style.top=e.offsetTop+"px",e.style.width=getComputedStyle(e).width,e.style.position="absolute")}}});function WC(e,t){return w(),K(fy,{tag:"div","enter-active-class":e.transition.enter?e.transition.enter:`${e.transition}-enter-active`,"move-class":e.transition.move?e.transition.move:`${e.transition}-move`,"leave-active-class":e.transition.leave?e.transition.leave:`${e.transition}-leave-active`,onLeave:e.leave},{default:k(()=>[re(e.$slots,"default")]),_:3},8,["enter-active-class","move-class","leave-active-class","onLeave"])}Fp.render=WC;var GC=Fp,Up=ce({name:"VueToastification",devtools:{hide:!0},components:{Toast:KC,VtTransition:GC},props:Object.assign({},_s.CORE_TOAST,_s.CONTAINER,_s.TRANSITION),data(){return{count:0,positions:Object.values(Wo),toasts:{},defaults:{}}},computed:{toastArray(){return Object.values(this.toasts)},filteredToasts(){return this.defaults.filterToasts(this.toastArray)}},beforeMount(){const e=this.eventBus;e.on(xt.ADD,this.addToast),e.on(xt.CLEAR,this.clearToasts),e.on(xt.DISMISS,this.dismissToast),e.on(xt.UPDATE,this.updateToast),e.on(xt.UPDATE_DEFAULTS,this.updateDefaults),this.defaults=this.$props},mounted(){this.setup(this.container)},methods:{async setup(e){Ci(e)&&(e=await e()),dC(this.$el),e.appendChild(this.$el)},setToast(e){dn(e.id)||(this.toasts[e.id]=e)},addToast(e){e.content=fC(e.content);const t=Object.assign({},this.defaults,e.type&&this.defaults.toastDefaults&&this.defaults.toastDefaults[e.type],e),s=this.defaults.filterBeforeCreate(t,this.toastArray);s&&this.setToast(s)},dismissToast(e){const t=this.toasts[e];!dn(t)&&!dn(t.onClose)&&t.onClose(),delete this.toasts[e]},clearToasts(){Object.keys(this.toasts).forEach(e=>{this.dismissToast(e)})},getPositionToasts(e){const t=this.filteredToasts.filter(s=>s.position===e).slice(0,this.defaults.maxToasts);return this.defaults.newestOnTop?t.reverse():t},updateDefaults(e){dn(e.container)||this.setup(e.container),this.defaults=Object.assign({},this.defaults,e)},updateToast({id:e,options:t,create:s}){this.toasts[e]?(t.timeout&&t.timeout===this.toasts[e].timeout&&t.timeout++,this.setToast(Object.assign({},this.toasts[e],t))):s&&this.addToast(Object.assign({},{id:e},t))},getClasses(e){return[`${Dt}__container`,e].concat(this.defaults.containerClassName)}}});function JC(e,t){const s=L("Toast"),n=L("VtTransition");return w(),$("div",null,[(w(!0),$(_e,null,qe(e.positions,r=>(w(),$("div",{key:r},[v(n,{transition:e.defaults.transition,class:ge(e.getClasses(r))},{default:k(()=>[(w(!0),$(_e,null,qe(e.getPositionToasts(r),o=>(w(),K(s,Se({key:o.id},o),null,16))),128))]),_:2},1032,["transition","class"])]))),128))])}Up.render=JC;var YC=Up,rd=(e={},t=!0)=>{const s=e.eventBus=e.eventBus||new Ql;t&&nt(()=>{const o=Lf(YC,Sp({},e)),i=o.mount(document.createElement("div")),a=e.onMounted;if(dn(a)||a(i,o),e.shareAppContext){const l=e.shareAppContext;l===!0?console.warn(`[${Dt}] App to share context with was not provided.`):(o._context.components=l._context.components,o._context.directives=l._context.directives,o._context.mixins=l._context.mixins,o._context.provides=l._context.provides,o.config.globalProperties=l.config.globalProperties)}});const n=(o,i)=>{const a=Object.assign({},{id:uC(),type:wt.DEFAULT},i,{content:o});return s.emit(xt.ADD,a),a.id};n.clear=()=>s.emit(xt.CLEAR,void 0),n.updateDefaults=o=>{s.emit(xt.UPDATE_DEFAULTS,o)},n.dismiss=o=>{s.emit(xt.DISMISS,o)};function r(o,{content:i,options:a},l=!1){const u=Object.assign({},a,{content:i});s.emit(xt.UPDATE,{id:o,options:u,create:l})}return n.update=r,n.success=(o,i)=>n(o,Object.assign({},i,{type:wt.SUCCESS})),n.info=(o,i)=>n(o,Object.assign({},i,{type:wt.INFO})),n.error=(o,i)=>n(o,Object.assign({},i,{type:wt.ERROR})),n.warning=(o,i)=>n(o,Object.assign({},i,{type:wt.WARNING})),n},XC=()=>{const e=()=>console.warn(`[${Dt}] This plugin does not support SSR!`);return new Proxy(e,{get(){return e}})};function Vp(e){return hC()?pC(e)?rd({eventBus:e},!1):rd(e,!0):XC()}var qp=Symbol("VueToastification"),zp=new Ql,QC=(e,t)=>{(t==null?void 0:t.shareAppContext)===!0&&(t.shareAppContext=e);const s=Vp(Sp({eventBus:zp},t));e.provide(qp,s)},Ks=e=>{const t=as()?Ct(qp,void 0):void 0;return t||Vp(zp)},ZC=QC;const eS={name:"AchievementToast",props:{title:{type:String,required:!0},score:{type:Number,required:!0,validator:e=>e>=0&&e<=5}},computed:{getEmoji(){return{0:"",1:"",2:"",3:"",4:"",5:""}[this.score]||""}}},tS={class:"achievement-toast"},sS={class:"achievement-header"},nS={class:"achievement-emoji"},rS={class:"achievement-title"},oS={class:"achievement-score"},iS={class:"stars"},aS={class:"score-text"};function lS(e,t,s,n,r,o){return w(),$("div",tS,[p("div",sS,[p("div",nS,V(o.getEmoji),1),p("div",rS,V(s.title),1)]),p("div",oS,[p("div",iS,[(w(),$(_e,null,qe(5,i=>p("span",{key:i,class:ge(["star",{active:i<=s.score}])},"",2)),64))]),p("div",aS,"Score: "+V(s.score)+"/5",1)])])}const cS=ft(eS,[["render",lS]]),uS={name:"ChatPage",components:{Button:Ot,Progress:uk,Textarea:wi,ArrowLeftIcon:Hh,SendIcon:m1},data(){return{progress:0,objectiveIndex:0,totalObjectives:1,objectiveProgress:"0/1",isTyping:!1,API_BASE_URL:"http://localhost:5001",SOCKET_URL:"http://localhost:5001",showId:this.$route.params.show_id,showImageUrl:"",episodeId:"",chatId:this.$route.params.chat_id,showName:"Loading...",episodeName:"Loading...",playerImageUrl:"",input:"",toast:null,characters:[],player_name:"",isSending:!1,directorDirecting:!1,typingIndicators:{},messages:[],statusMessage:"",director_message:"",errorMessage:"",socket:null,isConnected:!1,isChatStarted:!1,storyCompleted:!1,typingTimeout:null,characterColors:{},characterImages:{},colorPalette:["text-red-600 dark:text-red-400","text-yellow-600 dark:text-yellow-400","text-blue-600 dark:text-blue-400","text-indigo-600 dark:text-indigo-400","text-purple-600 dark:text-purple-400","text-pink-600 dark:text-pink-400","text-orange-600 dark:text-orange-400","text-teal-600 dark:text-teal-400"]}},created(){this.toast=Ks()},mounted(){this.connectToSocket(),this.fetchChatDetails()},beforeUnmount(){this.disconnectSocket()},computed:{hasActiveTypingIndicators(){return Object.values(this.typingIndicators).some(e=>e==="typing")}},methods:{async fetchChatDetails(){var e,t;try{const s=await Be(`api/chats/${this.chatId}`);if(!(s!=null&&s.chat))throw new Error("Invalid chat data");const n=s.chat;if(this.player_name=n.player_name||"Player",this.episodeId=n.episode_id,this.episodeName=((e=n.episodes)==null?void 0:e.name)||"Unknown Episode",this.totalObjectives=JSON.parse(n.episodes.plot_objectives).length,this.objectiveIndex=n.current_objective_index,this.objectiveProgress=`${this.objectiveIndex}/${this.totalObjectives}`,this.storyCompleted=n.story_completed,n.player_image_url&&(this.playerImageUrl=n.player_image_url),(t=n.episodes)!=null&&t.show_id){const r=await Be(`api/shows/${n.episodes.show_id}`);if(r!=null&&r.show){const o=r.show;this.showName=o.name,this.showImageUrl=o.image_url||"";let i=[];try{i=typeof o.characters=="string"?JSON.parse(o.characters):o.characters||[]}catch{i=[]}i.forEach((a,l)=>{const u=a.name.trim().toLowerCase();this.characterColors[u]=this.colorPalette[l%this.colorPalette.length],this.characterColors[a.name.trim()]=this.colorPalette[l%this.colorPalette.length],this.characterImages[u]=a.image_url,this.characterImages[a.name.trim()]=a.image_url})}}(s.messages||[]).forEach(r=>this.messages.push({role:r.role,content:r.content,type:r.type,sequence:r.sequence})),this.messages.sort((r,o)=>r.sequence-o.sequence)}catch(s){console.error(s),this.errorMessage="Failed to load chat details. Please refresh."}},connectToSocket(){St.auth.getSession().then(({data:e})=>{var s;const t=(s=e.session)==null?void 0:s.access_token;this.socket=Oo(this.SOCKET_URL,{path:"/socket.io",transports:["polling"],reconnectionAttempts:5,secure:!0,rejectUnauthorized:!1,autoConnect:!0,auth:{token:t},extraHeaders:{Authorization:t?`Bearer ${t}`:""}}),this.socket.on("connect",this.handleConnect),this.socket.on("connect_error",this.handleConnectionError),this.socket.on("disconnect",this.handleDisconnect),this.socket.on("dialogue",this.handleDialogue),this.socket.on("status",this.handleStatus),this.socket.on("error",this.handleError),this.socket.on("objective_status",this.handleObjectiveStatus),this.socket.on("typing_indicator",this.handleTypingIndicator),this.socket.on("director_status",this.handleDirectorStatus),this.socket.on("player_action",this.handlePlayerAction),this.socket.on("achievement",this.handleAchievement)}).catch(e=>{console.error("Auth error",e),this.errorMessage="Auth failed"})},disconnectSocket(){this.socket&&(this.chatId&&this.socket.emit("leave_chat",{chat_id:this.chatId}),setTimeout(()=>{this.socket.off(),this.socket.disconnect()},200))},handleConnect(){this.isConnected=!0,this.errorMessage="",this.socket.emit("join_chat",{chat_id:this.chatId})},handleConnectionError(e){console.error(e),this.isConnected=!1,this.errorMessage="Server connection failed. Please refresh."},handleDisconnect(e){console.log("Disconnected:",e),this.isConnected=!1,e==="io server_disconnect"&&this.socket.connect()},sendMessage(){!this.input.trim()||this.isSending||this.storyCompleted||(this.isSending=!0,this.messages.push({role:"Player",content:this.input,type:"player_input"}),this.socket.emit("player_input",{chat_id:this.chatId,input:this.input}),this.input="",this.scrollToBottom(),this.isSending=!1)},handleTyping(){this.typingTimeout&&clearTimeout(this.typingTimeout),!this.storyCompleted&&(this.typingTimeout=setTimeout(()=>{this.isTyping=!1},2e3))},handleDialogue(e){e!=null&&e.content&&(this.messages.push({role:e.role,content:e.content,type:e.type}),this.progress+=.5,this.scrollToBottom())},handleStatus(e){console.log(e),e.message&&(this.statusMessage=e.message),e.story_completed&&(this.storyCompleted=!0)},handleError(e){console.error(e),e.message&&this.toast.error(e.message)},handleObjectiveStatus(e){console.log(e),this.objectiveIndex=e.index||0,this.totalObjectives=e.total||1,this.progress=this.objectiveIndex>0&&this.totalObjectives>0?Math.max(1,Math.floor(this.objectiveIndex/this.totalObjectives*100)):0,this.objectiveProgress=`${this.objectiveIndex}/${this.totalObjectives}`,(e.story_completed||e.final)&&(this.storyCompleted=!0,this.statusMessage="Story completed! You've reached the end of this episode."),this.scrollToBottom()},handleTypingIndicator(e){e.role&&(this.typingIndicators={...this.typingIndicators,[e.role]:e.status},this.scrollToBottom())},handleDirectorStatus(e){this.directorDirecting=e.status==="directing",e.message&&(this.director_message=e.message),this.scrollToBottom()},handlePlayerAction(e){e.content&&this.toast.info("Your character needs to respond now.",{timeout:8e3,position:"top-center"})},handleAchievement(e){console.log(e),e.title&&this.toast({component:cS,props:{title:e.title,score:e.score||0}},{timeout:8e3,position:"top-center",closeButton:"button",closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,icon:!1,containerClassName:"achievement-toast-container"})},scrollToBottom(){this.$nextTick(()=>{const e=this.$refs.messagesContainer;e&&(e.scrollTop=e.scrollHeight)})},goBack(){this.$router.go(-1)},getCharacterImageUrl(e){return this.characterImages[e.trim().toLowerCase()]||""},getRoleColor(e){const t=e.trim().toLowerCase();return this.characterColors[t]?this.characterColors[t]:{narration:"text-purple-600 dark:text-purple-400",player:"text-blue-600 dark:text-blue-400",system:"text-gray-600 dark:text-gray-400"}[t]||"text-gray-600 dark:text-gray-400"},getMessageStyle(e,t){const s={narration:"bg-purple-100 dark:bg-purple-900/30 italic",player_input:"bg-blue-100 dark:bg-blue-900/30 text-left",system:"bg-gray-100 dark:bg-gray-800/50 text-sm"};if(e==="actor_dialogue"){const n=t.trim().toLowerCase();if(this.characterColors[n]){const r=this.characterColors[n].split(" ")[0].replace("text","bg");return`${r}/20 dark:${r}/30`}}return s[e]||"bg-gray-100 dark:bg-gray-800/30"}},watch:{isConnected(e){e&&!this.isChatStarted&&!this.storyCompleted&&setTimeout(()=>{this.isChatStarted=!0},1e3)},storyCompleted(e){if(e){this.statusMessage="Story completed! You've reached the end of this episode.";const t=this.$route.params.chat_id;this.$router.push(`/end/${t}`)}}}},dS={class:"h-screen flex flex-col dark:bg-gray-900"},fS={class:"sticky top-0 z-10 flex flex-col"},hS={class:"bg-background dark:bg-gray-900 border-b dark:border-gray-700 p-4"},pS={class:"container mx-auto flex justify-between items-center"},mS={class:"flex items-center"},gS=["src"],yS={class:"text-xl font-bold inline-block dark:text-white"},vS={class:"text-sm text-muted-foreground dark:text-gray-400"},_S={class:"bg-background dark:bg-gray-900 border-b dark:border-gray-700 p-4"},bS={class:"container mx-auto"},wS={class:"flex justify-between items-center mb-2"},xS={class:"text-sm dark:text-gray-300"},kS={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2"},CS={key:0,class:"container mx-auto px-4 pt-2"},SS={class:"text-center text-sm text-white py-2 bg-indigo-600 dark:bg-indigo-800 rounded-md p-2 animate-pulse"},ES={class:"font-medium"},AS={class:"flex-1 overflow-hidden container mx-auto p-4"},TS={class:"h-full flex flex-col border rounded-lg bg-background dark:bg-gray-900 dark:border-gray-700"},PS={ref:"messagesContainer",class:"flex-1 overflow-y-auto p-4 space-y-4"},OS=["src"],IS={key:0,class:"my-2"},RS={key:0,class:"flex items-start gap-3"},$S=["src"],DS={class:"flex-1 max-w-[70%]"},LS={class:"flex items-center"},jS={key:1,class:"bg-red-100 dark:bg-red-900/30 p-3 rounded-lg text-red-700 dark:text-red-300 text-sm"},BS={class:"border-t dark:border-gray-700 p-4"},MS={class:"mt-2 flex justify-between items-center"},NS={class:"text-sm text-muted-foreground dark:text-gray-400"};function FS(e,t,s,n,r,o){const i=L("ArrowLeftIcon"),a=L("Button"),l=L("Textarea"),u=L("SendIcon");return w(),$("div",dS,[p("div",fS,[p("div",hS,[p("div",pS,[p("div",mS,[r.showImageUrl?(w(),$("img",{key:0,src:r.showImageUrl,alt:"Show Thumbnail",class:"h-12 w-12 mr-4 rounded"},null,8,gS)):Ee("",!0),p("div",null,[p("h1",yS,V(r.showName),1),p("p",vS,V(r.episodeName),1)])]),v(a,{variant:"outline",onClick:o.goBack,size:"sm",class:"dark:border-gray-600 dark:text-gray-300"},{default:k(()=>[v(i,{class:"h-4 w-4 mr-2"}),t[1]||(t[1]=H(" Back "))]),_:1},8,["onClick"])])]),p("div",_S,[p("div",bS,[p("div",wS,[t[2]||(t[2]=p("span",{class:"text-sm dark:text-gray-300"},"Objective Progress",-1)),p("span",xS,V(r.objectiveProgress),1)]),p("div",kS,[p("div",{class:"bg-blue-600 dark:bg-blue-500 h-2 rounded-full transition-all duration-300",style:Ut({width:`${r.progress}%`})},null,4)])])]),r.directorDirecting?(w(),$("div",CS,[p("div",SS,[p("span",ES,V(r.director_message),1)]),t[3]||(t[3]=p("div",{class:"mt-2 h-1 bg-gray-200 dark:bg-gray-700 rounded-full"},[p("div",{class:"h-full bg-indigo-500 dark:bg-indigo-400 rounded-full animate-director-progress"})],-1))])):Ee("",!0)]),p("div",AS,[p("div",TS,[p("div",PS,[(w(!0),$(_e,null,qe(r.messages,(c,d)=>(w(),$("div",{key:d,class:ge(["flex items-start gap-3",{"justify-start flex-row-reverse":c.role==="Player"}])},[c.role!=="Player"&&o.getCharacterImageUrl(c.role)||c.role==="Player"&&r.playerImageUrl?(w(),$("img",{key:0,src:c.role==="Player"?r.playerImageUrl:o.getCharacterImageUrl(c.role),alt:"Avatar",class:"h-14 w-14 rounded-full flex-shrink-0"},null,8,OS)):Ee("",!0),p("div",{class:ge(["max-w-[90%]",{"text-right ml-auto":c.role==="Player"}])},[p("div",{class:ge(["flex items-center -mb-1",{"justify-end":c.role==="Player"}])},[p("span",{class:ge(["font-semibold text-sm",o.getRoleColor(c.role||"")])},V(c.role==="Player"?r.player_name:c.role),3)],2),p("div",{class:ge(["mt-1 p-2 rounded-lg whitespace-pre-wrap break-words dark:text-white",o.getMessageStyle(c.type||"",c.role||"")])},V(c.content),3)],2)],2))),128)),o.hasActiveTypingIndicators?(w(),$("div",IS,[(w(!0),$(_e,null,qe(r.typingIndicators,(c,d)=>(w(),$("div",{key:d},[c==="typing"?(w(),$("div",RS,[o.getCharacterImageUrl(d)?(w(),$("img",{key:0,src:o.getCharacterImageUrl(d),alt:"Typing Avatar",class:"h-10 w-10 rounded-full flex-shrink-0"},null,8,$S)):Ee("",!0),p("div",DS,[p("div",LS,[p("span",{class:ge(["font-semibold text-sm",o.getRoleColor(d)])},V(d==="Player"?r.player_name:d),3)]),t[4]||(t[4]=vl('<div class="mt-1 p-3 rounded-lg bg-gray-100 dark:bg-gray-800 inline-flex items-center"><div class="flex space-x-1 text-gray-600 dark:text-gray-300"><div class="h-2 w-2 bg-current rounded-full animate-bounce" style="animation-delay:0ms;"></div><div class="h-2 w-2 bg-current rounded-full animate-bounce" style="animation-delay:150ms;"></div><div class="h-2 w-2 bg-current rounded-full animate-bounce" style="animation-delay:300ms;"></div></div></div>',1))])])):Ee("",!0)]))),128))])):Ee("",!0),r.errorMessage?(w(),$("div",jS,V(r.errorMessage),1)):Ee("",!0)],512),p("div",BS,[v(l,{ref:"messageInput",modelValue:r.input,"onUpdate:modelValue":t[0]||(t[0]=c=>r.input=c),placeholder:"Type your response...",class:"resize-none dark:bg-gray-800 dark:text-white dark:border-gray-600",rows:"2",disabled:r.isSending||r.storyCompleted,maxlength:"500",onKeydown:[Df(bs(o.sendMessage,["exact","prevent"]),["enter"]),o.handleTyping]},null,8,["modelValue","disabled","onKeydown"]),p("div",MS,[p("span",NS,V(r.input.length)+"/500",1),v(a,{onClick:o.sendMessage,disabled:!r.input.trim()||r.isSending||r.storyCompleted,class:"dark:bg-blue-600 dark:hover:bg-blue-700 dark:text-white"},{default:k(()=>[t[5]||(t[5]=H(" Send ")),v(u,{class:"h-4 w-4 ml-2"})]),_:1},8,["onClick","disabled"])])])])])])}const US=ft(uS,[["render",FS]]),Zr={__name:"Card",props:{class:{type:null,required:!1}},setup(e){const t=e;return(s,n)=>(w(),$("div",{class:ge(x(Ye)("rounded-xl border border-slate-200 bg-white text-slate-950 shadow dark:border-slate-800 dark:bg-slate-950 dark:text-slate-50",t.class))},[re(s.$slots,"default")],2))}},eo={__name:"CardContent",props:{class:{type:null,required:!1}},setup(e){const t=e;return(s,n)=>(w(),$("div",{class:ge(x(Ye)("p-6 pt-0",t.class))},[re(s.$slots,"default")],2))}},Ei={__name:"CardDescription",props:{class:{type:null,required:!1}},setup(e){const t=e;return(s,n)=>(w(),$("p",{class:ge(x(Ye)("text-sm text-slate-500 dark:text-slate-400",t.class))},[re(s.$slots,"default")],2))}},Ai={__name:"CardHeader",props:{class:{type:null,required:!1}},setup(e){const t=e;return(s,n)=>(w(),$("div",{class:ge(x(Ye)("flex flex-col gap-y-1.5 p-6",t.class))},[re(s.$slots,"default")],2))}},Ti={__name:"CardTitle",props:{class:{type:null,required:!1}},setup(e){const t=e;return(s,n)=>(w(),$("h3",{class:ge(x(Ye)("font-semibold leading-none tracking-tight",t.class))},[re(s.$slots,"default")],2))}},VS={name:"ShowPage",components:{Button:Ot,Card:Zr,CardContent:eo,CardDescription:Ei,CardHeader:Ai,CardTitle:Ti,PlusIcon:yi},setup(){const e=Xr();return{navigateToCreate:()=>{e.push("/create/show")},viewShowDetails:n=>{e.push(`/show/${n}`)},router:e}},data(){return{user:null,API_BASE_URL:"http://localhost:5001",shows:[],loading:!0,error:null}},methods:{async fetchShows(){this.loading=!0,this.error=null;try{console.log("Fetching shows");const e=await Be("api/shows");if(!e||!e.shows||!Array.isArray(e.shows))throw new Error("Received invalid data format from API");this.shows=e.shows.map(t=>({id:t.id||"",name:t.name||"",description:t.description||"",imageUrl:t.image_url||""})),console.log("Fetched shows:",this.shows)}catch(e){console.error("Error fetching shows:",e),this.error=`Failed to load shows: ${e.message}`}finally{this.loading=!1}},handleImageError(e){e.target.src="/placeholder-image.jpg"},toggleDescription(e){e.isExpanded=!e.isExpanded},async getCurrentUser(){var e;try{const{data:t}=await St.auth.getSession();this.user=((e=t.session)==null?void 0:e.user)||null}catch(t){console.error("Error getting current user:",t)}}},async mounted(){await this.getCurrentUser(),await this.fetchShows()}},qS={class:"py-8"},zS={class:"flex justify-between items-center mb-8"},HS={key:0,class:"flex justify-center items-center py-12"},KS={key:1,class:"text-center py-12"},WS={class:"text-red-500"},GS={key:2,class:"text-center py-12"},JS={key:3,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},YS={class:"relative w-full pb-[56.25%] bg-muted overflow-hidden"},XS=["src","alt","onClick"],QS=["onClick"];function ZS(e,t,s,n,r,o){const i=L("PlusIcon"),a=L("Button"),l=L("CardTitle"),u=L("CardDescription"),c=L("CardHeader"),d=L("CardContent"),f=L("Card");return w(),$("div",qS,[p("div",zS,[t[2]||(t[2]=p("div",null,[p("h1",{class:"text-3xl font-bold tracking-tight"},"Browse Shows"),p("p",{class:"text-muted-foreground"},"Discover interactive shows created by the community")],-1)),r.user?(w(),K(a,{key:0,onClick:n.navigateToCreate,variant:"default"},{default:k(()=>[v(i,{class:"h-4 w-4 mr-2"}),t[1]||(t[1]=H(" Create Show "))]),_:1},8,["onClick"])):Ee("",!0)]),r.loading?(w(),$("div",HS,t[3]||(t[3]=[p("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"},null,-1)]))):r.error?(w(),$("div",KS,[p("p",WS,V(r.error),1),v(a,{onClick:o.fetchShows,class:"mt-4"},{default:k(()=>t[4]||(t[4]=[H("Try Again")])),_:1},8,["onClick"])])):r.shows.length===0?(w(),$("div",GS,[t[6]||(t[6]=p("p",{class:"text-muted-foreground"},"No shows found. Be the first to create one!",-1)),r.user?(w(),K(a,{key:0,onClick:n.navigateToCreate,class:"mt-4"},{default:k(()=>t[5]||(t[5]=[H("Create Show")])),_:1},8,["onClick"])):Ee("",!0)])):(w(),$("div",JS,[(w(!0),$(_e,null,qe(r.shows,h=>(w(),K(f,{key:h.id,class:"group relative overflow-hidden transition-transform hover:scale-105 hover:shadow-lg"},{default:k(()=>[p("div",YS,[p("img",{src:h.imageUrl||"/placeholder-image.jpg",class:"absolute inset-0 w-full h-full object-contain",alt:`${h.name} thumbnail`,onError:t[0]||(t[0]=(...m)=>o.handleImageError&&o.handleImageError(...m)),loading:"lazy",onClick:m=>n.viewShowDetails(h.id)},null,40,XS),t[7]||(t[7]=p("div",{class:"absolute inset-0 bg-gradient-to-t from-background/80 to-transparent pointer-events-none"},null,-1))]),v(c,null,{default:k(()=>[v(l,{class:"line-clamp-1"},{default:k(()=>[H(V(h.name||"Untitled Show"),1)]),_:2},1024),v(u,null,{default:k(()=>[p("p",{class:ge([{"line-clamp-2":!h.isExpanded},"transition-all duration-300"])},V(h.description||"No description available"),3),h.description?(w(),$("button",{key:0,onClick:m=>o.toggleDescription(h),class:"text-primary underline hover:text-primary/80 text-md mt-1 font-bold text-blue-500"},V(h.isExpanded?"Show less":"Read more"),9,QS)):Ee("",!0)]),_:2},1024)]),_:2},1024),v(d,{class:"pt-0"},{default:k(()=>[v(a,{class:"w-full",onClick:m=>n.viewShowDetails(h.id)},{default:k(()=>t[8]||(t[8]=[H("View Show")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]))])}const od=ft(VS,[["render",ZS]]),Pi={__name:"Input",props:{defaultValue:{type:[String,Number],required:!1},modelValue:{type:[String,Number],required:!1},class:{type:null,required:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e,r=Hs(s,"modelValue",t,{passive:!0,defaultValue:s.defaultValue});return(o,i)=>oi((w(),$("input",{"onUpdate:modelValue":i[0]||(i[0]=a=>ze(r)?r.value=a:null),class:ge(x(Ye)("flex h-9 w-full rounded-md border border-slate-200 bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-950 disabled:cursor-not-allowed disabled:opacity-50 dark:border-slate-800 dark:placeholder:text-slate-400 dark:focus-visible:ring-slate-300",s.class))},null,2)),[[bl,x(r)]])}},Oi={__name:"Label",props:{for:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(e){const t=e,s=ne(()=>{const{class:n,...r}=t;return r});return(n,r)=>(w(),K(x(Kw),Se(s.value,{class:x(Ye)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",t.class)}),{default:k(()=>[re(n.$slots,"default")]),_:3},16,["class"]))}},eE={name:"CreateShow",components:{Button:Ot,Input:Pi,Label:Oi,Textarea:wi,ImageIcon:a1,Loader2Icon:Yr,PlusIcon:yi,UploadIcon:Xh,XIcon:vi},setup(){const e=Xr(),t=Ks(),s=is({name:"",description:"",relations:"",characters:[]});s.characters.push({name:"",description:"",imagePreview:null,imageFile:null});const n=ee(null),r=ee(null),o=ee(!1),i=ee(!1),a=ee(null),l=ee([null]),u=ne(()=>!!e.currentRoute.value.params.showId),c=ne(()=>e.currentRoute.value.params.showId),d=ne(()=>s.name.trim()!==""&&s.characters.length>0&&s.characters.every(I=>I.name.trim()!==""&&(u.value?!0:I.imageFile))),f=async()=>{if(u.value){i.value=!0;try{const I=await Be(`api/shows/${c.value}`),O=I.show||I;s.name=O.name||"",s.description=O.description||"",s.relations=O.relations||"";let A=[];if(typeof O.characters=="string")try{A=JSON.parse(O.characters)}catch{}else Array.isArray(O.characters)&&(A=O.characters);A.length&&(s.characters=A.map(F=>({name:F.name||"",description:F.description||"",imagePreview:F.image_url||null,imageFile:null})),l.value=A.map(()=>null)),O.image_url&&(n.value=O.image_url)}catch{t.error("Failed to load show data")}finally{i.value=!1}}};return u.value&&f(),{showForm:s,imagePreview:n,selectedFile:r,isSaving:o,isLoading:i,isEditMode:u,isFormValid:d,fileInput:a,characterFileInputs:l,addCharacter:()=>{s.characters.push({name:"",description:"",imagePreview:null,imageFile:null}),l.value.push(null)},removeCharacter:I=>{s.characters.splice(I,1),l.value.splice(I,1)},triggerFileInput:()=>a.value.click(),handleImageChange:I=>{const O=I.target.files[0];O&&O.size<=2*1024*1024?(r.value=O,n.value=URL.createObjectURL(O)):t.error("Image size should be less than 2MB")},clearImage:()=>{n.value=null,r.value=null,a.value&&(a.value.value="")},handleCharacterImageChange:(I,O)=>{const A=I.target.files[0];if(A&&A.size<=2*1024*1024){const F=new FileReader;F.onload=q=>s.characters[O].imagePreview=q.target.result,F.readAsDataURL(A),s.characters[O].imageFile=A}else t.error("Image size should be less than 2MB")},triggerCharacterFileInput:I=>{const O=l.value[I];O&&O.click()},clearCharacterImage:I=>{s.characters[I].imagePreview=null,s.characters[I].imageFile=null;const O=l.value[I];O&&(O.value="")},saveShow:async()=>{if(d.value){if(!u.value&&!r.value){t.error("Please select an image for the show");return}o.value=!0;try{const I=new FormData;I.append("data",JSON.stringify({name:s.name,description:s.description,characters:s.characters.map(A=>({name:A.name,description:A.description,...u.value&&!A.imageFile&&{image_url:A.imagePreview}})),relations:s.relations})),r.value&&I.append("image",r.value),s.characters.forEach((A,F)=>{A.imageFile&&I.append(`characters[${F}].image`,A.imageFile)});const O=u.value?`api/shows/${c.value}`:"api/shows";await Be(O,{method:u.value?"PUT":"POST",body:I}),t.success(`Show ${u.value?"updated":"created"} successfully!`),e.push("/shows")}catch(I){t.error(I.message||"An error occurred while saving")}finally{o.value=!1}}},cancel:()=>e.go(-1)}}},tE={class:"container mx-auto px-4 py-8 max-w-4xl"},sE={class:"mb-8"},nE={class:"text-2xl font-bold tracking-tight"},rE={class:"text-muted-foreground text-sm mt-2"},oE={key:0,class:"flex justify-center items-center min-h-[400px]"},iE={class:"space-y-2"},aE={class:"space-y-2"},lE={class:"space-y-2"},cE={class:"grid grid-cols-1 gap-4"},uE={key:0,class:"relative aspect-video bg-muted rounded-md overflow-hidden"},dE=["src"],fE={key:1,class:"border border-dashed rounded-md p-4 flex flex-col items-center justify-center"},hE={class:"space-y-2"},pE={class:"flex justify-between items-center"},mE={class:"space-y-2"},gE={class:"space-y-2"},yE={class:"space-y-2"},vE={class:"grid grid-cols-1 gap-4"},_E={key:0,class:"relative aspect-square bg-muted rounded-md overflow-hidden"},bE=["src"],wE={key:1,class:"border border-dashed rounded-md p-4 flex flex-col items-center justify-center"},xE=["onChange"],kE={class:"space-y-2"},CE={class:"flex flex-col-reverse sm:flex-row sm:justify-end gap-3 pt-6"};function SE(e,t,s,n,r,o){const i=L("Loader2Icon"),a=L("Label"),l=L("Input"),u=L("Textarea"),c=L("XIcon"),d=L("Button"),f=L("ImageIcon"),h=L("UploadIcon"),m=L("PlusIcon");return w(),$("div",tE,[p("div",sE,[p("h1",nE,V(n.isEditMode?"Edit Show":"Create New Show"),1),p("p",rE,V(n.isEditMode?"Update your show details":"Fill in the details to create a new show"),1)]),n.isLoading?(w(),$("div",oE,[v(i,{class:"h-8 w-8 animate-spin"})])):(w(),$("form",{key:1,onSubmit:t[4]||(t[4]=bs((...g)=>n.saveShow&&n.saveShow(...g),["prevent"])),class:"space-y-6"},[p("div",iE,[v(a,{for:"show-name"},{default:k(()=>t[5]||(t[5]=[H("Show Name")])),_:1}),v(l,{id:"show-name",modelValue:n.showForm.name,"onUpdate:modelValue":t[0]||(t[0]=g=>n.showForm.name=g),placeholder:"e.g. Friends",required:"",class:"w-full"},null,8,["modelValue"])]),p("div",aE,[v(a,{for:"show-description"},{default:k(()=>t[6]||(t[6]=[H("Description")])),_:1}),v(u,{id:"show-description",modelValue:n.showForm.description,"onUpdate:modelValue":t[1]||(t[1]=g=>n.showForm.description=g),placeholder:"Brief description of the show",rows:"3",class:"w-full"},null,8,["modelValue"])]),p("div",lE,[v(a,null,{default:k(()=>t[7]||(t[7]=[H("Show Image")])),_:1}),p("div",cE,[n.imagePreview?(w(),$("div",uE,[p("img",{src:n.imagePreview,alt:"Preview",class:"object-cover w-full h-full"},null,8,dE),v(d,{type:"button",variant:"destructive",size:"icon",class:"absolute top-2 right-2 h-8 w-8 rounded-full",onClick:n.clearImage},{default:k(()=>[v(c,{class:"h-4 w-4"})]),_:1},8,["onClick"])])):(w(),$("div",fE,[p("input",{ref:"fileInput",type:"file",accept:"image/*",class:"hidden",onChange:t[2]||(t[2]=(...g)=>n.handleImageChange&&n.handleImageChange(...g))},null,544),v(f,{class:"h-8 w-8 text-muted-foreground mb-2"}),v(d,{type:"button",variant:"outline",onClick:n.triggerFileInput},{default:k(()=>[v(h,{class:"h-4 w-4 mr-2"}),t[8]||(t[8]=H(" Upload Image "))]),_:1},8,["onClick"]),t[9]||(t[9]=p("p",{class:"text-xs text-muted-foreground mt-2"},"PNG, JPG or GIF, max 2MB",-1))]))])]),p("div",hE,[p("div",pE,[v(a,null,{default:k(()=>t[10]||(t[10]=[H("Characters")])),_:1}),v(d,{onClick:n.addCharacter,type:"button",variant:"outline",size:"sm"},{default:k(()=>[v(m,{class:"h-4 w-4 mr-2"}),t[11]||(t[11]=H(" Add Character "))]),_:1},8,["onClick"])]),(w(!0),$(_e,null,qe(n.showForm.characters,(g,b)=>(w(),$("div",{key:b,class:"p-4 border rounded-lg relative space-y-2 mt-2"},[v(d,{type:"button",variant:"destructive",size:"icon",class:"absolute right-2 top-2",onClick:C=>n.removeCharacter(b)},{default:k(()=>[v(c,{class:"h-4 w-4"}),t[12]||(t[12]=p("span",{class:"sr-only"},"Remove",-1))]),_:2},1032,["onClick"]),p("div",mE,[v(a,{for:`character-name-${b}`},{default:k(()=>t[13]||(t[13]=[H("Character Name")])),_:2},1032,["for"]),v(l,{id:`character-name-${b}`,modelValue:g.name,"onUpdate:modelValue":C=>g.name=C,placeholder:"Character name",class:"w-full"},null,8,["id","modelValue","onUpdate:modelValue"])]),p("div",gE,[v(a,{for:`character-desc-${b}`},{default:k(()=>t[14]||(t[14]=[H("Description")])),_:2},1032,["for"]),v(u,{id:`character-desc-${b}`,modelValue:g.description,"onUpdate:modelValue":C=>g.description=C,placeholder:"Character description and personality",rows:"2",class:"w-full"},null,8,["id","modelValue","onUpdate:modelValue"])]),p("div",yE,[v(a,null,{default:k(()=>t[15]||(t[15]=[H("Character Image")])),_:1}),p("div",vE,[g.imagePreview?(w(),$("div",_E,[p("img",{src:g.imagePreview,alt:"Preview",class:"object-cover w-full h-full"},null,8,bE),v(d,{type:"button",variant:"destructive",size:"icon",class:"absolute top-2 right-2 h-8 w-8 rounded-full",onClick:C=>n.clearCharacterImage(b)},{default:k(()=>[v(c,{class:"h-4 w-4"})]),_:2},1032,["onClick"])])):(w(),$("div",wE,[p("input",{type:"file",accept:"image/*",ref_for:!0,ref:C=>n.characterFileInputs[b]=C,class:"hidden",onChange:C=>n.handleCharacterImageChange(C,b)},null,40,xE),v(d,{type:"button",variant:"outline",onClick:C=>n.triggerCharacterFileInput(b)},{default:k(()=>[v(h,{class:"h-4 w-4 mr-2"}),t[16]||(t[16]=H(" Upload Image "))]),_:2},1032,["onClick"]),t[17]||(t[17]=p("p",{class:"text-xs text-muted-foreground mt-2"},"PNG, JPG or GIF, max 2MB",-1))]))])])]))),128))]),p("div",kE,[v(a,{for:"show-relations"},{default:k(()=>t[18]||(t[18]=[H("Character Relationships")])),_:1}),v(u,{id:"show-relations",modelValue:n.showForm.relations,"onUpdate:modelValue":t[3]||(t[3]=g=>n.showForm.relations=g),placeholder:"Describe relationships between characters",rows:"3",class:"w-full"},null,8,["modelValue"])]),p("div",CE,[v(d,{onClick:n.cancel,type:"button",variant:"outline",class:"w-full sm:w-auto"},{default:k(()=>t[19]||(t[19]=[H(" Cancel ")])),_:1},8,["onClick"]),v(d,{type:"submit",disabled:n.isSaving||!n.isFormValid,class:"w-full sm:w-auto"},{default:k(()=>[n.isSaving?(w(),K(i,{key:0,class:"h-4 w-4 mr-2 animate-spin"})):Ee("",!0),H(" "+V(n.isSaving?"Saving...":"Save Show"),1)]),_:1},8,["disabled"])])],32))])}const id=ft(eE,[["render",SE],["__scopeId","data-v-6decb6ea"]]),Hp={__name:"Badge",props:{variant:{type:null,required:!1},class:{type:null,required:!1}},setup(e){const t=e;return(s,n)=>(w(),$("div",{class:ge(x(Ye)(x(EE)({variant:e.variant}),t.class))},[re(s.$slots,"default")],2))}},EE=wl("inline-flex items-center rounded-md border border-slate-200 px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-slate-950 focus:ring-offset-2 dark:border-slate-800 dark:focus:ring-slate-300",{variants:{variant:{default:"border-transparent bg-slate-900 text-slate-50 shadow hover:bg-slate-900/80 dark:bg-slate-50 dark:text-slate-900 dark:hover:bg-slate-50/80",secondary:"border-transparent bg-slate-100 text-slate-900 hover:bg-slate-100/80 dark:bg-slate-800 dark:text-slate-50 dark:hover:bg-slate-800/80",destructive:"border-transparent bg-red-500 text-slate-50 shadow hover:bg-red-500/80 dark:bg-red-900 dark:text-slate-50 dark:hover:bg-red-900/80",outline:"text-slate-950 dark:text-slate-50"}},defaultVariants:{variant:"default"}}),AE={__name:"Dialog",props:{open:{type:Boolean,required:!1},defaultOpen:{type:Boolean,required:!1},modal:{type:Boolean,required:!1}},emits:["update:open"],setup(e,{emit:t}){const r=en(e,t);return(o,i)=>(w(),K(x(Cb),ts(Ss(x(r))),{default:k(()=>[re(o.$slots,"default")]),_:3},16))}},TE={__name:"DialogContent",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const s=e,n=t,r=ne(()=>{const{class:i,...a}=s;return a}),o=en(r,n);return(i,a)=>(w(),K(x(Nw),null,{default:k(()=>[v(x(ew),{class:"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),v(x(Gb),Se(x(o),{class:x(Ye)("fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 border border-slate-200 bg-white p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg dark:border-slate-800 dark:bg-slate-950",s.class)}),{default:k(()=>[re(i.$slots,"default"),v(x(tw),{class:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-slate-950 focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-slate-100 data-[state=open]:text-slate-500 dark:ring-offset-slate-950 dark:focus:ring-slate-300 dark:data-[state=open]:bg-slate-800 dark:data-[state=open]:text-slate-400"},{default:k(()=>[v(x(vi),{class:"w-4 h-4"}),a[0]||(a[0]=p("span",{class:"sr-only"},"Close",-1))]),_:1})]),_:3},16,["class"])]),_:3}))}},PE={__name:"DialogDescription",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(e){const t=e,s=ne(()=>{const{class:r,...o}=t;return o}),n=Jr(s);return(r,o)=>(w(),K(x(nw),Se(x(n),{class:x(Ye)("text-sm text-slate-500 dark:text-slate-400",t.class)}),{default:k(()=>[re(r.$slots,"default")]),_:3},16,["class"]))}},OE={__name:"DialogFooter",props:{class:{type:null,required:!1}},setup(e){const t=e;return(s,n)=>(w(),$("div",{class:ge(x(Ye)("flex flex-col-reverse sm:flex-row sm:justify-end sm:gap-x-2",t.class))},[re(s.$slots,"default")],2))}},IE={__name:"DialogHeader",props:{class:{type:null,required:!1}},setup(e){const t=e;return(s,n)=>(w(),$("div",{class:ge(x(Ye)("flex flex-col gap-y-1.5 text-center sm:text-left",t.class))},[re(s.$slots,"default")],2))}},RE={__name:"DialogTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(e){const t=e,s=ne(()=>{const{class:r,...o}=t;return o}),n=Jr(s);return(r,o)=>(w(),K(x(sw),Se(x(n),{class:x(Ye)("text-lg font-semibold leading-none tracking-tight",t.class)}),{default:k(()=>[re(r.$slots,"default")]),_:3},16,["class"]))}},$E={components:{Button:Ot,Card:Zr,CardHeader:Ai,CardTitle:Ti,CardDescription:Ei,CardContent:eo,Badge:Hp,PlayIcon:zl,PlusIcon:yi,ChevronRightIcon:Kh,Loader2Icon:Yr,Dialog:AE,DialogContent:TE,DialogHeader:IE,DialogTitle:RE,DialogDescription:PE,DialogFooter:OE,Label:Oi,Input:Pi,Textarea:wi,StarIcon:Hl,EyeIcon:Ka,ClockIcon:Wh,ChevronDownIcon:gi,ScrollTextIcon:p1},name:"ShowDetailsPage",data(){return{loading:!0,error:null,show_id:this.$route.params.id,API_BASE_URL:"http://localhost:5001",user_name:localStorage.getItem("username").split(" ")[0]||"player",show:{id:"",name:"",image_url:"",description:"",creator_id:"",users:{username:""},characters:"[]",relations:""},episodes:[],playerDialog:!1,selectedEpisode:null,isStarting:!1,expandedDescriptions:{}}},computed:{parsedCharacters(){try{return this.show.characters?typeof this.show.characters=="string"?JSON.parse(this.show.characters):Array.isArray(this.show.characters)?this.show.characters:(console.error("Characters in unexpected format:",this.show.characters),[]):[]}catch(e){return console.error("Error parsing characters:",e,this.show.characters),[]}}},methods:{getCreatorName(){var e;return((e=this.show.users)==null?void 0:e.username)||"Unknown creator"},createEpisode(){this.$router.push("/create/episode/"+this.show_id)},closePlayerDialog(){this.playerDialog=!1},startEpisode(e){this.selectedEpisode=e,this.playerDialog=!0},async startPlaying(e){var s;this.isStarting=!0;const t=Ks();try{const n=await Be(`api/episodes/${e}/chats`,{method:"POST",body:JSON.stringify({player_name:this.user_name,player_description:((s=this.selectedEpisode)==null?void 0:s.player_role)||""})});n.error?t.error(`Error starting episode: ${n.error}`):this.$router.push(`/show/${this.show_id}/chat/${n.chat.id}`)}catch(n){t.error(`Error starting episode: ${n.message}`)}finally{this.isStarting=!1}},startRandomEpisode(){if(this.episodes.length===0){alert("No episodes available");return}const e=this.episodes[Math.floor(Math.random()*this.episodes.length)];this.startEpisode(e)},async getShow(){const e=Ks();try{this.loading=!0,this.error=null;const t=await Be(`api/shows/${this.show_id}`);this.show={...t.show},await this.getEpisodes()}catch(t){console.error("Error fetching show:",t),this.error=`Failed to load show: ${t.message}`,e.error(`Failed to load show: ${t.message}`)}finally{this.loading=!1}},async getEpisodes(){try{const e=await Be(`api/show/${this.show_id}/episodes`);this.episodes=e.episodes}catch(e){console.error("Error fetching episodes:",e),this.episodes=[]}},calculateDuration(e){try{return(typeof e.plot_objectives=="string"?JSON.parse(e.plot_objectives||"[]"):e.plot_objectives||[]).length*2}catch(t){return console.error("Error parsing plot objectives:",t),0}},toggleDescription(e){this.expandedDescriptions={...this.expandedDescriptions,[e]:!this.expandedDescriptions[e]}},showReadMore(e){return(e==null?void 0:e.length)>100}},mounted(){this.getShow()}},DE={key:0,class:"flex justify-center items-center min-h-screen"},LE={key:1,class:"p-4 bg-red-50 text-red-800 rounded-md m-4"},jE={key:2,class:"bg-background min-h-screen"},BE={class:"relative min-h-[20rem] sm:h-96 bg-muted"},ME=["src"],NE={class:"container mx-auto px-4 relative pt-8 sm:pt-32 h-full flex flex-col justify-end"},FE={class:"max-w-3xl mt-20"},UE={class:"text-2xl sm:text-4xl lg:text-5xl font-bold text-white mb-3 sm:mb-4 drop-shadow-lg"},VE={class:"text-sm sm:text-lg text-white mb-4 sm:mb-6 line-clamp-3 sm:line-clamp-none"},qE={class:"flex flex-col sm:flex-row gap-3 sm:gap-4 mb-6 sm:mb-8"},zE={class:"container mx-auto px-4 py-8"},HE={class:"mb-12"},KE={key:0,class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"},WE={class:"relative"},GE=["onClick"],JE={class:"flex gap-4 mt-4 text-sm"},YE={class:"flex items-center gap-1.5 text-muted-foreground"},XE={class:"flex items-center gap-1.5 text-muted-foreground"},QE={class:"flex items-center gap-1.5 text-muted-foreground"},ZE={key:1,class:"text-center py-12 text-muted-foreground"},eA={class:"mb-12"},tA={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4"},sA={class:"relative w-full aspect-square rounded-full overflow-hidden bg-muted mx-auto"},nA=["src"],rA={class:"font-medium text-foreground"},oA={key:0,class:"col-span-full text-center py-8 text-muted-foreground"},iA={class:"mb-12"},aA={class:"grid grid-cols-1 gap-8"},lA={class:"text-foreground"},cA={class:"text-foreground"},uA={class:"text-foreground"},dA={class:"text-foreground"},fA={key:0},hA={class:"text-foreground"},pA={class:"space-y-4 sm:space-y-6"},mA={class:"grid grid-cols-1 xs:grid-cols-2 gap-3 sm:gap-4 p-3 sm:p-4 bg-muted/30 rounded-lg"},gA={class:"space-y-1"},yA={class:"text-sm sm:text-base text-foreground font-semibold flex items-center gap-1.5 dark:text-white"},vA={class:"space-y-1"},_A={class:"text-sm sm:text-base text-foreground font-semibold dark:text-white"},bA={key:1};function wA(e,t,s,n,r,o){const i=L("PlayIcon"),a=L("Button"),l=L("PlusIcon"),u=L("CardTitle"),c=L("StarIcon"),d=L("ClockIcon"),f=L("EyeIcon"),h=L("CardHeader"),m=L("CardContent"),g=L("Card"),b=L("DialogTitle"),C=L("DialogHeader"),E=L("Label"),P=L("Loader2Icon"),S=L("DialogFooter"),D=L("DialogContent"),W=L("Dialog");return w(),$(_e,null,[r.loading?(w(),$("div",DE,t[1]||(t[1]=[p("div",{class:"animate-spin h-12 w-12 border-4 border-primary border-t-transparent rounded-full"},null,-1)]))):r.error?(w(),$("div",LE," Error: "+V(r.error),1)):(w(),$("div",jE,[p("div",BE,[p("img",{src:r.show.image_url||"/placeholder-show.jpg",class:"w-full h-full object-cover object-top sm:object-center absolute inset-0",alt:"Show banner"},null,8,ME),t[4]||(t[4]=p("div",{class:"absolute inset-0 bg-gradient-to-t from-background via-background/60 to-transparent"},null,-1)),p("div",NE,[p("div",FE,[p("h1",UE,V(r.show.name),1),p("p",VE,V(r.show.description),1),p("div",qE,[v(a,{onClick:o.startRandomEpisode,size:"sm",class:"sm:size-lg gap-2"},{default:k(()=>[v(i,{class:"h-5 w-5 sm:h-6 sm:w-6"}),t[2]||(t[2]=H(" Play Random Episode "))]),_:1},8,["onClick"]),v(a,{onClick:o.createEpisode,variant:"outline",size:"sm",class:"sm:size-lg gap-2"},{default:k(()=>[v(l,{class:"h-5 w-5 sm:h-6 sm:w-6"}),t[3]||(t[3]=H(" Add Episode "))]),_:1},8,["onClick"])])])])]),p("div",zE,[p("section",HE,[t[7]||(t[7]=p("div",{class:"flex justify-between items-center mb-6"},[p("h2",{class:"text-2xl sm:text-3xl font-bold"},"Episodes")],-1)),r.episodes.length?(w(),$("div",KE,[(w(!0),$(_e,null,qe(r.episodes,I=>(w(),K(g,{key:I.id,class:"group relative overflow-hidden hover:shadow-lg transition-all duration-300 hover:-translate-y-1 border-0 bg-muted/10"},{default:k(()=>[v(h,{class:"relative"},{default:k(()=>{var O,A;return[t[5]||(t[5]=p("div",{class:"absolute top-0 left-0 right-0 h-1 bg-primary/50"},null,-1)),v(u,{class:"text-lg mt-3 font-semibold text-foreground"},{default:k(()=>[H(V(I.name),1)]),_:2},1024),p("div",WE,[p("div",{class:ge(["text-sm text-muted-foreground transition-all duration-300",r.expandedDescriptions[I.id]?"line-clamp-none":"line-clamp-3"])},V(I.description||"No description available"),3),o.showReadMore(I.description)?(w(),$("button",{key:0,onClick:bs(F=>o.toggleDescription(I.id),["stop"]),class:"text-primary font-medium hover:underline mt-1 text-sm"},V(r.expandedDescriptions[I.id]?"Show less":"Read more"),9,GE)):Ee("",!0)]),p("div",JE,[p("div",YE,[v(c,{class:"h-4 w-4 text-amber-500"}),p("span",null,V(((O=I.average_ratings)==null?void 0:O.toFixed(1))||"0.0"),1)]),p("div",XE,[v(d,{class:"h-4 w-4 text-emerald-500"}),p("span",null,V(o.calculateDuration(I))+"m",1)]),p("div",QE,[v(f,{class:"h-4 w-4 text-blue-500"}),p("span",null,V(((A=I.views)==null?void 0:A.toLocaleString())||0),1)])])]}),_:2},1024),v(m,{class:"pb-4"},{default:k(()=>[v(a,{onClick:O=>o.startEpisode(I),class:"w-full gap-2 hover:scale-[1.02] transition-transform"},{default:k(()=>[v(i,{class:"h-4 w-4"}),t[6]||(t[6]=H(" Start Episode "))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))])):(w(),$("div",ZE,' No episodes yet. Click "Add Episode" to create one. '))]),p("section",eA,[t[8]||(t[8]=p("h2",{class:"text-2xl sm:text-3xl font-bold mb-6"},"Characters",-1)),p("div",tA,[(w(!0),$(_e,null,qe(o.parsedCharacters,I=>(w(),$("div",{key:I.name,class:"text-center space-y-2"},[p("div",sA,[p("img",{src:I.image_url,alt:"Character Image",class:"object-cover w-full h-full"},null,8,nA)]),p("h3",rA,V(I.name),1)]))),128)),o.parsedCharacters.length===0?(w(),$("div",oA," No characters defined for this show yet. ")):Ee("",!0)])]),p("section",iA,[t[15]||(t[15]=p("h2",{class:"text-2xl sm:text-3xl font-bold mb-6"},"Details",-1)),p("div",aA,[v(g,null,{default:k(()=>[v(h,null,{default:k(()=>[v(u,null,{default:k(()=>t[9]||(t[9]=[H("About the Show")])),_:1})]),_:1}),v(m,{class:"space-y-4"},{default:k(()=>[p("div",null,[t[10]||(t[10]=p("div",{class:"text-sm font-medium text-muted-foreground mb-1"},"Created By",-1)),p("p",lA,V(o.getCreatorName()),1)]),p("div",null,[t[11]||(t[11]=p("div",{class:"text-sm font-medium text-muted-foreground mb-1"},"Total Episodes",-1)),p("p",cA,V(r.episodes.length),1)]),p("div",null,[t[12]||(t[12]=p("div",{class:"text-sm font-medium text-muted-foreground mb-1"},"Total Views",-1)),p("p",uA,V(r.episodes.reduce((I,O)=>I+(O.views||0),0).toLocaleString()),1)]),p("div",null,[t[13]||(t[13]=p("div",{class:"text-sm font-medium text-muted-foreground mb-1"},"Average Rating",-1)),p("p",dA,V((r.episodes.reduce((I,O)=>I+(O.average_ratings||0),0)/(r.episodes.length||1)).toFixed(1)),1)]),r.show.relations?(w(),$("div",fA,[t[14]||(t[14]=p("div",{class:"text-sm font-medium text-muted-foreground mb-1"},"Relations",-1)),p("p",hA,V(r.show.relations),1)])):Ee("",!0)]),_:1})]),_:1})])])])])),v(W,{open:r.playerDialog,"onUpdate:open":o.closePlayerDialog},{default:k(()=>[v(D,{class:"max-w-[95vw] sm:max-w-[650px] mx-2"},{default:k(()=>{var I;return[v(C,null,{default:k(()=>[v(b,{class:"text-xl sm:text-2xl flex items-center gap-2 break-words dark:text-white"},{default:k(()=>{var O;return[v(i,{class:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),p("span",null,V((O=r.selectedEpisode)==null?void 0:O.name),1)]}),_:1})]),_:1}),p("div",pA,[p("div",mA,[p("div",gA,[v(E,{class:"text-xs sm:text-sm font-medium text-muted-foreground dark:text-white"},{default:k(()=>t[16]||(t[16]=[H("Your Name")])),_:1}),p("p",yA,[t[17]||(t[17]=p("span",{class:"inline-block h-2 w-2 rounded-full bg-primary dark:text-white"},null,-1)),H(" "+V(r.user_name),1)])]),p("div",vA,[v(E,{class:"text-xs sm:text-sm font-medium text-muted-foreground dark:text-white"},{default:k(()=>t[18]||(t[18]=[H("Your Role")])),_:1}),p("p",_A,V(((I=r.selectedEpisode)==null?void 0:I.player_role)||"Adventurer"),1)])])]),v(S,{class:"mt-4 flex flex-col sm:flex-row gap-2 sm:gap-4"},{default:k(()=>[v(a,{onClick:o.closePlayerDialog,variant:"outline",class:"w-full sm:w-auto px-4 sm:px-6 dark:bg-white"},{default:k(()=>t[19]||(t[19]=[H(" Cancel ")])),_:1},8,["onClick"]),v(a,{onClick:t[0]||(t[0]=O=>{var A;return o.startPlaying((A=r.selectedEpisode)==null?void 0:A.id)}),disabled:r.isStarting,class:"w-full sm:w-auto px-4 sm:px-8"},{default:k(()=>[r.isStarting?(w(),K(P,{key:0,class:"h-4 w-4 mr-2 animate-spin"})):(w(),$("span",bA,"Begin Adventure"))]),_:1},8,["disabled"])]),_:1})]}),_:1})]),_:1},8,["open","onUpdate:open"])],64)}const xA=ft($E,[["render",wA]]),kA={name:"CreateEpisode",components:{Button:Ot,Input:Pi,Label:Oi,Textarea:wi,Loader2Icon:Yr,PlusIcon:yi,XIcon:vi},setup(){const e=Xr(),t=Ks();return{router:e,toast:t}},data(){return{episodeForm:{name:"",description:"",player_role:"",background:"",plot_objectives:[""]},isSaving:!1,isLoading:!1,API_BASE_URL:"http://localhost:5001",currentUserId:null}},computed:{isEditMode(){return!!this.$route.params.episodeId},showId(){return this.$route.params.showId||this.$route.params.id},episodeId(){return this.$route.params.episodeId},isFormValid(){var e,t,s;return((t=(e=this.episodeForm)==null?void 0:e.name)==null?void 0:t.trim())!==""&&Array.isArray((s=this.episodeForm)==null?void 0:s.plot_objectives)&&this.episodeForm.plot_objectives.length>0&&this.episodeForm.plot_objectives.every(n=>n&&n.trim()!=="")}},async created(){this.isEditMode&&await this.fetchEpisodeData()},methods:{async fetchEpisodeData(){this.isLoading=!0;try{const e=await Be(`api/show/${this.showId}/episodes/${this.episodeId}`),t=e.episode||e;let s=[];try{typeof t.plot_objectives=="string"?s=JSON.parse(t.plot_objectives):Array.isArray(t.plot_objectives)&&(s=t.plot_objectives)}catch(n){console.error("Error parsing plot objectives:",n),this.toast.error("Error parsing episode objectives")}s.length===0&&(s=[""]),this.episodeForm={name:t.name||"",description:t.description||"",player_role:t.player_role||"",background:t.background||"",plot_objectives:s}}catch(e){this.toast.error("Failed to load episode data"),console.error("Fetch episode error:",e)}finally{this.isLoading=!1}},addObjective(){this.episodeForm.plot_objectives.push("")},removeObjective(e){this.episodeForm.plot_objectives.length>1&&this.episodeForm.plot_objectives.splice(e,1)},async saveEpisode(){if(!this.isFormValid)return;this.isSaving=!0;const e=this.isEditMode?`api/show/${this.showId}/episodes/${this.episodeId}`:`api/show/${this.showId}/episodes`;try{await Be(e,{method:this.isEditMode?"PUT":"POST",body:JSON.stringify({...this.episodeForm})}),this.toast.success(`Episode ${this.isEditMode?"updated":"created"} successfully!`),this.router.push(`/show/${this.showId}`)}catch(t){this.toast.error(t.message||"An error occurred while saving")}finally{this.isSaving=!1}},cancel(){this.router.go(-1)}}},CA={class:"container mx-auto px-4 py-8 max-w-4xl"},SA={class:"mb-8"},EA={class:"text-2xl font-bold tracking-tight"},AA={class:"text-muted-foreground text-sm mt-2"},TA={key:0,class:"flex justify-center items-center min-h-[400px]"},PA={class:"space-y-2"},OA={class:"space-y-2"},IA={class:"space-y-2"},RA={class:"space-y-2"},$A={class:"space-y-2"},DA={class:"flex justify-between items-center"},LA={class:"space-y-2"},jA={class:"flex flex-col-reverse sm:flex-row sm:justify-end gap-3 pt-6"};function BA(e,t,s,n,r,o){const i=L("Loader2Icon"),a=L("Label"),l=L("Input"),u=L("Textarea"),c=L("PlusIcon"),d=L("Button"),f=L("XIcon");return w(),$("div",CA,[p("div",SA,[p("h1",EA,V(o.isEditMode?"Edit Episode":"Create New Episode"),1),p("p",AA,V(o.isEditMode?"Update your episode details":"Add a new episode to your show"),1)]),r.isLoading?(w(),$("div",TA,[v(i,{class:"h-8 w-8 animate-spin"})])):(w(),$("form",{key:1,onSubmit:t[4]||(t[4]=bs((...h)=>o.saveEpisode&&o.saveEpisode(...h),["prevent"])),class:"space-y-6"},[p("div",PA,[v(a,{for:"episode-name"},{default:k(()=>t[5]||(t[5]=[H("Episode Name")])),_:1}),v(l,{id:"episode-name",modelValue:r.episodeForm.name,"onUpdate:modelValue":t[0]||(t[0]=h=>r.episodeForm.name=h),placeholder:"e.g. The One With the Reunion",required:"",class:"w-full"},null,8,["modelValue"])]),p("div",OA,[v(a,{for:"episode-description"},{default:k(()=>t[6]||(t[6]=[H("Description")])),_:1}),v(u,{id:"episode-description",modelValue:r.episodeForm.description,"onUpdate:modelValue":t[1]||(t[1]=h=>r.episodeForm.description=h),placeholder:"Brief description of the episode",rows:"3",class:"w-full"},null,8,["modelValue"])]),p("div",IA,[v(a,{for:"episode-player-role"},{default:k(()=>t[7]||(t[7]=[H("Player Role")])),_:1}),v(u,{id:"episode-player-role",modelValue:r.episodeForm.player_role,"onUpdate:modelValue":t[2]||(t[2]=h=>r.episodeForm.player_role=h),placeholder:"Role the player will take in this episode for example friend of joey and chandler etc",rows:"3",class:"w-full"},null,8,["modelValue"])]),p("div",RA,[v(a,{for:"episode-background"},{default:k(()=>t[8]||(t[8]=[H("Scene Background")])),_:1}),v(u,{id:"episode-background",modelValue:r.episodeForm.background,"onUpdate:modelValue":t[3]||(t[3]=h=>r.episodeForm.background=h),placeholder:"The initial scene setup",rows:"4",class:"w-full"},null,8,["modelValue"])]),p("div",$A,[p("div",DA,[v(a,null,{default:k(()=>t[9]||(t[9]=[H("Plot Objectives")])),_:1}),v(d,{onClick:o.addObjective,type:"button",variant:"outline",size:"sm"},{default:k(()=>[v(c,{class:"h-4 w-4 mr-2"}),t[10]||(t[10]=H(" Add Objective "))]),_:1},8,["onClick"])]),(w(!0),$(_e,null,qe(r.episodeForm.plot_objectives,(h,m)=>(w(),$("div",{key:m,class:"p-4 border rounded-lg relative space-y-2 mt-2"},[v(d,{type:"button",variant:"destructive",size:"icon",class:"absolute right-2 top-2",onClick:g=>o.removeObjective(m),disabled:r.episodeForm.plot_objectives.length<=1},{default:k(()=>[v(f,{class:"h-4 w-4"}),t[11]||(t[11]=p("span",{class:"sr-only"},"Remove",-1))]),_:2},1032,["onClick","disabled"]),p("div",LA,[v(a,{for:`objective-${m}`},{default:k(()=>[H("Objective "+V(m+1),1)]),_:2},1032,["for"]),v(u,{id:`objective-${m}`,modelValue:r.episodeForm.plot_objectives[m],"onUpdate:modelValue":g=>r.episodeForm.plot_objectives[m]=g,placeholder:"Describe what needs to happen in this stage",rows:"2",class:"w-full"},null,8,["id","modelValue","onUpdate:modelValue"])])]))),128))]),p("div",jA,[v(d,{onClick:o.cancel,type:"button",variant:"outline",class:"w-full sm:w-auto"},{default:k(()=>t[12]||(t[12]=[H(" Cancel ")])),_:1},8,["onClick"]),v(d,{type:"submit",disabled:r.isSaving||!o.isFormValid,class:"w-full sm:w-auto"},{default:k(()=>[r.isSaving?(w(),K(i,{key:0,class:"h-4 w-4 mr-2 animate-spin"})):Ee("",!0),H(" "+V(r.isSaving?"Saving...":"Save Episode"),1)]),_:1},8,["disabled"])])],32))])}const ad=ft(kA,[["render",BA],["__scopeId","data-v-85cfcf38"]]),MA={__name:"Avatar",props:{class:{type:null,required:!1},size:{type:null,required:!1,default:"sm"},shape:{type:null,required:!1,default:"circle"}},setup(e){const t=e;return(s,n)=>(w(),K(x(ow),{class:ge(x(Ye)(x(UA)({size:e.size,shape:e.shape}),t.class))},{default:k(()=>[re(s.$slots,"default")]),_:3},8,["class"]))}},NA={__name:"AvatarFallback",props:{delayMs:{type:Number,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){const t=e;return(s,n)=>(w(),K(x(iw),ts(Ss(t)),{default:k(()=>[re(s.$slots,"default")]),_:3},16))}},FA={__name:"AvatarImage",props:{src:{type:String,required:!0},referrerPolicy:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){const t=e;return(s,n)=>(w(),K(x(lw),Se(t,{class:"h-full w-full object-cover"}),{default:k(()=>[re(s.$slots,"default")]),_:3},16))}},UA=wl("inline-flex items-center justify-center font-normal text-slate-950 select-none shrink-0 bg-slate-100 overflow-hidden dark:text-slate-50 dark:bg-slate-800",{variants:{size:{sm:"h-10 w-10 text-xs",base:"h-16 w-16 text-2xl",lg:"h-32 w-32 text-5xl"},shape:{circle:"rounded-full",square:"rounded-md"}}}),VA={components:{Button:Ot,Card:Zr,CardContent:eo,CardDescription:Ei,CardHeader:Ai,CardTitle:Ti,Avatar:MA,AvatarFallback:NA,AvatarImage:FA,Loader2Icon:Yr,MoonIcon:Jh,SunIcon:Yh,PencilIcon:f1,Trash2Icon:v1,LogOutIcon:Gh,StarIcon:Hl,EyeIcon:Ka,ClockIcon:Wh,ChevronDownIcon:gi,Book:n1,FileText:o1,Eye:Ka,PiggyBank:h1},data(){return{userDetails:{username:"",email:"",avatar_url:null},BASE_API_URL:"http://localhost:5001",userShows:[],userEpisodes:null,userAchievements:[],loadingShows:!0,loadingEpisodes:!0,error:null,showAllAchievements:!1}},computed:{userInitials(){return!this.userDetails||!this.userDetails.username?"U":this.userDetails.username.split(/[\s_-]/).map(e=>e[0]).join("").toUpperCase()},normalizedEpisodes(){return this.userEpisodes?Array.isArray(this.userEpisodes)?this.userEpisodes:typeof this.userEpisodes=="object"?[this.userEpisodes]:[]:[]},writerStats(){const e={totalShows:this.userShows.length,totalEpisodes:this.normalizedEpisodes.length,averageRating:0,totalViews:0,totalEarnings:"Soon"},t=this.normalizedEpisodes.filter(s=>s.average_ratings>0);if(t.length>0){const s=t.reduce((n,r)=>n+r.average_ratings,0);e.averageRating=(s/t.length).toFixed(1)}return this.normalizedEpisodes.length>0&&(e.totalViews=this.normalizedEpisodes.reduce((s,n)=>s+(n.views||0),0)),e},visibleAchievements(){return this.showAllAchievements?this.userAchievements:this.userAchievements.slice(0,3)},hasMoreAchievements(){return this.userAchievements.length>3}},mounted(){this.getUserDetails(),this.initializeTheme()},methods:{initializeTheme(){const e=localStorage.getItem("theme")||"light";document.documentElement.classList.toggle("dark",e==="dark")},toggleDarkMode(){const e=document.documentElement.classList.toggle("dark");localStorage.setItem("theme",e?"dark":"light")},async logout(){try{localStorage.removeItem("sb-wpwichwnfgbpggcqujld-auth-token"),await St.auth.signOut(),window.location.href="/login"}catch(e){console.error("Error during logout:",e)}},formatDate(e){return e?new Date(e).toLocaleDateString():""},getCharacterCount(e){if(!e.characters)return 0;try{if(typeof e.characters=="object"&&e.characters!==null)return Array.isArray(e.characters)?e.characters.length:1;if(typeof e.characters=="string"){const t=JSON.parse(e.characters);return Array.isArray(t)?t.length:1}return 0}catch(t){return console.error("Error processing characters data:",t),0}},getShowNameForEpisode(e){if(!e||!this.userShows)return"";const t=this.userShows.find(s=>s.id===e);return t?t.name:""},async deleteEpisode(e,t){if(confirm("Are you sure you want to delete this episode?"))try{await Be(`api/show/${e}/episodes/${t}`,{method:"DELETE"}),Array.isArray(this.userEpisodes)?this.userEpisodes=this.userEpisodes.filter(s=>s.id!==t):this.userEpisodes.id===t&&(this.userEpisodes=null)}catch(s){console.error("Failed to delete episode:",s)}},editUser(){this.$router.push("/edit/profile")},calculateDuration(e){try{return(typeof e.plot_objectives=="string"?JSON.parse(e.plot_objectives||"[]"):e.plot_objectives||[]).length*2}catch(t){return console.error("Error parsing plot objectives:",t),0}},editShow(e){this.$router.push("/edit/show/"+e)},editEpisode(e,t){this.$router.push("/edit/episode/"+e+"/"+t)},async getUserDetails(){try{const e=await Be("api/user");console.log("API Response:",e),this.userDetails=e.user||{},this.userShows=Array.isArray(e.user_shows)?e.user_shows:[],this.userAchievements=Array.isArray(e.user_achievements)?e.user_achievements:[],console.log("User shows:",this.userShows),e.user_episodes?!Array.isArray(e.user_episodes)&&typeof e.user_episodes=="object"?this.userEpisodes=[e.user_episodes]:Array.isArray(e.user_episodes)?this.userEpisodes=e.user_episodes:this.userEpisodes=[]:this.userEpisodes=[],this.loadingShows=!1,this.loadingEpisodes=!1,console.log("User details processed:",{user:this.userDetails,shows:this.userShows,episodes:this.userEpisodes})}catch(e){console.error("Failed to fetch user details:",e),this.error="Failed to load user details",this.loadingShows=!1,this.loadingEpisodes=!1}},getAchievementEmoji(e){const t=["","","","","",""];return t[Math.min(e,t.length-1)]},getShowName(e){const t=this.userShows.find(s=>s.id===e);return t?t.name:null}}},qA={class:"py-8 container mx-auto px-4"},zA={class:"flex items-center gap-4 w-full"},HA={class:"min-w-0"},KA={class:"flex flex-wrap items-center justify-between pt-4 gap-4"},WA={class:"flex flex-col md:flex-row md:items-center gap-2 w-full md:w-auto"},GA={class:"grid grid-cols-2 md:grid-cols-5 gap-4 pt-4"},JA={class:"flex flex-col p-4 bg-muted/50 rounded-lg"},YA={class:"flex items-center gap-2"},XA={class:"text-2xl font-bold mt-2"},QA={class:"flex flex-col p-4 bg-muted/50 rounded-lg"},ZA={class:"flex items-center gap-2"},eT={class:"text-2xl font-bold mt-2"},tT={class:"flex flex-col p-4 bg-muted/50 rounded-lg"},sT={class:"flex items-center gap-2"},nT={class:"text-2xl font-bold mt-2"},rT={class:"flex flex-col p-4 bg-muted/50 rounded-lg"},oT={class:"flex items-center gap-2"},iT={class:"text-2xl font-bold mt-2"},aT={class:"flex flex-col p-4 bg-muted/50 rounded-lg"},lT={class:"flex items-center gap-2"},cT={class:"text-2xl font-bold mt-2 text-muted-foreground"},uT={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 pt-4"},dT={class:"flex justify-between items-start mb-2"},fT={class:"flex items-center gap-2"},hT={class:"text-2xl"},pT={class:"flex items-center gap-1 text-amber-500"},mT={class:"mb-8"},gT={key:0,class:"flex justify-center py-8"},yT={key:1,class:"text-center py-8"},vT={key:2,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},_T={class:"aspect-video bg-muted relative"},bT=["src","alt"],wT={class:"flex justify-between items-start"},xT={class:"flex justify-between text-sm text-muted-foreground"},kT={key:0,class:"flex justify-center py-8"},CT={key:1,class:"text-center py-8"},ST={key:2,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},ET={class:"flex justify-between items-start"},AT={class:"flex gap-1"},TT={class:"flex gap-4 mt-4 text-sm"},PT={class:"flex items-center gap-1.5 text-muted-foreground"},OT={class:"flex items-center gap-1.5 text-muted-foreground"},IT={class:"flex items-center gap-1.5 text-muted-foreground"},RT={class:"flex justify-between text-sm text-muted-foreground"};function $T(e,t,s,n,r,o){const i=L("AvatarImage"),a=L("AvatarFallback"),l=L("Avatar"),u=L("CardTitle"),c=L("CardDescription"),d=L("PencilIcon"),f=L("Button"),h=L("CardHeader"),m=L("Card"),g=L("SunIcon"),b=L("MoonIcon"),C=L("LogOutIcon"),E=L("Book"),P=L("FileText"),S=L("StarIcon"),D=L("Eye"),W=L("PiggyBank"),I=L("ChevronDownIcon"),O=L("Loader2Icon"),A=L("CardContent"),F=L("ClockIcon"),q=L("EyeIcon");return w(),$("div",qA,[v(m,{class:"mb-8"},{default:k(()=>[v(h,{class:"flex flex-col md:flex-row md:items-start items-start justify-between gap-4"},{default:k(()=>[p("div",zA,[v(l,{class:"h-16 w-16"},{default:k(()=>[r.userDetails.avatar_url?(w(),K(i,{key:0,src:r.userDetails.avatar_url},null,8,["src"])):Ee("",!0),v(a,null,{default:k(()=>[H(V(o.userInitials),1)]),_:1})]),_:1}),p("div",HA,[v(u,{class:"text-2xl truncate"},{default:k(()=>[H(V(r.userDetails.username||"User"),1)]),_:1}),r.userDetails.email?(w(),K(c,{key:0,class:"truncate"},{default:k(()=>[H(V(r.userDetails.email),1)]),_:1})):Ee("",!0)])]),v(f,{onClick:o.editUser,variant:"outline",class:"w-full md:w-auto mt-4 md:mt-0 self-end md:self-auto"},{default:k(()=>[v(d,{class:"h-4 w-4 mr-2"}),t[1]||(t[1]=H(" Edit Profile "))]),_:1},8,["onClick"])]),_:1})]),_:1}),v(m,{class:"mb-8"},{default:k(()=>[v(h,null,{default:k(()=>[v(u,{class:"text-xl"},{default:k(()=>t[2]||(t[2]=[H("Settings")])),_:1}),p("div",KA,[p("div",null,[v(u,{class:"text-sm"},{default:k(()=>t[3]||(t[3]=[H("Theme")])),_:1}),v(c,null,{default:k(()=>t[4]||(t[4]=[H("Toggle between dark and light mode")])),_:1})]),p("div",WA,[v(f,{onClick:o.toggleDarkMode,variant:"outline",class:"w-full md:w-auto"},{default:k(()=>[v(g,{class:"h-4 w-4 mr-2 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),v(b,{class:"h-4 w-4 mr-2 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),t[5]||(t[5]=H(" Toggle Theme "))]),_:1},8,["onClick"]),v(f,{onClick:o.logout,variant:"destructive",class:"w-full md:hidden"},{default:k(()=>[v(C,{class:"h-4 w-4 mr-2"}),t[6]||(t[6]=H(" Logout "))]),_:1},8,["onClick"])])])]),_:1})]),_:1}),r.userShows.length>0||o.normalizedEpisodes.length>0?(w(),K(m,{key:0,class:"mb-8"},{default:k(()=>[v(h,null,{default:k(()=>[v(u,{class:"text-xl"},{default:k(()=>t[7]||(t[7]=[H("Writer Statistics")])),_:1}),p("div",GA,[p("div",JA,[p("div",YA,[v(E,{class:"h-5 w-5 text-primary"}),t[8]||(t[8]=p("span",{class:"text-sm font-medium"},"Shows",-1))]),p("span",XA,V(o.writerStats.totalShows),1)]),p("div",QA,[p("div",ZA,[v(P,{class:"h-5 w-5 text-primary"}),t[9]||(t[9]=p("span",{class:"text-sm font-medium"},"Episodes",-1))]),p("span",eT,V(o.writerStats.totalEpisodes),1)]),p("div",tT,[p("div",sT,[v(S,{class:"h-5 w-5 text-primary"}),t[10]||(t[10]=p("span",{class:"text-sm font-medium"},"Avg Rating",-1))]),p("span",nT,V(o.writerStats.averageRating),1)]),p("div",rT,[p("div",oT,[v(D,{class:"h-5 w-5 text-primary"}),t[11]||(t[11]=p("span",{class:"text-sm font-medium"},"Total Views",-1))]),p("span",iT,V(o.writerStats.totalViews.toLocaleString()),1)]),p("div",aT,[p("div",lT,[v(W,{class:"h-5 w-5 text-primary"}),t[12]||(t[12]=p("span",{class:"text-sm font-medium"},"Total Earnings",-1))]),p("span",cT,V(o.writerStats.totalEarnings),1)])])]),_:1})]),_:1})):Ee("",!0),r.userAchievements.length>0?(w(),K(m,{key:1,class:"mb-8"},{default:k(()=>[v(h,null,{default:k(()=>[v(u,{class:"text-xl"},{default:k(()=>t[13]||(t[13]=[H("Achievements")])),_:1}),p("div",uT,[(w(!0),$(_e,null,qe(o.visibleAchievements,(j,ie)=>(w(),$("div",{key:j.id,class:"p-4 bg-muted/50 rounded-lg"},[p("div",dT,[p("div",fT,[p("span",hT,V(o.getAchievementEmoji(j.score)),1),v(u,{class:"text-base"},{default:k(()=>[H(V(j.title),1)]),_:2},1024)]),p("div",pT,[(w(),$(_e,null,qe(5,de=>p("span",{key:de,class:ge(de<=j.score?"text-amber-500":"text-muted-foreground")},"  ",2)),64))])]),v(c,{class:"text-sm"},{default:k(()=>[H(V(o.getShowName(j.show_id)||"General Achievement"),1)]),_:2},1024)]))),128))]),o.hasMoreAchievements?(w(),K(f,{key:0,onClick:t[0]||(t[0]=j=>r.showAllAchievements=!r.showAllAchievements),variant:"ghost",class:"mt-4 mx-auto"},{default:k(()=>[H(V(r.showAllAchievements?"Show less":"Show more")+" ",1),v(I,{class:ge(["h-4 w-4 ml-2 transition-transform",{"rotate-180":r.showAllAchievements}])},null,8,["class"])]),_:1})):Ee("",!0)]),_:1})]),_:1})):Ee("",!0),p("section",mT,[t[16]||(t[16]=p("h2",{class:"text-xl font-semibold mb-6"},"Your Shows",-1)),r.loadingShows?(w(),$("div",gT,[v(O,{class:"h-8 w-8 animate-spin"})])):!r.userShows||r.userShows.length===0?(w(),$("div",yT,t[14]||(t[14]=[p("p",{class:"text-muted-foreground"},"You haven't created any shows yet.",-1)]))):(w(),$("div",vT,[(w(!0),$(_e,null,qe(r.userShows,j=>(w(),K(m,{key:j.id,class:"relative group"},{default:k(()=>[p("div",_T,[p("img",{src:j.image_url||"/placeholder-show.jpg",class:"w-full h-full object-cover",alt:`${j.name} thumbnail`,loading:"lazy"},null,8,bT),t[15]||(t[15]=p("div",{class:"absolute inset-0 bg-gradient-to-t from-background/80 to-transparent"},null,-1))]),v(h,null,{default:k(()=>[p("div",wT,[v(u,{class:"line-clamp-1"},{default:k(()=>[H(V(j.name),1)]),_:2},1024),v(f,{onClick:ie=>o.editShow(j.id),variant:"ghost",size:"icon"},{default:k(()=>[v(d,{class:"h-4 w-4"})]),_:2},1032,["onClick"])]),v(c,{class:"line-clamp-2"},{default:k(()=>[H(V(j.description),1)]),_:2},1024)]),_:2},1024),v(A,null,{default:k(()=>[p("div",xT,[p("span",null,V(o.getCharacterCount(j))+" characters",1),p("span",null,V(o.formatDate(j.created_at)),1)])]),_:2},1024)]),_:2},1024))),128))]))]),p("section",null,[t[18]||(t[18]=p("h2",{class:"text-xl font-semibold mb-6"},"Your Episodes",-1)),r.loadingEpisodes?(w(),$("div",kT,[v(O,{class:"h-8 w-8 animate-spin"})])):!r.userEpisodes||r.userEpisodes.length===0?(w(),$("div",CT,t[17]||(t[17]=[p("p",{class:"text-muted-foreground"},"You haven't created any episodes yet.",-1)]))):(w(),$("div",ST,[(w(!0),$(_e,null,qe(o.normalizedEpisodes,j=>(w(),K(m,{key:j.id,class:"relative group"},{default:k(()=>[v(h,null,{default:k(()=>{var ie,de;return[p("div",ET,[v(u,{class:"line-clamp-1"},{default:k(()=>[H(V(j.name),1)]),_:2},1024),p("div",AT,[v(f,{onClick:ye=>o.editEpisode(j.show_id,j.id),variant:"ghost",size:"icon"},{default:k(()=>[v(d,{class:"h-4 w-4"})]),_:2},1032,["onClick"])])]),v(c,{class:"line-clamp-2"},{default:k(()=>[H(V(j.description),1)]),_:2},1024),p("div",TT,[p("div",PT,[v(S,{class:"h-4 w-4 text-amber-500"}),p("span",null,V(((ie=j.average_ratings)==null?void 0:ie.toFixed(1))||"0.0"),1)]),p("div",OT,[v(F,{class:"h-4 w-4 text-emerald-500"}),p("span",null,V(o.calculateDuration(j))+"m",1)]),p("div",IT,[v(q,{class:"h-4 w-4 text-blue-500"}),p("span",null,V(((de=j.views)==null?void 0:de.toLocaleString())||0),1)])])]}),_:2},1024),v(A,null,{default:k(()=>[p("div",RT,[p("span",null,V(o.getShowNameForEpisode(j.show_id)),1),p("span",null,V(o.formatDate(j.created_at)),1)])]),_:2},1024)]),_:2},1024))),128))]))])])}const DT=ft(VA,[["render",$T]]),LT={name:"EditProfile",components:{Button:Ot,Input:Pi,Label:Oi,UserIcon:Qh,Loader2Icon:Yr,UploadIcon:Xh,XIcon:vi},name:"EditProfile",setup(){const e=Xr(),t=Ks(),s=ee(null),n=ee(null),r=ee(null),o=ee(!1),i=ee(!0),a=is({username:"",email:"",avatar_url:null}),l=ne(()=>{var g;return((g=a.username)==null?void 0:g.trim())!==""});return(async()=>{try{const g=await Be("api/user"),b=g.user||g;a.username=b.username||"",a.email=b.email||"",a.avatar_url=b.avatar_url||null}catch{t.error("Failed to load user data")}finally{i.value=!1}})(),{userForm:a,fileInput:s,imagePreview:n,isSaving:o,isLoading:i,isFormValid:l,triggerFileInput:()=>{s.value.click()},handleImageChange:g=>{const b=g.target.files[0];if(b){if(b.size>2*1024*1024){t.error("Image size should be less than 2MB");return}r.value=b,n.value=URL.createObjectURL(b)}},clearImage:()=>{n.value=null,r.value=null,s.value&&(s.value.value=""),a.avatar_url=null},saveProfile:async()=>{if(l.value){o.value=!0;try{const g=new FormData;r.value&&g.append("avatar",r.value),g.append("data",JSON.stringify({username:a.username,email:a.email})),await Be("api/user",{method:"PUT",body:g,headers:{}}),t.success("Profile updated successfully!"),e.push("/profile")}catch(g){t.error(g.message||"An error occurred while saving")}finally{o.value=!1}}},cancel:()=>{e.go(-1)}}}},jT={class:"container mx-auto px-4 py-8 max-w-2xl"},BT={key:0,class:"flex justify-center items-center min-h-[400px]"},MT={class:"space-y-2"},NT={class:"grid grid-cols-1 gap-4"},FT={class:"flex items-center justify-center"},UT={key:0,class:"relative w-32 h-32 rounded-full overflow-hidden border-2 border-border"},VT=["src"],qT={key:1,class:"w-32 h-32 border-2 border-dashed rounded-full flex flex-col items-center justify-center"},zT={class:"space-y-2"},HT={class:"space-y-2"},KT={class:"flex flex-col-reverse sm:flex-row sm:justify-end gap-3 pt-6"};function WT(e,t,s,n,r,o){const i=L("Loader2Icon"),a=L("Label"),l=L("XIcon"),u=L("Button"),c=L("UserIcon"),d=L("UploadIcon"),f=L("Input");return w(),$("div",jT,[t[9]||(t[9]=p("div",{class:"mb-8"},[p("h1",{class:"text-2xl font-bold tracking-tight"},"Edit Profile"),p("p",{class:"text-muted-foreground text-sm mt-2"},"Update your profile information")],-1)),n.isLoading?(w(),$("div",BT,[v(i,{class:"h-8 w-8 animate-spin"})])):(w(),$("form",{key:1,onSubmit:t[3]||(t[3]=bs((...h)=>n.saveProfile&&n.saveProfile(...h),["prevent"])),class:"space-y-6"},[p("div",MT,[v(a,null,{default:k(()=>t[4]||(t[4]=[H("Profile Picture")])),_:1}),p("div",NT,[p("div",FT,[n.imagePreview||n.userForm.avatar_url?(w(),$("div",UT,[p("img",{src:n.imagePreview||n.userForm.avatar_url||"/placeholder-avatar.png",alt:"Profile",class:"object-cover w-full h-full"},null,8,VT),v(u,{type:"button",variant:"destructive",size:"icon",class:"absolute top-0 right-0 h-8 w-8 rounded-full",onClick:n.clearImage},{default:k(()=>[v(l,{class:"h-4 w-4"})]),_:1},8,["onClick"])])):(w(),$("div",qT,[p("input",{ref:"fileInput",type:"file",accept:"image/*",class:"hidden",onChange:t[0]||(t[0]=(...h)=>n.handleImageChange&&n.handleImageChange(...h))},null,544),v(c,{class:"h-8 w-8 text-muted-foreground mb-2"}),v(u,{type:"button",variant:"outline",size:"sm",onClick:n.triggerFileInput},{default:k(()=>[v(d,{class:"h-4 w-4 mr-2"}),t[5]||(t[5]=H(" Upload Photo "))]),_:1},8,["onClick"])]))])])]),p("div",zT,[v(a,{for:"username"},{default:k(()=>t[6]||(t[6]=[H("Username")])),_:1}),v(f,{id:"username",modelValue:n.userForm.username,"onUpdate:modelValue":t[1]||(t[1]=h=>n.userForm.username=h),placeholder:"Your username",required:"",class:"w-full"},null,8,["modelValue"])]),p("div",HT,[v(a,{for:"email"},{default:k(()=>t[7]||(t[7]=[H("Email")])),_:1}),v(f,{id:"email",modelValue:n.userForm.email,"onUpdate:modelValue":t[2]||(t[2]=h=>n.userForm.email=h),type:"email",placeholder:"Your email address",class:"w-full"},null,8,["modelValue"])]),p("div",KT,[v(u,{onClick:n.cancel,type:"button",variant:"outline",class:"w-full sm:w-auto"},{default:k(()=>t[8]||(t[8]=[H(" Cancel ")])),_:1},8,["onClick"]),v(u,{type:"submit",disabled:n.isSaving||!n.isFormValid,class:"w-full sm:w-auto"},{default:k(()=>[n.isSaving?(w(),K(i,{key:0,class:"h-4 w-4 mr-2 animate-spin"})):Ee("",!0),H(" "+V(n.isSaving?"Saving...":"Save Changes"),1)]),_:1},8,["disabled"])])],32))])}const GT=ft(LT,[["render",WT],["__scopeId","data-v-446063c6"]]),JT={name:"EndPage",components:{Button:Ot,ArrowLeftIcon:Hh,StarIcon:Hl,LoaderIcon:l1},data(){return{showId:null,episodeId:"",chatId:this.$route.params.chat_id,showName:"Loading...",episodeName:"Loading...",messages:[],player_name:"Player",playerImageUrl:"",showImageUrl:"",rating:0,feedback:"",isSubmitting:!1,ratingSubmitted:!1,toast:Ks(),characterColors:{},characterImages:{},colorPalette:["text-red-600 dark:text-red-400","text-yellow-600 dark:text-yellow-400","text-blue-600 dark:text-blue-400","text-indigo-600 dark:text-indigo-400","text-purple-600 dark:text-purple-400","text-pink-600 dark:text-pink-400","text-orange-600 dark:text-orange-400","text-teal-600 dark:text-teal-400"],Achievements:[]}},async mounted(){await this.fetchChatDetails(),this.scrollToBottom(),await this.getAchievements()},methods:{async fetchChatDetails(){var e,t,s;try{const{data:n}=await St.auth.getSession(),r=(e=n.session)==null?void 0:e.access_token,o=await Be(`api/chats/${this.chatId}`,{headers:{Authorization:`Bearer ${r}`}}),i=o.chat;if(this.player_name=i.player_name,this.playerImageUrl=i.player_image_url||"",this.episodeName=(t=i.episodes)==null?void 0:t.name,this.episodeId=i.episode_id,this.showId=(s=i.episodes)==null?void 0:s.show_id,this.messages=(o.messages||[]).sort((a,l)=>a.sequence-l.sequence),this.showId){const l=(await Be(`api/shows/${this.showId}`,{headers:{Authorization:`Bearer ${r}`}})).show;this.showName=l.name,this.showImageUrl=l.image_url||"";let u=[];try{u=typeof l.characters=="string"?JSON.parse(l.characters):l.characters||[]}catch{u=[]}u.forEach((c,d)=>{const f=c.name.trim().toLowerCase();this.characterColors[f]=this.colorPalette[d%this.colorPalette.length],this.characterImages[f]=c.image_url})}await this.fetchExistingRating()}catch(n){console.error(n),this.toast.error("Failed to load history.")}},async fetchExistingRating(){try{const e=await Be(`api/ratings/${this.episodeId}`);e.rating&&(this.rating=Number(e.rating.rating),this.feedback=e.rating.feedback||"",this.ratingSubmitted=!0)}catch{}},setRating(e){this.ratingSubmitted||(this.rating=e)},async submitRating(){if(this.rating){this.isSubmitting=!0;try{await Be(`api/ratings/${this.episodeId}`,{method:"POST",body:JSON.stringify({show_id:this.showId,episode_id:this.episodeId,rating:this.rating,feedback:this.feedback})}),this.ratingSubmitted=!0,this.toast.success("Rating submitted!")}catch{this.toast.error("Submit failed.")}finally{this.isSubmitting=!1}}},async getAchievements(){try{const e=await Be(`api/achievements/${this.chatId}`);e.achievements&&(this.Achievements=e.achievements)}catch{this.toast.error("Failed to load achievements.")}},getAchievementEmoji(e){return{0:"",1:"",2:"",3:"",4:"",5:""}[e]||""},scrollToBottom(){this.$nextTick(()=>{const e=this.$refs.messagesContainer;e&&(e.scrollTop=e.scrollHeight)})},goBack(){this.$router.push("/shows")},getCharacterImageUrl(e){return this.characterImages[e.trim().toLowerCase()]||""},getRoleColor(e){const t=e.trim().toLowerCase();return this.characterColors[t]||{narration:"text-purple-600 dark:text-purple-400",player:"text-blue-600 dark:text-blue-400",system:"text-gray-600 dark:text-gray-400"}[t]||"text-gray-600 dark:text-gray-400"},getMessageStyle(e,t){const s={narration:"bg-purple-100 dark:bg-purple-900/30 italic",player_input:"bg-blue-100 dark:bg-blue-900/30",system:"bg-gray-100 dark:bg-gray-800/50 text-sm"};if(e==="actor_dialogue"){const n=t.trim().toLowerCase();if(this.characterColors[n]){const r=this.characterColors[n].split(" ")[0].replace("text","bg");return`${r}/20 dark:${r}/30`}}return s[e]||"bg-gray-100 dark:bg-gray-800/30"}}},YT={class:"flex flex-col min-h-screen overflow-y-auto"},XT={class:"bg-background border-b p-2 sm:p-4"},QT={class:"container mx-auto flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2 sm:gap-0"},ZT={class:"flex items-center gap-2 sm:gap-4"},e2=["src"],t2={class:"min-w-0"},s2={class:"text-lg sm:text-xl font-bold truncate"},n2={class:"text-xs sm:text-sm text-muted-foreground truncate"},r2={class:"container mx-auto flex-grow flex flex-col p-4 space-y-4"},o2={class:"h-[50vh] overflow-y-auto border rounded-lg bg-background dark:bg-gray-900"},i2={ref:"messagesContainer",class:"p-4 space-y-4"},a2=["src"],l2={key:0,class:"border-t pt-4"},c2={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},u2={class:"flex items-center gap-4"},d2={class:"text-2xl"},f2={class:"flex-1"},h2={class:"font-medium"},p2={class:"flex items-center gap-1 mt-1"},m2={class:"border-t pt-4"},g2={class:"max-w-md mx-auto text-center"},y2={class:"flex justify-center gap-2 mb-4"},v2=["onClick","disabled"],_2={class:"mt-4 text-left"},b2=["disabled"],w2={key:0,class:"text-sm text-green-600 dark:text-green-400 mt-2"};function x2(e,t,s,n,r,o){const i=L("ArrowLeftIcon"),a=L("Button"),l=L("StarIcon"),u=L("LoaderIcon");return w(),$("div",YT,[p("div",XT,[p("div",QT,[p("div",ZT,[r.showImageUrl?(w(),$("img",{key:0,src:r.showImageUrl,alt:"Show Thumbnail",class:"h-8 w-8 sm:h-10 sm:w-10 rounded flex-shrink-0"},null,8,e2)):Ee("",!0),p("div",t2,[p("h1",s2,V(r.showName),1),p("p",n2,V(r.episodeName),1)])]),v(a,{variant:"outline",onClick:o.goBack,size:"sm",class:"self-end sm:self-auto -mt-1 sm:mt-0"},{default:k(()=>[v(i,{class:"h-4 w-4 sm:mr-2"}),t[1]||(t[1]=p("span",{class:"sr-only sm:not-sr-only"},"Back to Shows",-1))]),_:1},8,["onClick"])])]),t[6]||(t[6]=p("div",{class:"bg-green-100 dark:bg-green-900/30 border-b p-4"},[p("div",{class:"container mx-auto text-center"},[p("h2",{class:"text-lg font-semibold text-green-800 dark:text-green-200"},"  Story Completed! "),p("p",{class:"text-sm text-green-700 dark:text-green-300"}," You've reached the end of this episode. Rate your experience below! ")])],-1)),p("div",r2,[p("div",o2,[p("div",i2,[(w(!0),$(_e,null,qe(r.messages,(c,d)=>(w(),$("div",{key:d,class:ge(["flex items-start gap-3",{"justify-start flex-row-reverse":c.role==="Player"}])},[c.role==="Player"&&r.playerImageUrl||c.role!=="Player"&&o.getCharacterImageUrl(c.role)?(w(),$("img",{key:0,src:c.role==="Player"?r.playerImageUrl:o.getCharacterImageUrl(c.role),alt:"Avatar",class:"h-14 w-14 rounded-full flex-shrink-0"},null,8,a2)):Ee("",!0),p("div",{class:ge(["flex-1 max-w-[90%]",{"text-right ml-auto":c.role==="Player"}])},[p("div",{class:ge(["flex items-center",{"justify-end":c.role==="Player"}])},[p("span",{class:ge(["font-semibold text-sm",o.getRoleColor(c.role)])},V(c.role==="Player"?r.player_name:c.role),3)],2),p("div",{class:ge(["p-2 rounded-lg whitespace-pre-wrap break-words",o.getMessageStyle(c.type,c.role)])},V(c.content),3)],2)],2))),128))],512)]),r.Achievements.length>0?(w(),$("div",l2,[t[2]||(t[2]=p("h3",{class:"text-lg font-semibold mb-4 text-center"},"Your Achievements ",-1)),p("div",c2,[(w(!0),$(_e,null,qe(r.Achievements,(c,d)=>(w(),$("div",{key:d,class:"bg-gray-100 dark:bg-gray-800 p-4 rounded-lg"},[p("div",u2,[p("span",d2,V(o.getAchievementEmoji(c.score)),1),p("div",f2,[p("div",h2,V(c.title),1),p("div",p2,[(w(),$(_e,null,qe(5,f=>p("span",{key:f,class:ge(["text-lg",f<=c.score?"text-yellow-400":"text-gray-300 dark:text-gray-600"])},"  ",2)),64))])])])]))),128))])])):Ee("",!0),p("div",m2,[p("div",g2,[t[5]||(t[5]=p("h3",{class:"text-lg font-semibold mb-4"},"Rate This Experience",-1)),p("div",y2,[(w(),$(_e,null,qe(5,c=>p("button",{key:c,onClick:d=>!r.ratingSubmitted&&o.setRating(c),disabled:r.ratingSubmitted,class:ge(["p-2 transition-all duration-150",[r.rating>=c?"text-yellow-400 dark:text-yellow-300 scale-110":"text-gray-300 dark:text-gray-600",r.ratingSubmitted?"":"hover:text-yellow-300 hover:scale-125"]])},[v(l,{class:"w-8 h-8 fill-current"})],10,v2)),64))]),p("div",_2,[t[3]||(t[3]=p("label",{class:"block text-sm font-medium text-foreground mb-2"}," Additional Feedback (optional) ",-1)),oi(p("textarea",{"onUpdate:modelValue":t[0]||(t[0]=c=>r.feedback=c),disabled:r.ratingSubmitted,rows:"3",class:"w-full p-2 border rounded-md bg-background transition-colors focus:ring-2 focus:ring-primary focus:border-transparent disabled:opacity-50 dark:bg-gray-800",placeholder:"What did you think of this episode? Any Suggestions to improve the overall experience?"},null,8,b2),[[bl,r.feedback]])]),v(a,{onClick:o.submitRating,disabled:!r.rating||r.ratingSubmitted||r.isSubmitting,class:"w-full max-w-xs mx-auto mt-4"},{default:k(()=>[r.isSubmitting?(w(),$(_e,{key:0},[v(u,{class:"h-4 w-4 mr-2 animate-spin"}),t[4]||(t[4]=H(" Submitting... "))],64)):(w(),$(_e,{key:1},[H(V(r.ratingSubmitted?"Rating Submitted":"Submit Rating"),1)],64))]),_:1},8,["onClick","disabled"]),r.ratingSubmitted?(w(),$("p",w2," Thank you for your rating! ")):Ee("",!0)])])])])}const k2=ft(JT,[["render",x2],["__scopeId","data-v-d22b07fd"]]),C2={name:"ChatHistoryPage",components:{Button:Ot,Badge:Hp,Card:Zr,CardHeader:Ai,CardTitle:Ti,CardDescription:Ei,CardContent:eo,ChevronRightIcon:Kh,PlayIcon:zl,MessageSquareIcon:d1,MessageCircleIcon:u1,ChevronDownIcon:gi},data(){return{loading:!0,error:null,chatHistory:[],API_BASE_URL:"http://localhost:5001",showCache:new Map,episodeCache:new Map}},methods:{async fetchChatHistory(){const e=Ks();try{this.loading=!0,this.error=null;const t=await Be("api/chats");if(!t||!t.chats)throw new Error("Invalid response format");if(t.chats.length===0){this.chatHistory=[],this.loading=!1;return}const s=this.groupChatsByShowAndEpisode(t.chats);await this.batchFetchShowsAndEpisodes(s),this.processChatHistory(t.chats)}catch(t){console.error("Error fetching chat history:",t),this.error=`Failed to load chat history: ${t.message}`,e.error(`Failed to load chat history: ${t.message}`)}finally{this.loading=!1}},groupChatsByShowAndEpisode(e){const t=new Map;return e.forEach(s=>{s.show_id&&(t.has(s.show_id)||t.set(s.show_id,new Set),s.episode_id&&t.get(s.show_id).add(s.episode_id))}),t},async batchFetchShowsAndEpisodes(e){const t=[],s=[];e.forEach((n,r)=>{t.push(Be(`api/shows/${r}`).then(o=>{this.showCache.set(r,o.show||o)}).catch(o=>{console.error(`Error fetching show ${r}:`,o),this.showCache.set(r,{name:"Unknown Show"})})),n.forEach(o=>{s.push(Be(`api/show/${r}/episodes/${o}`).then(i=>{this.episodeCache.set(`${r}-${o}`,i)}).catch(i=>{console.error(`Error fetching episode ${o} for show ${r}:`,i),this.episodeCache.set(`${r}-${o}`,{episode:{name:"Unknown Episode",plot_objectives:"[]"}})}))})}),await Promise.all([Promise.all(t),Promise.all(s)])},processChatHistory(e){const t=new Map;for(const s of e){if(!s.show_id||!s.episode_id)continue;const n=s.show_id,r=s.episode_id,o=`${n}-${r}`;if(!this.episodeCache.has(o)||!this.showCache.has(n))continue;const i=this.episodeCache.get(o);if(!i||!i.episode)continue;const a=this.showCache.get(n);if(!a)continue;let l=5;try{if(i.episode.plot_objectives){const c=JSON.parse(i.episode.plot_objectives);Array.isArray(c)&&(l=c.length||5)}}catch(c){console.warn("Error parsing objectives:",c)}const u={id:s.id,episode_id:r,episode_name:i.episode.name||"Unknown Episode",current_objective_index:typeof s.current_objective_index=="number"?s.current_objective_index:0,total_objectives:l,player_name:s.player_name||"Player",player_description:s.player_description||"",chat_summary:s.chat_summary||"",completed:!!s.story_completed,last_activity:s.updated_at||s.created_at||new Date().toISOString(),expandRecap:!1};t.has(n)?t.get(n).chats.push(u):t.set(n,{show_id:n,show_name:a.name||"Unknown Show",show_image:a.image_url||null,chats:[u]})}this.sortAndSetChatHistory(t)},sortAndSetChatHistory(e){const t=Array.from(e.values());t.forEach(s=>{s.chats.sort((n,r)=>new Date(r.last_activity)-new Date(n.last_activity))}),t.sort((s,n)=>{var i,a;const r=((i=s.chats[0])==null?void 0:i.last_activity)||new Date(0),o=((a=n.chats[0])==null?void 0:a.last_activity)||new Date(0);return new Date(o)-new Date(r)}),this.chatHistory=t},toggleRecap(e){e.expandRecap=!e.expandRecap},continueChat(e){for(const t of this.chatHistory)if(t.chats.find(n=>n.id===e)){this.$router.push(`/show/${t.show_id}/chat/${e}`);return}this.$router.push(`/chat/${e}`)},formatDate(e){if(!e)return"Unknown";const t=new Date(e),n=new Date-t,r=Math.floor(n/(1e3*60*60*24));return r===0?"Today":r===1?"Yesterday":r<7?`${r} days ago`:t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},calculateProgress(e,t){const s=parseInt(e)||0,n=parseInt(t)||1;return n<=0?0:s>0?Math.max(5,Math.floor(s/n*100)):0}},mounted(){this.fetchChatHistory()}},S2={class:"bg-background min-h-screen"},E2={key:0,class:"flex justify-center items-center min-h-screen"},A2={key:1,class:"p-4 bg-red-50 dark:bg-red-900/30 text-red-800 dark:text-red-300 rounded-md m-4"},T2={key:2,class:"container mx-auto px-4 py-8"},P2={key:0,class:"text-center py-16"},O2={class:"mb-4"},I2={key:1,class:"space-y-8"},R2={class:"flex items-center justify-between"},$2={class:"flex items-center gap-3"},D2={class:"h-10 w-10 rounded-md bg-primary/10 flex items-center justify-center text-primary font-bold overflow-hidden"},L2=["src"],j2={key:1},B2={class:"text-xl font-bold"},M2={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},N2={class:"truncate"},F2={class:"space-y-1"},U2={class:"text-xs text-gray-600 dark:text-gray-300"},V2=["onClick"],q2={class:"space-y-1"},z2={class:"flex justify-between items-center text-xs text-gray-500 dark:text-gray-400"},H2={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden"},K2={class:"flex justify-between items-center pt-1 text-xs"},W2={class:"text-gray-600 dark:text-gray-400"},G2={key:0,class:"flex items-center gap-1"},J2={key:1,class:"flex items-center gap-1"};function Y2(e,t,s,n,r,o){const i=L("MessageSquareIcon"),a=L("PlayIcon"),l=L("Button"),u=L("ChevronRightIcon"),c=L("Badge"),d=L("CardTitle"),f=L("CardDescription"),h=L("CardHeader"),m=L("ChevronDownIcon"),g=L("MessageCircleIcon"),b=L("CardContent"),C=L("Card");return w(),$("div",S2,[r.loading?(w(),$("div",E2,t[1]||(t[1]=[p("div",{class:"animate-spin h-12 w-12 border-4 border-primary border-t-transparent rounded-full"},null,-1)]))):r.error?(w(),$("div",A2," Error: "+V(r.error),1)):(w(),$("div",T2,[t[10]||(t[10]=p("div",{class:"mb-8"},[p("h1",{class:"text-3xl font-bold mb-2"},"Your Chat History"),p("p",{class:"text-muted-foreground"},"Continue your adventures")],-1)),r.chatHistory.length===0?(w(),$("div",P2,[p("div",O2,[v(i,{class:"h-12 w-12 mx-auto text-muted-foreground/50"})]),t[3]||(t[3]=p("h2",{class:"text-xl font-semibold mb-2"},"No chats yet",-1)),t[4]||(t[4]=p("p",{class:"text-muted-foreground mb-6"},"Start an episode to begin your storytelling journey",-1)),v(l,{onClick:t[0]||(t[0]=E=>e.$router.push("/")),size:"lg",class:"gap-2"},{default:k(()=>[v(a,{class:"h-5 w-5"}),t[2]||(t[2]=H(" Browse Shows "))]),_:1})])):(w(),$("div",I2,[(w(!0),$(_e,null,qe(r.chatHistory,(E,P)=>(w(),$("div",{key:P,class:"space-y-4"},[p("div",R2,[p("div",$2,[p("div",D2,[E.show_image?(w(),$("img",{key:0,src:E.show_image,alt:"Show image",class:"h-full w-full object-cover"},null,8,L2)):(w(),$("span",j2,V(E.show_name.charAt(0)),1))]),p("h2",B2,V(E.show_name),1)]),v(l,{variant:"ghost",size:"sm",onClick:S=>e.$router.push(`/show/${E.show_id}`),class:"gap-1"},{default:k(()=>[t[5]||(t[5]=H(" View Show ")),v(u,{class:"h-4 w-4"})]),_:2},1032,["onClick"])]),p("div",M2,[(w(!0),$(_e,null,qe(E.chats,S=>(w(),K(C,{key:S.id,class:"overflow-hidden border border-gray-200 dark:border-gray-800 rounded-lg hover:shadow-md transition-all duration-200 cursor-pointer bg-white dark:bg-gray-900",onClick:D=>o.continueChat(S.id)},{default:k(()=>[v(h,{class:"py-2 px-3"},{default:k(()=>[v(d,{class:"flex justify-between items-center text-base"},{default:k(()=>[p("span",N2,V(S.episode_name),1),v(c,{class:ge(S.completed?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 px-1.5 py-0.5 text-xs rounded-full":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300 px-1.5 py-0.5 text-xs rounded-full")},{default:k(()=>[H(V(S.completed?"Completed":"In Progress"),1)]),_:2},1032,["class"])]),_:2},1024),v(f,{class:"text-xs text-gray-500 dark:text-gray-400"},{default:k(()=>[H(" Last played: "+V(o.formatDate(S.last_activity)),1)]),_:2},1024)]),_:2},1024),v(b,{class:"space-y-3 py-2 px-3"},{default:k(()=>[p("div",F2,[p("div",U2,[t[6]||(t[6]=p("span",{class:"font-medium text-gray-700 dark:text-gray-300 mr-1"},"Recap:",-1)),p("span",null,V(S.expandRecap?S.chat_summary:S.chat_summary.length>60?S.chat_summary.substring(0,60)+"...":S.chat_summary),1),S.chat_summary.length>60?(w(),$("span",{key:0,onClick:bs(D=>o.toggleRecap(S),["stop"]),class:"text-blue-600 dark:text-blue-400 font-medium text-xs ml-1 cursor-pointer hover:underline inline-flex items-center"},[H(V(S.expandRecap?"less":"more")+" ",1),v(m,{class:ge(["h-3 w-3 transition-transform duration-200",{"transform rotate-180":S.expandRecap}])},null,8,["class"])],8,V2)):Ee("",!0)])]),p("div",q2,[p("div",z2,[t[7]||(t[7]=p("span",null,"Progress",-1)),p("span",null,V(S.current_objective_index)+"/"+V(S.total_objectives),1)]),p("div",H2,[p("div",{class:"bg-blue-600 dark:bg-blue-500 h-2 rounded-full transition-all duration-300",style:Ut({width:`${o.calculateProgress(S.current_objective_index,S.total_objectives)}%`})},null,4)])]),p("div",K2,[p("span",W2,"Playing as: "+V(S.player_name),1),v(l,{variant:"outline",size:"sm",onClick:bs(D=>o.continueChat(S.id),["stop"]),class:ge(S.completed?"gap-1 bg-gray-50 hover:bg-gray-100 text-gray-700 dark:bg-gray-900/20 dark:hover:bg-gray-900/30 dark:text-gray-300 border border-gray-200 dark:border-gray-800 rounded-md px-2 py-0.5 text-xs":"gap-1 bg-blue-50 hover:bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 dark:text-blue-300 border border-blue-200 dark:border-blue-800 rounded-md px-2 py-0.5 text-xs")},{default:k(()=>[S.completed?(w(),$("div",G2,[v(g,{class:"h-4 w-4"}),t[8]||(t[8]=H(" View "))])):(w(),$("div",J2,[v(i,{class:"h-4 w-4"}),t[9]||(t[9]=H(" Continue "))]))]),_:2},1032,["onClick","class"])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]))),128))]))]))])}const X2=ft(C2,[["render",Y2]]),Q2={name:"LeaderboardPage",components:{Button:Ot,Card:Zr,CardContent:eo},data(){return{leaderboard:[],loading:!0,error:null,currentUserId:null}},computed:{sortedLeaderboard(){return[...this.leaderboard].sort((e,t)=>t.total_score-e.total_score)}},methods:{async fetchLeaderboard(){this.loading=!0,this.error=null;try{const e=await Be("api/leaderboard");if(!e||!Array.isArray(e.leaderboard))throw new Error("Invalid leaderboard data format");this.leaderboard=e.leaderboard.map(t=>({id:t.id,username:t.username,avatar_url:t.avatar_url,total_score:t.total_score||0,show_count:t.show_count||0}))}catch(e){console.error("Error fetching leaderboard:",e),this.error=`Failed to load leaderboard: ${e.message}`}finally{this.loading=!1,this.$nextTick(()=>{if(this.currentUserId){const e=document.querySelector(`[data-user-id="${this.currentUserId}"]`);e&&e.scrollIntoView({behavior:"smooth",block:"center"})}})}},handleImageError(e){e.target.src="/placeholder-avatar.jpg"},isCurrentUser(e){return e===this.currentUserId}},async mounted(){this.currentUserId=localStorage.getItem("user_id"),await this.fetchLeaderboard()}},Z2={class:"py-8"},eP={key:0,class:"flex justify-center items-center py-12"},tP={key:1,class:"text-center py-12"},sP={class:"text-red-500"},nP={key:2,class:"text-center py-12"},rP={key:3,class:"space-y-4"},oP={class:"flex items-center gap-4"},iP={class:"flex-1 flex items-center gap-4"},aP={class:"font-bold w-8"},lP=["src","alt"],cP={class:"font-medium"},uP={class:"flex items-center gap-2"},dP={class:"font-bold text-primary"};function fP(e,t,s,n,r,o){const i=L("Button"),a=L("CardContent"),l=L("Card");return w(),$("div",Z2,[t[5]||(t[5]=p("div",{class:"flex justify-between items-center mb-8"},[p("div",null,[p("h1",{class:"text-3xl font-bold tracking-tight"},"Leaderboard"),p("p",{class:"text-muted-foreground"},"See where you stand among the community")])],-1)),r.loading?(w(),$("div",eP,t[1]||(t[1]=[p("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"},null,-1)]))):r.error?(w(),$("div",tP,[p("p",sP,V(r.error),1),v(i,{onClick:o.fetchLeaderboard,class:"mt-4"},{default:k(()=>t[2]||(t[2]=[H("Try Again")])),_:1},8,["onClick"])])):r.leaderboard.length===0?(w(),$("div",nP,t[3]||(t[3]=[p("p",{class:"text-muted-foreground"},"No leaderboard entries yet. Participate in shows to get ranked!",-1)]))):(w(),$("div",rP,[(w(!0),$(_e,null,qe(o.sortedLeaderboard,(u,c)=>(w(),K(l,{key:u.id,"data-user-id":u.id,class:ge(["relative transition-colors",{"bg-blue-100 border-2 border-blue-300 dark:bg-blue-900/50":o.isCurrentUser(u.id),"hover:bg-accent/10":!o.isCurrentUser(u.id)}])},{default:k(()=>[v(a,{class:"p-6"},{default:k(()=>[p("div",oP,[p("div",iP,[p("span",aP,V(c+1),1),p("img",{src:u.avatar_url||"/placeholder-avatar.jpg",class:"h-10 w-10 rounded-full object-cover",onError:t[0]||(t[0]=(...d)=>o.handleImageError&&o.handleImageError(...d)),alt:u.username||"Anonymous"},null,40,lP),p("div",null,[p("p",cP,V(u.username||"Anonymous"),1)])]),p("div",uP,[p("span",dP,V(u.total_score),1),t[4]||(t[4]=p("span",{class:"text-muted-foreground text-sm"},"points",-1))])])]),_:2},1024)]),_:2},1032,["data-user-id","class"]))),128))]))])}const hP=ft(Q2,[["render",fP]]),pP=[{path:"/login",name:"Login",component:ik,meta:{requiresAuth:!1,layout:"none"}},{path:"/auth/callback",name:"AuthCallback",component:ck,meta:{requiresAuth:!1,layout:"none"}},{path:"/",name:"Home",component:od,meta:{requiresAuth:!0,layout:"main"}},{path:"/shows",name:"Shows",component:od,meta:{requiresAuth:!0,layout:"main"}},{path:"/show/:show_id/chat/:chat_id",name:"Chat",component:US,meta:{requiresAuth:!0,layout:"none"}},{path:"/create/show",name:"CreateShow",component:id,meta:{requiresAuth:!0,layout:"main"}},{path:"/show/:id",name:"ShowDetails",component:xA,meta:{requiresAuth:!0,layout:"main"}},{path:"/create/episode/:id",name:"CreateEpisode",component:ad,meta:{requiresAuth:!0,layout:"main"}},{path:"/edit/episode/:showId/:episodeId",name:"EditEpisode",component:ad,meta:{requiresAuth:!0,layout:"main"}},{path:"/edit/show/:showId",name:"EditShow",component:id,meta:{requiresAuth:!0,layout:"main"}},{path:"/edit/profile",name:"EditProfile",component:GT,meta:{requiresAuth:!0,layout:"main"}},{path:"/profile",name:"Profile",component:DT,meta:{requiresAuth:!0,layout:"main"}},{path:"/end/:chat_id",name:"End",component:k2,meta:{requiresAuth:!0,layout:"main"}},{path:"/chat/history",name:"ChatHistory",component:X2,meta:{requiresAuth:!0,layout:"main"}},{path:"/leaderboard",name:"Leaderboard",component:hP,meta:{requiresAuth:!0,layout:"main"}}],Kp=Ux({history:gx(),routes:pP});Kp.beforeEach(async(e,t,s)=>{const n=e.matched.some(a=>a.meta.requiresAuth),{data:r,error:o}=await St.auth.getSession(),i=r==null?void 0:r.session;return console.log("Route:",e.path,"Auth required:",n,"Session exists:",!!i),n&&!i?(console.log("Redirecting to login, auth required but no session"),s("/login")):e.path==="/login"&&i?(console.log("Redirecting to home, user is logged in but trying to access login"),s("/")):(console.log("Proceeding to route:",e.path),s())});var Ii=function(){return typeof document<"u"&&typeof window<"u"},mP=function(t,s){return new Promise(function(n,r){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("script");if(i.async=!0,i.src=t,i.charset="utf-8",s){var a=document.createElement("link");a.href=s,a.rel="preconnect",o.appendChild(a)}o.appendChild(i),i.onload=n,i.onerror=r})},gP=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Object.keys(s).forEach(function(n){t[n]=s[n]})},Wp=is({property:null,isEnabled:!0,disableScriptLoader:!1,useDebugger:!1,globalObjectName:"gtag",dataLayerName:"dataLayer",resourceURL:"https://www.googletagmanager.com/gtag/js",preconnectOrigin:"https://www.googletagmanager.com",customResource:null,appName:null,appId:null,appVersion:null}),tn=function(){return Ys(Wp)},Gp=ne(function(){var e=tn(),t=e.property;if(t.value)return Array.isArray(t.value)?t.value.find(function(s){return s.default===!0})||t.value[0]:t.value}),yP=ne(function(){var e=tn(),t=e.property;return!!(t.value&&t.value.id!==null)}),qr=ne(function(){var e=tn(),t=e.property;return Array.isArray(t.value)?t.value:[t.value]}),vP=ne(function(){var e=tn(),t=e.isEnabled,s=Gp.value;return!!(s&&s.id&&t.value)}),to=function(){var e;if(Ii()){for(var t=tn(),s=t.globalObjectName,n=t.useDebugger,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];n.value&&console.warn("[vue-gtag] Debugger:",o),(e=window)[s.value].apply(e,o)}},Zl=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];qr.value.forEach(function(n){to.apply(void 0,["config",n.id].concat(t))})},_P=function(e){Zl({custom_map:e})},bP=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;Ii()&&qr.value.forEach(function(t){window["ga-disable-".concat(t.id)]=e})},yn=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=Object.assign({},t);!s.send_to&&qr.value.length>1&&(s.send_to=qr.value.map(function(n){return n.id})),to("event",e,s)},wP=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];yn.apply(void 0,["exception"].concat(t))},xP=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];Zl.apply(void 0,["linker"].concat(t))},kP=function(e){var t={};typeof e=="string"?t={page_path:e,page_location:window.location.href}:t=e,typeof t.send_page_view>"u"&&(t.send_page_view=!0),yn("page_view",t)},CP=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];yn.apply(void 0,["purchase"].concat(t))},SP=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];yn.apply(void 0,["refund"].concat(t))},EP=function(){for(var e=tn(),t=e.appName,s=e.appId,n=e.appVersion,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];var a=o[0],l={};typeof a=="string"?l={screen_name:a}:l=a,l.app_name==null&&t.value!=null&&(l.app_name=t.value),l.app_id==null&&s.value!=null&&(l.app_id=s.value),l.app_version==null&&n.value!=null&&(l.app_version=n.value),yn("screen_view",l)},AP=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];to.apply(void 0,["set"].concat(t))},TP=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];yn.apply(void 0,["timing_complete"].concat(t))},PP=Object.freeze({__proto__:null,config:Zl,customMap:_P,disable:bP,event:yn,exception:wP,linker:xP,pageview:kP,purchase:CP,query:to,refund:SP,screenview:EP,set:AP,time:TP}),ld=ee(!1),cd=ee(!1),OP=function(){var t=tn(),s=t.disableScriptLoader,n=t.preconnectOrigin,r=t.resourceURL,o=t.dataLayerName;if(!(!Ii()||!yP.value||cd.value)){if(cd.value=!0,qr.value.forEach(function(a){var l=Object.assign({send_page_view:!1},a.params);to("config",a.id,l)}),s.value){ld.value=!0;return}var i="".concat(r.value,"?id=").concat(Gp.value.id,"&l=").concat(o.value);mP(i,n.value).then(function(){ld.value=!0})}},IP=function(){Ue(function(){return vP.value},function(t){return t&&OP()},{immediate:!0})},RP=function(){if(Ii()){var e=tn(),t=e.globalObjectName,s=e.dataLayerName;window[t.value]==null&&(window[s.value]=window[s.value]||[],window[t.value]=function(){window[s.value].push(arguments)}),window[t.value]("js",new Date)}};is({template:null,useScreenview:!1,skipSamePath:!0});var $P={install:function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};gP(Wp,s),RP(),IP(),t.config.globalProperties.$gtag=PP}};const Ri=Lf(N1);Ri.use(Kp);Ri.use(ZC);Ri.use($P,{config:{id:"G-K30HLVRLW4"}});Ri.mount("#app");export{hv as g};
